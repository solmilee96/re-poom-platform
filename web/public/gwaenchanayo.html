<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì•„ì´ ì—¬í–‰ - &#39;ì™œ ì´ëŸ´ê¹Œ?&#39;ë¥¼ &#39;ê·¸ë˜ì„œ ê·¸ë¬êµ¬ë‚˜&#39;ë¡œ ë°”ê¿”ì£¼ëŠ”, ì•„ì´ ê¸°ì§ˆ ê¸°ë°˜ í–‰ë™ ê°€ì´ë“œ ì„œë¹„ìŠ¤</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css" />
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    :root {
      /* í™”ì‚¬í•œ ì½”ë„í†¤ - ë¸Œë¼ìš´ ëŠë‚Œ ì œê±° */
      --coral: #f5b5a8;
      --coral-light: #fce0db;
      --coral-muted: #fef6f5;
      --coral-dark: #e87a6e;
      /* í¬ë¦¬ë¯¸ ì˜ë¡œìš° - ì—°ë…¸ë‘ ë‹¤í¬ í™”ì‚¬í•˜ê²Œ */
      --warm-yellow: #fefce8;
      --warm-yellow-light: #fffef5;
      --warm-yellow-soft: #fdf4d8;
      --warm-yellow-dark: #d4a84d;
      /* íŒŒìŠ¤í…” ë¯¼íŠ¸ */
      --mint: #a8e6d5;
      --mint-light: #d8f5ee;
      --mint-muted: #eefaf7;
      --mint-dark: #4db5a2;
    }
    * { font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif; }
    html { font-size: 16px; -webkit-text-size-adjust: 100%; }
    @media (max-width: 640px) { html { font-size: 15px; } }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel" data-presets="react">
    const { useState, useEffect } = React;
    
    // Icon components
    const Baby = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M9 12h.01"/><path d="M15 12h.01"/><path d="M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5"/><path d="M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1"/>
      </svg>
    );
    
    const Heart = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"/>
      </svg>
    );
    
    const Sparkles = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/>
      </svg>
    );
    
    const BookOpen = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
      </svg>
    );
    
    const MessageCircle = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"/>
      </svg>
    );
    
    const Send = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="m22 2-7 20-4-9-9-4Z"/><path d="M22 2 11 13"/>
      </svg>
    );
    
    const Download = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/>
      </svg>
    );
    
    const ArrowRight = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M5 12h14"/><path d="m12 5 7 7-7 7"/>
      </svg>
    );

    const RotateCcw = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/>
      </svg>
    );

    const Home = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/>
      </svg>
    );

    const User = ({ className, ...props }) => (
      <svg className={className} {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
        <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/>
      </svg>
    );

    const GwaenchanaYoApp = () => {
      const [step, setStep] = useState('welcome');
      const [childInfo, setChildInfo] = useState({ name: '', birthDate: '' });
      const [childProfile, setChildProfile] = useState({});
      const [parentProfile, setParentProfile] = useState({});
      const [behaviorInput, setBehaviorInput] = useState('');
      const [currentQuestion, setCurrentQuestion] = useState(0);
      const [chatHistory, setChatHistory] = useState([]);
      const [currentInput, setCurrentInput] = useState('');
      const [isAnalyzing, setIsAnalyzing] = useState(false);

      useEffect(() => {
        const saved = localStorage.getItem('gwaenchanayo_data');
        if (saved) {
          const data = JSON.parse(saved);
          setChildInfo(data.childInfo || { name: '', birthDate: '' });
          setChildProfile(data.childProfile || {});
          setParentProfile(data.parentProfile || {});
          setBehaviorInput(data.behaviorInput || '');
          setChatHistory(data.chatHistory || []);
          if (data.childInfo?.name && Object.keys(data.childProfile || {}).length > 0) {
            setStep('chat');
          }
        }
      }, []);

      const saveToStorage = (updates = {}) => {
        const data = {
          childInfo,
          childProfile,
          parentProfile,
          behaviorInput,
          chatHistory,
          lastUpdated: new Date().toISOString(),
          ...updates
        };
        localStorage.setItem('gwaenchanayo_data', JSON.stringify(data));
      };

      const getChildAge = () => {
        if (!childInfo.birthDate) return '';
        const birth = new Date(childInfo.birthDate);
        const today = new Date();
        let years = today.getFullYear() - birth.getFullYear();
        let months = today.getMonth() - birth.getMonth();
        if (months < 0) { years--; months += 12; }
        const totalMonths = years * 12 + months;
        if (totalMonths < 12) return `${totalMonths}ê°œì›”`;
        if (totalMonths < 36) return months === 0 ? `${years}ì‚´` : `${years}ì‚´ ${months}ê°œì›”`;
        return `${years}ì‚´`;
      };

      const temperamentQuestions = [
        { dimension: 'í™œë™ì„±', question: '{{name}}ì´(ê°€) ì§‘ì—ì„œ ë†€ ë•Œ,\nì£¼ë¡œ ì–´ë–¤ ëª¨ìŠµì¸ê°€ìš”?', description: 'ì•„ì´ì˜ ì‹ ì²´ì  ì—ë„ˆì§€ ìˆ˜ì¤€ê³¼ ì›€ì§ì„ì˜ ë¹ˆë„ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤', options: [
          { text: 'í•œì‹œë„ ê°€ë§Œíˆ ëª» ìˆê³  ëŠì„ì—†ì´ ì›€ì§ì—¬ìš”', score: 10, emoji: 'ğŸš€' },
          { text: 'í™œë°œí•˜ì§€ë§Œ ì¡°ìš©í•œ ë†€ì´ë„ 10-15ë¶„ì€ í•´ìš”', score: 7.5, emoji: 'ğŸƒ' },
          { text: 'í™œë™ì ì¸ ë†€ì´ì™€ ì¡°ìš©í•œ ë†€ì´ë¥¼ ë²ˆê°ˆì•„ í•´ìš”', score: 5, emoji: 'ğŸš¶' },
          { text: 'ì¡°ìš©í•œ ë†€ì´ë¥¼ ì„ í˜¸í•˜ê³  ê²©í•œ í™œë™ì€ ê¸ˆë°© ì§€ì³ìš”', score: 2.5, emoji: 'ğŸ§˜' },
          { text: 'ê±°ì˜ ì•ˆ ì›€ì§ì´ê³  í•œ ìë¦¬ì— ì˜¤ë˜ ì•‰ì•„ìˆì–´ìš”', score: 1, emoji: 'ğŸª·' }
        ]},
        { dimension: 'ê·œì¹™ì„±', question: 'ì ë“œëŠ” ì‹œê°„, ë°°ê³ íŒŒí•˜ëŠ” ì‹œê°„ì´\nì–¼ë§ˆë‚˜ ì¼ì •í•œê°€ìš”?', description: 'ìƒë¦¬ì  ë¦¬ë“¬ì˜ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ ì¸¡ì •í•©ë‹ˆë‹¤', options: [
          { text: 'ë§¤ì¼ ê±°ì˜ ê°™ì€ ì‹œê°„, ì‹œê³„ì²˜ëŸ¼ ì •í™•í•´ìš”', score: 10, emoji: 'â°' },
          { text: 'ëŒ€ì²´ë¡œ ë¹„ìŠ·í•˜ì§€ë§Œ 30ë¶„-1ì‹œê°„ ì°¨ì´ ë‚˜ìš”', score: 7.5, emoji: 'ğŸ“…' },
          { text: 'ê¸°ë³¸ íŒ¨í„´ì€ ìˆì§€ë§Œ ë§¤ì¼ ì¡°ê¸ˆì”© ë‹¬ë¼ìš”', score: 5, emoji: 'ğŸ”„' },
          { text: 'ë§¤ì¼ ì™„ì „íˆ ë‹¬ë¼ìš”, ì˜ˆì¸¡ì´ ì–´ë ¤ì›Œìš”', score: 2.5, emoji: 'ğŸ²' },
          { text: 'ì•„ì˜ˆ íŒ¨í„´ì´ ì—†ê³  ì™„ì „ ëœë¤ì´ì—ìš”', score: 1, emoji: 'â“' }
        ]},
        { dimension: 'ì ‘ê·¼ì„±', question: 'ë‚¯ì„  ì‚¬ëŒì´ë‚˜ ìƒˆë¡œìš´ ì¥ì†Œë¥¼\në§Œë‚˜ë©´?', description: 'ìƒˆë¡œìš´ ìê·¹ì— ëŒ€í•œ ì´ˆê¸° ë°˜ì‘ ê²½í–¥ì„ ë´…ë‹ˆë‹¤', options: [
          { text: 'ì¦‰ì‹œ ë‹¤ê°€ê°€ì„œ ì›ƒìœ¼ë©° ë°˜ê°€ì›Œí•´ìš”', score: 10, emoji: 'ğŸ¤—' },
          { text: 'ì•½ê°„ ê²½ê³„í•˜ì§€ë§Œ 2-3ë¶„ ì•ˆì— ë‹¤ê°€ê°€ìš”', score: 7.5, emoji: 'ğŸ‘‹' },
          { text: '5-10ë¶„ ì§€ì¼œë³¸ í›„ ì²œì²œíˆ íƒìƒ‰í•´ìš”', score: 5, emoji: 'ğŸ‘€' },
          { text: '15ë¶„ ì´ìƒ ì—„ë§ˆí•œí…Œ ë¶™ì–´ìˆê³  ë–¼ë©´ ìš¸ì–´ìš”', score: 2.5, emoji: 'ğŸ˜°' },
          { text: 'ê±°ë¶€í•˜ê³  ìš¸ë©° í•œ ì‹œê°„ì´ ì§€ë‚˜ë„ ì ì‘ ëª»í•´ìš”', score: 1, emoji: 'ğŸ˜­' }
        ]},
        { dimension: 'ì ì‘ì„±', question: 'ê³„íš ë³€ê²½, ìƒˆ ìŒì‹ ë“±\në³€í™”ê°€ ìƒê¸°ë©´?', description: 'ë³€í™”ì— ì ì‘í•˜ëŠ” ì†ë„ì™€ ìœ ì—°ì„±ì„ ì¸¡ì •í•©ë‹ˆë‹¤', options: [
          { text: 'ì˜¤íˆë ¤ ì¢‹ì•„í•´ìš”, ë³€í™”ë¥¼ ì¦ê¸°ê³  ë°”ë¡œ ì ì‘í•´ìš”', score: 10, emoji: 'âœ¨' },
          { text: 'ì²˜ìŒ 5ë¶„ì€ ì–´ìƒ‰í•˜ì§€ë§Œ ê¸ˆë°© ë°›ì•„ë“¤ì—¬ìš”', score: 7.5, emoji: 'ğŸŒŸ' },
          { text: 'ì¡°ê¸ˆ ë¶ˆí¸í•´í•˜ì§€ë§Œ 10-20ë¶„ì´ë©´ ì ì‘í•´ìš”', score: 5, emoji: 'â³' },
          { text: 'ì €í•­í•˜ê³  ìš¸ì–´ìš”, 30ë¶„-1ì‹œê°„ ë‹¬ë˜ì•¼ í•´ìš”', score: 2.5, emoji: 'ğŸ˜£' },
          { text: 'ê·¹ë„ë¡œ í˜ë“¤ì–´í•´ì„œ ëª‡ ì‹œê°„ì´ ì§€ë‚˜ë„ ì ì‘ ëª»í•´ìš”', score: 1, emoji: 'ğŸ’¢' }
        ]},
        { dimension: 'ë°˜ì‘ ê°•ë„', question: 'ê°ì •ì„ í‘œí˜„í•  ë•Œ,\nê°•ë„ëŠ” ì–´ëŠ ì •ë„ì¸ê°€ìš”?', description: 'ê°ì • í‘œí˜„ì˜ í¬ê¸°ì™€ ì—ë„ˆì§€ë¥¼ í‰ê°€í•©ë‹ˆë‹¤', options: [
          { text: 'ëª¨ë“  ê°ì •ì´ í­ë°œì , ì˜¨ëª¸ìœ¼ë¡œ í‘œí˜„í•´ìš”', score: 10, emoji: 'ğŸ’¥' },
          { text: 'ê°ì • í‘œí˜„ì´ í° í¸, í™˜í•˜ê²Œ ì›ƒê³  í¬ê²Œ ìš¸ì–´ìš”', score: 7.5, emoji: 'ğŸ˜†' },
          { text: 'ì ë‹¹íˆ í‘œí˜„í•´ìš”, ì›ƒê³  ìš¸ê³  ì§•ì§•ëŒ€ìš”', score: 5, emoji: 'ğŸ˜Š' },
          { text: 'ì¡°ìš©í•œ í¸, ì‚´ì§ ì›ƒê³  ì•½ê°„ ì°¡ê·¸ë ¤ìš”', score: 2.5, emoji: 'ğŸ˜Œ' },
          { text: 'ê±°ì˜ ë¬´í‘œì •, ê¸°ìœì§€ ìŠ¬í”ˆì§€ ì˜ ëª¨ë¥´ê² ì–´ìš”', score: 1, emoji: 'ğŸ˜' }
        ]},
        { dimension: 'ê¸°ë¶„ ìƒíƒœ', question: 'í‰ì†Œ {{name}}ì´(ê°€)ì˜\nì „ë°˜ì ì¸ ê¸°ë¶„ì€ ì–´ë–¤ê°€ìš”?', description: 'ê¸°ë³¸ ì •ì„œì˜ ê¸ì •ì„±/ë¶€ì •ì„± ê²½í–¥ì„ ë´…ë‹ˆë‹¤', options: [
          { text: 'ê±°ì˜ í•­ìƒ ë°ê³  ì¦ê±°ì›Œí•´ìš”', score: 10, emoji: 'ğŸ˜„' },
          { text: 'ëŒ€ì²´ë¡œ ê¸°ë¶„ ì¢‹ì€ ìƒíƒœì˜ˆìš”', score: 7.5, emoji: 'ğŸ™‚' },
          { text: 'ì¢‹ì„ ë•Œì™€ ì•ˆ ì¢‹ì„ ë•Œê°€ ë¹„ìŠ·í•´ìš”', score: 5, emoji: 'ğŸ˜' },
          { text: 'ì•½ê°„ ê¹Œë‹¤ë¡œìš´ í¸, ë¶ˆí¸í•´í•˜ëŠ” ëª¨ìŠµì„ ë” ìì£¼ ë´ìš”', score: 2.5, emoji: 'ğŸ˜Ÿ' },
          { text: 'ê±°ì˜ í•­ìƒ ì¹­ì–¼ëŒ€ìš”, ì›ƒëŠ” ëª¨ìŠµ ë³´ê¸° ì–´ë ¤ì›Œìš”', score: 1, emoji: 'ğŸ˜¢' }
        ]},
        { dimension: 'ì£¼ì˜ ì‚°ë§Œì„±', question: 'ì§‘ì¤‘í•  ë•Œ\nì£¼ë³€ ìê·¹ì´ ìˆìœ¼ë©´?', description: 'ì™¸ë¶€ ìê·¹ì— ì˜í•œ ì£¼ì˜ ì „í™˜ ì •ë„ë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤', options: [
          { text: 'ì‘ì€ ì†Œë¦¬ì—ë„ ë°”ë¡œ ëŒë ¤ìš”, 5ì´ˆ ì´ìƒ ì§‘ì¤‘ ë¶ˆê°€ëŠ¥', score: 10, emoji: 'ğŸ¦‹' },
          { text: 'ì‰½ê²Œ ì£¼ì˜ê°€ ë¶„ì‚°ë¼ìš”, ìì£¼ ë”´ ì§“ í•´ìš”', score: 7.5, emoji: 'ğŸ‘‚' },
          { text: 'ì–´ëŠ ì •ë„ ì§‘ì¤‘í•˜ì§€ë§Œ í¥ë¯¸ë¡œìš´ ìê·¹ì—” ëŒë ¤ìš”', score: 5, emoji: 'ğŸ‘ï¸' },
          { text: 'ê½¤ ì§‘ì¤‘í•´ìš”, ì›¬ë§Œí•œ ìê·¹ì—” ì‹ ê²½ ì•ˆ ì¨ìš”', score: 2.5, emoji: 'ğŸ¯' },
          { text: 'ì—„ì²­ë‚œ ì§‘ì¤‘ë ¥, ë¶ˆëŸ¬ë„ ëŒ€ë‹µ ì•ˆ í•´ìš”', score: 1, emoji: 'ğŸ”¬' }
        ]},
        { dimension: 'ì§€ì†ì„±', question: 'ì–´ë ¤ìš´ ê³¼ì œê°€ ì˜ ì•ˆ ë˜ë©´\nì–´ë–»ê²Œ í•˜ë‚˜ìš”?', description: 'ì¢Œì ˆ ìƒí™©ì—ì„œì˜ ëˆê¸°ì™€ ì¸ë‚´ì‹¬ì„ í‰ê°€í•©ë‹ˆë‹¤', options: [
          { text: 'ê³„ì† ë„ì „í•´ìš”, ì„±ê³µí•  ë•Œê¹Œì§€ í¬ê¸°ë¥¼ ëª°ë¼ìš”', score: 10, emoji: 'ğŸ’ª' },
          { text: '5-10ë²ˆ ì‹œë„í•˜ë‹¤ ì•ˆ ë˜ë©´ ë„ì›€ ìš”ì²­í•´ìš”', score: 7.5, emoji: 'ğŸ”§' },
          { text: '3-5ë²ˆ ì‹œë„í•˜ë‹¤ ì•ˆ ë˜ë©´ ë‹¤ë¥¸ ê±¸ ì°¾ì•„ìš”', score: 5, emoji: 'ğŸ¤”' },
          { text: 'í•œë‘ ë²ˆ í•´ë³´ê³  ë°”ë¡œ í¬ê¸°í•˜ê±°ë‚˜ ìš¸ì–´ìš”', score: 2.5, emoji: 'ğŸ˜¤' },
          { text: 'ì‹œë„ì¡°ì°¨ ì•ˆ í•´ìš”, "ì—„ë§ˆê°€ í•´ì¤˜" í•´ìš”', score: 1, emoji: 'ğŸ³ï¸' }
        ]},
        { dimension: 'ê°ê° ë¯¼ê°ë„', question: 'ì˜· íƒœê·¸, ì†ŒìŒ, ìŒì‹ ì§ˆê° ë“±ì— ëŒ€í•œ\në°˜ì‘ì€?', description: 'ê°ê° ì²˜ë¦¬ì˜ ë¯¼ê°ì„±ì„ ì¢…í•©ì ìœ¼ë¡œ ë´…ë‹ˆë‹¤', options: [
          { text: 'ê·¹ë„ë¡œ ì˜ˆë¯¼í•´ìš”, ì‹œë„ëŸ¬ìš´ ê³³ì—ì„œ ê·€ ë§‰ì•„ìš”', score: 10, emoji: 'ğŸ”Š' },
          { text: 'ê½¤ ë¯¼ê°í•´ìš”, íŠ¹ì • ì†Œë¦¬ë‚˜ ì´‰ê° ì‹«ì–´í•´ìš”', score: 7.5, emoji: 'ğŸ‘ƒ' },
          { text: 'ë³´í†µì´ì—ìš”, ê°€ë” íŠ¹ì •í•œ ê²ƒë§Œ ë¶ˆí¸í•´í•´ìš”', score: 5, emoji: 'ğŸ‘‚' },
          { text: 'ë‘”ê°í•œ í¸, ì›¬ë§Œí•œ ìê·¹ì—” ì‹ ê²½ ì•ˆ ì¨ìš”', score: 2.5, emoji: 'ğŸ¤·' },
          { text: 'ê±°ì˜ ëª¨ë“  ìê·¹ì— ë¬´ë¤ë¤í•´ìš”', score: 1, emoji: 'ğŸ˜' }
        ]}
      ];

      const parentQuestions = [
        { dimension: 'ìŠ¤íŠ¸ë ˆìŠ¤ ë‚´ì„±', question: 'ì•„ì´ê°€ 30ë¶„ ë„˜ê²Œ ë–¼ì“°ê³  ìš¸ ë•Œ,\në‚˜ì˜ ë°˜ì‘ì€?', description: 'ê³ ê°•ë„ ìœ¡ì•„ ìƒí™©ì—ì„œì˜ ì •ì„œ ì¡°ì ˆ ëŠ¥ë ¥ì„ ë´…ë‹ˆë‹¤', options: [
          { text: 'í”ë“¤ë¦¬ì§€ ì•Šê³  ì°¨ë¶„í•´ìš”, ì¹¨ì°©í•˜ê²Œ ëŒ€ì²˜í•´ìš”', score: 10 },
          { text: 'ì²˜ìŒì—” ë‹¹í™©í•˜ì§€ë§Œ ê³§ ì§„ì •í•˜ê³  ë‹¬ë˜ìš”', score: 7.5 },
          { text: 'ìŠ¤íŠ¸ë ˆìŠ¤ ëŠë¼ì§€ë§Œ ì°¸ê³  ê²¬ëŒìš”', score: 5 },
          { text: 'í•¨ê»˜ í˜ë“¤ì–´ì§€ê³  ëª©ì†Œë¦¬ê°€ ì»¤ì ¸ìš”', score: 2.5 },
          { text: 'ê°ë‹¹ ì•ˆ ë¼ìš”, ê°™ì´ ìš¸ê±°ë‚˜ ë‚˜ê°€ë²„ë ¤ìš”', score: 1 }
        ]},
        { dimension: 'ë°˜ì‘ ì†ë„', question: 'ì•„ì´ê°€ "ì—„ë§ˆ!"í•˜ê³  ë¶€ë¥´ê±°ë‚˜\nìš¸ìŒ ì†Œë¦¬ë¥¼ ë‚´ë©´?', description: 'ì•„ì´ì˜ ì‹ í˜¸ì— ëŒ€í•œ ë°˜ì‘ì„±ê³¼ ë¯¼ê°ì„±ì„ ì¸¡ì •í•©ë‹ˆë‹¤', options: [
          { text: 'ì¦‰ì‹œ ë‹¬ë ¤ê°€ìš”, ê¸°ë‹¤ë¦¬ê²Œ í•˜ëŠ” ê²Œ ë¶ˆì•ˆí•´ìš”', score: 10 },
          { text: 'ê³§ë°”ë¡œ ë°˜ì‘í•˜ì§€ë§Œ ê¸‰í•˜ì§€ ì•Šìœ¼ë©´ "ì ê¹ë§Œ"', score: 7.5 },
          { text: 'í•˜ë˜ ì¼ ë§ˆë¬´ë¦¬í•˜ê³  ê°€ìš”, ìƒí™© ë´ìš”', score: 5 },
          { text: 'ê¸‰í•œ ê²Œ ì•„ë‹ˆë©´ ì•„ì´ê°€ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•˜ê¸¸ ê¸°ë‹¤ë ¤ìš”', score: 2.5 },
          { text: 'ì •ë§ ê°„ì ˆí•˜ê²Œ ë¶€ë¥¼ ë•Œë§Œ ê°€ìš”', score: 1 }
        ]},
        { dimension: 'í†µì œ ìš•êµ¬', question: 'ê³„íšëŒ€ë¡œ ì•ˆ ë  ë•Œ\nì–´ë–»ê²Œ ëŠë¼ë‚˜ìš”?', description: 'ì˜ˆì¸¡ ê°€ëŠ¥ì„±ê³¼ í†µì œì— ëŒ€í•œ ìš•êµ¬ ìˆ˜ì¤€ì„ íŒŒì•…í•©ë‹ˆë‹¤', options: [
          { text: 'ë§ì´ ë¶ˆì•ˆí•´ìš”, ë£¨í‹´ ê¹¨ì§€ë©´ í•˜ë£¨ê°€ ë§í•œ ê²ƒ ê°™ì•„ìš”', score: 10 },
          { text: 'ë¶ˆí¸í•˜ì§€ë§Œ ê³„íš Bë¡œ ì¡°ì •í•  ìˆ˜ ìˆì–´ìš”', score: 7.5 },
          { text: 'ì•½ê°„ ì•„ì‰½ì§€ë§Œ "ë­ ì–´ë•Œ" í•˜ê³  ë„˜ì–´ê°€ìš”', score: 5 },
          { text: 'ê°œì˜ì¹˜ ì•Šì•„ìš”, ì›ë˜ ê³„íšì´ ë³„ë¡œ ì—†ì–´ìš”', score: 2.5 },
          { text: 'ê³„íš ì—†ëŠ” ê²Œ ë” í¸í•´ìš”, ì¦‰í¥ì ìœ¼ë¡œ í•´ìš”', score: 1 }
        ]},
        { dimension: 'ì™„ë²½ì£¼ì˜', question: 'ìœ¡ì•„ ì •ë³´ë¥¼ ì ‘í•  ë•Œ\në‚˜ëŠ”?', description: 'ìœ¡ì•„ì—ì„œì˜ ê¸°ì¤€ê³¼ ìê¸° í‰ê°€ ê²½í–¥ì„ ë´…ë‹ˆë‹¤', options: [
          { text: 'ë‹¤ ë”°ë¼í•˜ë ¤ ë…¸ë ¥í•´ìš”, ëª» ì§€í‚¤ë©´ ìì±…í•´ìš”', score: 10 },
          { text: 'ìµœëŒ€í•œ ë”°ë¼í•˜ì§€ë§Œ ì•ˆ ë˜ë©´ ê´œì°®ë‹¤ê³  ë‹¬ë˜ìš”', score: 7.5 },
          { text: 'ì°¸ê³ í•˜ë˜ ìš°ë¦¬ ìƒí™©ì— ë§ê²Œ ì ìš©í•´ìš”', score: 5 },
          { text: 'ê·¸ëƒ¥ ì°¸ê³ ë§Œ í•´ìš”, ë‚´ ë°©ì‹ì´ ìˆì–´ìš”', score: 2.5 },
          { text: 'ë³„ë¡œ ì‹ ê²½ ì•ˆ ì¨ìš”, ë‚´ ê°ìœ¼ë¡œ í•´ìš”', score: 1 }
        ]},
        { dimension: 'ì—ë„ˆì§€ ìˆ˜ì¤€', question: 'í•˜ë£¨ ìœ¡ì•„ë¥¼ ë§ˆì¹œ ì €ë…, ë‚˜ì˜ ìƒíƒœëŠ”?', description: 'ìœ¡ì•„ë¡œ ì¸í•œ ì—ë„ˆì§€ ì†Œì§„ ì •ë„ë¥¼ íŒŒì•…í•©ë‹ˆë‹¤', options: [
          { text: 'ì•„ì§ ì—ë„ˆì§€ ë‚¨ì•„ìˆì–´ìš”, ë” ë†€ì•„ì¤„ ìˆ˜ ìˆì–´ìš”', score: 10 },
          { text: 'ì•½ê°„ í”¼ê³¤í•˜ì§€ë§Œ ì§‘ì•ˆì¼ì€ í•  ìˆ˜ ìˆì–´ìš”', score: 7.5 },
          { text: 'ê½¤ ì§€ì³ìˆì–´ìš”, ì‰¬ê³  ì‹¶ì§€ë§Œ í•´ì•¼ í•  ì¼ì€ í•´ìš”', score: 5 },
          { text: 'ì™„ì „ ë…¹ì´ˆì˜ˆìš”, ì•„ì´ ì¬ìš´ í›„ ì“°ëŸ¬ì ¸ìš”', score: 2.5 },
          { text: 'í•œê³„ì˜ˆìš”, ì €ë…ì—” ì•„ì´í•œí…Œ í™”ë‚´ê±°ë‚˜ TVë§Œ ë³´ì—¬ì¤˜ìš”', score: 1 }
        ]}
      ];

      // [ì‚¬ìš©ì ê³ ì •] ë¶€ëª¨ ìœ í˜• ë¶„ë¥˜. ê·¹ë‹¨(ë°˜ì‘ì†ë„Â·ì—ë„ˆì§€ ë“±) ì‹œ ê· í˜•í˜• ë°°ì œ. ì‚¬ìš©ì ì§ì ‘ ë³€ê²½ ìš”ì²­ ì „ê¹Œì§€ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ.
      const getParentType = (scores) => {
        const stressTolerance = scores[0];
        const responseSpeed = scores[1];
        const controlNeed = scores[2];
        const perfectionism = scores[3];
        const energyLevel = scores[4];
        const hasParentExtreme = (responseSpeed <= 2 || responseSpeed >= 8 || energyLevel <= 2 || energyLevel >= 8);
        if (stressTolerance <= 3 && energyLevel <= 3) {
          return { type: 'íšŒë³µì´ í•„ìš”í•œ ì—„ë§ˆ', emoji: 'ğŸ’™', english: 'Burnout Risk', description: 'ì§€ê¸ˆ ë§ì´ ì§€ì³ìˆì–´ìš”. ë¨¼ì € ì—„ë§ˆë¥¼ ëŒë´ì•¼ í•´ìš”.', color: 'blue' };
        }
        if (controlNeed >= 8 && perfectionism >= 8) {
          return { type: 'ê³„íší˜• ì—„ë§ˆ', emoji: 'ğŸ“‹', english: 'Planner Parent', description: 'ì²´ê³„ì ì´ê³  ì™„ë²½ì„ ì¶”êµ¬í•˜ëŠ” ì—„ë§ˆ', color: 'purple' };
        }
        if (responseSpeed >= 8 && controlNeed <= 4) {
          return { type: 'ê³µê°í˜• ì—„ë§ˆ', emoji: 'ğŸ’•', english: 'Responsive Parent', description: 'ì•„ì´ì˜ ì‹ í˜¸ì— ì¦‰ê° ë°˜ì‘í•˜ëŠ” ë”°ëœ»í•œ ì—„ë§ˆ', color: 'pink' };
        }
        if (responseSpeed <= 2 && energyLevel >= 8) {
          return { type: 'í˜ì´ìŠ¤í˜• ì—„ë§ˆ', emoji: 'ğŸ•', english: 'Paced Parent', description: 'ì„ íƒì ìœ¼ë¡œ ë°˜ì‘í•˜ê³  ì—ë„ˆì§€ê°€ ì¶©ë§Œí•œ ì—„ë§ˆ', color: 'teal' };
        }
        if (stressTolerance >= 7 && perfectionism <= 4) {
          return { type: 'ì—¬ìœ í˜• ì—„ë§ˆ', emoji: 'ğŸŒˆ', english: 'Relaxed Parent', description: 'ëŠê¸‹í•˜ê³  ìœ ì—°í•œ ì—„ë§ˆ', color: 'green' };
        }
        if (!hasParentExtreme) {
          return { type: 'ê· í˜•í˜• ì—„ë§ˆ', emoji: 'â­', english: 'Balanced Parent', description: 'ì—¬ëŸ¬ ë©´ì—ì„œ ê· í˜•ì¡íŒ ì—„ë§ˆ', color: 'teal' };
        }
        return { type: 'í˜¼í•©í˜• ì—„ë§ˆ', emoji: 'ğŸŒˆ', english: 'Mixed Parent Profile', description: 'ì—¬ëŸ¬ ì„±í–¥ì´ ì¡°í•©ëœ ë…íŠ¹í•œ ì–‘ìœ¡ ìŠ¤íƒ€ì¼', color: 'teal' };
      };

      // [ì‚¬ìš©ì ê³ ì •] ê¸°ì§ˆ ìœ í˜• ë¶„ë¥˜ (Chess & Thomas, 1977 + Elaine Aron, 1996). ê·¹ë‹¨ ì ìˆ˜ ì‹œ ë°¸ëŸ°ì„œ ë°°ì œ. ì‚¬ìš©ì ì§ì ‘ ë³€ê²½ ìš”ì²­ ì „ê¹Œì§€ ìˆ˜ì •í•˜ì§€ ë§ ê²ƒ.
      const getTemperamentType = (scores) => {
        const activity = scores[0];
        const regularity = scores[1];
        const approach = scores[2];
        const adaptability = scores[3];
        const intensity = scores[4];
        const mood = scores[5];
        const sensitivity = scores[8];
        const hasExtreme = (arr) => arr.slice(0, 6).some(s => s <= 2 || s >= 8);
        if (sensitivity >= 8) {
          return { type: 'ì„¬ì„¸íŒŒ', emoji: 'ğŸ¨', english: 'Highly Sensitive Child', description: 'ì„¸ìƒì„ ì„¬ì„¸í•˜ê²Œ ëŠë¼ëŠ” ê°ê°ì´ ì˜ˆë¯¼í•œ ì•„ì´', color: 'purple' };
        }
        if (regularity <= 4 && adaptability <= 4 && intensity >= 7) {
          return { type: 'ì—ë„ˆìì´ì €', emoji: 'âš¡', english: 'Spirited Child', description: 'ê°ì •ì´ ê°•ë ¬í•˜ê³  ë³€í™”ì— ë¯¼ê°í•œ ì•„ì´', color: 'red' };
        }
        if (approach <= 2 || (mood <= 2 && approach <= 4 && intensity <= 5)) {
          return { type: 'ì‹ ì¤‘íŒŒ', emoji: 'ğŸ”', english: 'Slow-to-Warm-Up Child', description: 'ì‹ ì¤‘í•˜ê³  ì²œì²œíˆ ì ì‘í•˜ëŠ” ê´€ì°°í˜• ì•„ì´', color: 'blue' };
        }
        if (approach <= 4 && adaptability <= 5 && intensity <= 5) {
          return { type: 'ì‹ ì¤‘íŒŒ', emoji: 'ğŸ”', english: 'Slow-to-Warm-Up Child', description: 'ì‹ ì¤‘í•˜ê³  ì²œì²œíˆ ì ì‘í•˜ëŠ” ê´€ì°°í˜• ì•„ì´', color: 'blue' };
        }
        if (activity >= 8) {
          return { type: 'íƒí—˜ê°€', emoji: 'ğŸš€', english: 'Active Explorer', description: 'ëŠì„ì—†ì´ ì›€ì§ì´ê³  íƒìƒ‰í•˜ëŠ” ì—ë„ˆì§€ ë„˜ì¹˜ëŠ” ì•„ì´', color: 'orange' };
        }
        if (regularity >= 7 && adaptability >= 7 && mood >= 7) {
          return { type: 'ìˆœë‘¥ì´', emoji: 'ğŸ˜Š', english: 'Easy Child', description: 'ê·œì¹™ì ì´ê³  ì ì‘ì„ ì˜í•˜ëŠ” í‚¤ìš°ê¸° ì‰¬ìš´ ì•„ì´', color: 'green' };
        }
        if (hasExtreme(scores)) {
          return { type: 'í˜¼í•©í˜•', emoji: 'ğŸŒˆ', english: 'Mixed Profile', description: 'ì—¬ëŸ¬ ê¸°ì§ˆì´ ì¡°í•©ëœ ë…íŠ¹í•œ ì•„ì´', color: 'teal' };
        }
        return { type: 'ë°¸ëŸ°ì„œ', emoji: 'âš–ï¸', english: 'Balanced Child', description: 'ì—¬ëŸ¬ ê¸°ì§ˆì´ ê³¨ê³ ë£¨ ë‚˜íƒ€ë‚˜ëŠ” ê· í˜•ì¡íŒ ì•„ì´', color: 'teal' };
      };

      const analyzeTemperament = () => {
        const childScores = temperamentQuestions.map((_, i) => childProfile[`q${i}`] || 5);
        const parentScores = parentQuestions.map((_, i) => parentProfile[`p${i}`] || 5);
        const lowAdaptability = childScores[3] < 5;
        const highIntensity = childScores[4] > 7;
        const highSensitivity = childScores[8] > 7;
        const highActivity = childScores[0] > 7;
        const temperamentType = getTemperamentType(childScores);
        const parentType = getParentType(parentScores);
        const age = getChildAge();
        const name = childInfo.name;
        const concern = behaviorInput || 'ì¼ë°˜ì ì¸ ìœ¡ì•„ ê³ ë¯¼';
        let interpretation = '';
        let reassurance = '';
        let script = '';
        let practicalTips = [];
        let realExamples = [];
        let concernAnalysis = '';
        let parentAnalysis = '';
        if (parentType.type === 'íšŒë³µì´ í•„ìš”í•œ ì—„ë§ˆ') {
          parentAnalysis = `ì—„ë§ˆëŠ” ì§€ê¸ˆ **'${parentType.type}'** ìƒíƒœì˜ˆìš”. ìŠ¤íŠ¸ë ˆìŠ¤ ë‚´ì„±ì´ ë‚®ê³  ì—ë„ˆì§€ê°€ ê³ ê°ˆëœ ìƒíƒœì—ì„œëŠ” ì•„ë¬´ë¦¬ ì¢‹ì€ ìœ¡ì•„ë²•ë„ ì‹¤ì²œí•˜ê¸° ì–´ë ¤ì›Œìš”. ì§€ê¸ˆì€ í˜ë“¤ì–´ë„ íšŒë³µ í›„ì—ëŠ” ê°™ì€ ê²½í—˜ì´ ê³µê°Â·íšŒë³µ íƒ„ë ¥ì„±ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”. ì•„ì´ê°€ 30ë¶„ ë„˜ê²Œ ìš¸ ë•Œ, ê³„íšì´ ì™„ì „íˆ í‹€ì–´ì§ˆ ë•Œ, ìˆ˜ë©´ ë¶€ì¡±Â·ë„ì›€ ë¶€ì¡±ì´ ê²¹ì¹  ë•ŒëŠ” ê°ì •ì´ í­ë°œí•˜ê±°ë‚˜ ë¬´ê¸°ë ¥í•´ì§€ê¸° ì‰¬ì›Œìš”.\n\n**ê°€ì¥ ì‹œê¸‰í•œ ê²ƒ:** (1) í•˜ë£¨ 30ë¶„ì´ë¼ë„ í˜¼ìë§Œì˜ ì‹œê°„ (2) ë„ì›€ ìš”ì²­(ë°°ìš°ìÂ·ëŒë´„) (3) "ì™„ë²½í•œ ì—„ë§ˆ" ê¸°ì¤€ ë‚´ë ¤ë†“ê¸°. ì—„ë§ˆê°€ ë¨¼ì € íšŒë³µí•´ì•¼ ${name}ì´ë„ í–‰ë³µí•´ì§ˆ ìˆ˜ ìˆì–´ìš”.`;
        } else if (parentType.type === 'ê³„íší˜• ì—„ë§ˆ') {
          parentAnalysis = `ì—„ë§ˆëŠ” **'${parentType.type}'** ìŠ¤íƒ€ì¼ì´ì—ìš”. ì²´ê³„ì ì´ê³  ì™„ë²½ì„ ì¶”êµ¬í•˜ëŠ” ê±´ í° ì¥ì ì´ì§€ë§Œ, ${name}ì´(${age})ëŠ” ì•„ì§ ë£¨í‹´ì„ ì™„ë²½í•˜ê²Œ ë”°ë¥´ê¸° ì–´ë ¤ìš´ ì‹œê¸°ì˜ˆìš”. ê³„íšì„±Â·ì¼ê´€ì„±ì€ ì•„ì´ì—ê²Œ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ê³¼ ì•ˆì •ê°ì„ ì£¼ëŠ” í¸ì´ì—ìš”. ê³„íšì´ ê¹¨ì§€ê±°ë‚˜ "80%ë§Œ í•´ë„ ëëŠ”ë°"ê°€ ì•ˆ ë  ë•ŒëŠ” ë¶ˆì•ˆÂ·ìì±…Â·ì•„ì´ì—ê²Œ ì”ì†Œë¦¬ê°€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆì–´ìš”.\n\n**í™œìš©ë²•:** "ì™„ë²½í•œ ë£¨í‹´"ë³´ë‹¤ "80% ì„±ê³µ ë£¨í‹´", í”Œëœ B ë¯¸ë¦¬ ì¤€ë¹„, ${name}ì´ì˜ ì‘ì€ ì„±ê³µì— ì§‘ì¤‘í•˜ê¸°. ì—„ë§ˆì˜ ê³„íšì„±ì€ ê²°êµ­ ${name}ì´ì—ê²Œ ì•ˆì •ê°ì„ ì¤„ ê±°ì˜ˆìš”.`;
        } else if (parentType.type === 'ê³µê°í˜• ì—„ë§ˆ') {
          parentAnalysis = `ì—„ë§ˆëŠ” **'${parentType.type}'** ìŠ¤íƒ€ì¼ì´ì—ìš”. ${name}ì´ì˜ ì‹ í˜¸ì— ì¦‰ê° ë°˜ì‘í•˜ëŠ” ë”°ëœ»í•¨ì€ ì• ì°© í˜•ì„±ì— ì•„ì£¼ ì¢‹ì•„ìš”. ë¯¼ê°í•œ ë°˜ì‘ì€ ì•„ì´ì˜ ì •ì„œ ì¡°ì ˆÂ·ìì¡´ê° ë°œë‹¬ì— ë„ì›€ì´ ë˜ëŠ” í¸ì´ì—ìš”. ë„ˆë¬´ ë¹¨ë¦¬ ë‹¬ë ¤ê°€ë©´ ì•„ì´ê°€ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•  ê¸°íšŒë¥¼ ë†“ì¹˜ê³ , ì—„ë§ˆ ì—ë„ˆì§€ê°€ ë¹¨ë¦¬ ì†Œì§„ë  ìˆ˜ ìˆì–´ìš”.\n\n**í™œìš©ë²•:** 10ì´ˆ ê¸°ë‹¤ë ¤ë³´ê¸°, "ì—„ë§ˆ ë„ì™€ì¤„ê¹Œ?" ë¬¼ì–´ë³´ê¸°, ì—„ë§ˆì˜ íœ´ì‹ë„ ì±™ê¸°ê¸°. ì—„ë§ˆì˜ ê³µê° ëŠ¥ë ¥ì€ ${name}ì´ì˜ ì •ì„œ ë°œë‹¬ì— í° ìì‚°ì´ì—ìš”.`;
        } else if (parentType.type === 'ì—¬ìœ í˜• ì—„ë§ˆ') {
          parentAnalysis = `ì—„ë§ˆëŠ” **'${parentType.type}'** ìŠ¤íƒ€ì¼ì´ì—ìš”. ëŠê¸‹í•˜ê³  ìœ ì—°í•œ íƒœë„ëŠ” ${name}ì´(${age})ì—ê²Œ ì‹¬ë¦¬ì  ì—¬ìœ ë¥¼ ì¤˜ìš”. ìœ ì—°ì„±ì€ ì•„ì´ì˜ ììœ¨ì„±Â·ë„ì „ ìš•êµ¬ë¥¼ í‚¤ìš°ê³  ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ëœ ì „ë‹¬ë¼ìš”. ì•„ì´ê°€ ë¶ˆì•ˆí•´í•˜ê±°ë‚˜ ì˜ˆì¸¡ì´ í•„ìš”í•  ë•Œ(ì‹ ì¤‘íŒŒÂ·ì—ë„ˆìì´ì € ì•„ì´)ëŠ” "ë­ ì–´ë•Œ"ë§Œ ë°˜ë³µí•˜ë©´ ì˜¤íˆë ¤ ë¶ˆì•ˆí•´í•  ìˆ˜ ìˆì–´ìš”.\n\n**í™œìš©ë²•:** ì•„ì´ê°€ ë¶ˆì•ˆí•´í•˜ëŠ” ì‹ í˜¸ ë†“ì¹˜ì§€ ì•Šê¸°, ê¸°ë³¸ ë£¨í‹´(ì‹ì‚¬Â·ìˆ˜ë©´) ìœ ì§€, ê²½ê³„ì„ ì€ ëª…í™•í•˜ê²Œ. ì—„ë§ˆì˜ ì—¬ìœ ë¡œì›€ì€ ${name}ì´ì˜ ììœ¨ì„±ì„ í‚¤ìš°ëŠ” ì¢‹ì€ í™˜ê²½ì´ì—ìš”.`;
        } else if (parentType.type === 'í˜ì´ìŠ¤í˜• ì—„ë§ˆ') {
          parentAnalysis = `ì—„ë§ˆëŠ” **'${parentType.type}'** ìŠ¤íƒ€ì¼ì´ì—ìš”. ì•„ì´ ë¶€ë¥¼ ë•Œ ì¦‰ê° ë‹¬ë ¤ê°€ê¸°ë³´ë‹¤ 'ì ê¹ë§Œ' í•˜ê³  ìê¸° í˜ì´ìŠ¤ë¥¼ ìœ ì§€í•˜ëŠ” í¸ì´ì—ìš”. ë°˜ì‘ ì†ë„ëŠ” ëŠë¦´ ìˆ˜ ìˆì§€ë§Œ ì—ë„ˆì§€ê°€ ì¶©ë§Œí•´ ì €ë…ì—ë„ ì—¬ìœ ê°€ ìˆì–´ìš”. ì„ íƒì ìœ¼ë¡œ ë°˜ì‘í•˜ëŠ” íƒœë„ëŠ” ì•„ì´ê°€ ìŠ¤ìŠ¤ë¡œ í•´ê²°í•  ê¸°íšŒë¥¼ ëŠ˜ë ¤ ì£¼ëŠ” í¸ì´ì—ìš”. ì•„ì´ê°€ ì§„ì§œ ìœ„í—˜í•˜ê±°ë‚˜ ê·¹ì‹¬í•˜ê²Œ ìš¸ ë•ŒëŠ” "ì—„ë§ˆ ì ê¹ë§Œ"ì´ ê¸¸ì–´ì§€ë©´ ë¶ˆì•ˆí•´í•  ìˆ˜ ìˆì–´ìš”. ê¸‰í•œ ìš¸ìŒÂ·ë¶€ë¦„ì—ëŠ” ì§§ê²Œë¼ë„ ë°˜ì‘í•´ ì£¼ì‹œë©´ ì¢‹ì•„ìš”.`;
        } else if (parentType.type === 'í˜¼í•©í˜• ì—„ë§ˆ') {
          parentAnalysis = `ì—„ë§ˆëŠ” **'${parentType.type}'** í”„ë¡œí•„ì´ì—ìš”. ë°˜ì‘ ì†ë„Â·ì—ë„ˆì§€Â·ìŠ¤íŠ¸ë ˆìŠ¤ ë‚´ì„± ë“±ì´ í•œìª½ìœ¼ë¡œ ì¹˜ìš°ì³ ìˆì–´, í•˜ë‚˜ì˜ ìœ í˜•ìœ¼ë¡œ ë¬¶ê¸° ì–´ë ¤ìš´ ì¡°í•©ì´ì—ìš”.\n\nì•„ë˜ ì–‘ìœ¡ì í”„ë¡œí•„ ë§‰ëŒ€ë¥¼ ë³´ì‹œê³ , ë†’ì€ í•­ëª©(ê°•ì )ê³¼ ë‚®ì€ í•­ëª©(ì‰¬ì–´ê°€ê¸°)ì„ í•¨ê»˜ ì°¸ê³ í•˜ì‹œë©´ ë¼ìš”. ê·¹ë‹¨ì´ ìˆëŠ” ë§Œí¼ ê·¸ ë¶€ë¶„ì€ ë°°ìš°ìÂ·ëŒë´„ê³¼ ë‚˜ëˆ„ëŠ” ê²ƒë„ ë„ì›€ì´ ë©ë‹ˆë‹¤.`;
        } else {
          parentAnalysis = `ì—„ë§ˆëŠ” **'${parentType.type}'** ìŠ¤íƒ€ì¼ì´ì—ìš”. ì—¬ëŸ¬ ë©´ì—ì„œ ê· í˜•ì¡íŒ ìœ¡ì•„ íƒœë„ë¥¼ ê°€ì§€ê³  ê³„ì„¸ìš”. ë°˜ì‘Â·ìŠ¤íŠ¸ë ˆìŠ¤Â·ì—ë„ˆì§€ê°€ ê·¹ë‹¨ì´ ì•„ë‹ˆë¼ ìƒí™©ì— ë§ê²Œ ì¡°ì ˆí•˜ê¸° ì‰¬ìš´ í¸ì´ì—ìš”. í”¼ê³¤Â·ìˆ˜ë©´ ë¶€ì¡±Â·ì—°ì† ì‹¤íŒ¨ê°€ ê²¹ì¹˜ë©´ í‰ì†Œë³´ë‹¤ ë°˜ì‘ì´ ì˜ˆë¦¬í•´ì§€ê±°ë‚˜ ë¬´ê¸°ë ¥í•´ì§ˆ ìˆ˜ ìˆì–´ìš”. ê·¸ë•ŒëŠ” íœ´ì‹Â·ë„ì›€ ìš”ì²­ì„ ë¨¼ì € ì±™ê¸°ì„¸ìš”. ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” ì—„ë§ˆì˜ ê°•ì ì„ ê³„ì† í™œìš©í•˜ì„¸ìš”.`;
        }
        const concernLower = concern.toLowerCase();
        const hasSleep = concernLower.includes('ì ') || concernLower.includes('ìˆ˜ë©´') || concernLower.includes('ì');
        const hasEating = concernLower.includes('ë°¥') || concernLower.includes('ì‹ì‚¬') || concernLower.includes('ë¨¹');
        const hasTantrum = concernLower.includes('ë–¼') || concernLower.includes('ìš¸') || concernLower.includes('ì§œì¦');
        const hasAggression = concernLower.includes('ë•Œë¦¬') || concernLower.includes('ë¬¼') || concernLower.includes('ê³µê²©');
        if (hasSleep) {
          concernAnalysis = `**"${concern}"ì— ëŒ€í•œ ê¸°ì§ˆ ê¸°ë°˜ ì‹¬ì¸µ ë¶„ì„:**\n\n`;
          if (childScores[1] < 5) {
            concernAnalysis += `${name}ì´(${age})ëŠ” **ìƒì²´ ë¦¬ë“¬ì´ ë¶ˆê·œì¹™í•œ ê¸°ì§ˆ**ì„ íƒ€ê³ ë‚¬ì–´ìš”. Thomas & Chess(1977)ì˜ ì—°êµ¬ì— ë”°ë¥´ë©´, ì´ëŸ° ì•„ì´ë“¤ì€ ë§¤ì¼ ë‹¤ë¥¸ ì‹œê°„ì— ì¡¸ë ¤í•˜ê³  ë°°ê³ íŒŒí•˜ëŠ” ê²½í–¥ì´ ìˆì–´ìš”. ì´ëŠ” ë‡Œì˜ ì‹œìƒí•˜ë¶€ì—ì„œ ì¡°ì ˆë˜ëŠ” ìƒë¦¬ì  íŠ¹ì„±ìœ¼ë¡œ, **ì—„ë§ˆì˜ ì–‘ìœ¡ ë°©ì‹ ë•Œë¬¸ì´ ì•„ë‹™ë‹ˆë‹¤**.\n\n`;
            if (highIntensity) concernAnalysis += `ì¶”ê°€ë¡œ ${name}ì´ëŠ” ë°˜ì‘ ê°•ë„ë„ ë†’ì•„ì„œ, ì¡¸ë¦¬ê±°ë‚˜ í”¼ê³¤í•  ë•Œ **í­ë°œì ìœ¼ë¡œ ìš¸ê³  ë–¼ë¥¼ ì“°ëŠ” ê²½í–¥**ì´ ìˆì–´ìš”. Weissbluth(2003)ì˜ 'Healthy Sleep Habits, Happy Child'ì—ì„œ ì§€ì í•˜ë“¯, ì´ëŸ° ê¸°ì§ˆì˜ ì•„ì´ëŠ” ìˆ˜ë©´ ì‹ í˜¸ê°€ ê¸‰ê²©í•˜ê²Œ ë‚˜íƒ€ë‚˜ë¯€ë¡œ ì¡°ê¸° ê°œì…ì´ ì¤‘ìš”í•´ìš”.\n\n`;
            concernAnalysis += `**ê³¼í•™ì  ê·¼ê±°:** Sameroff & Chandler(1975)ì˜ 'ìƒí˜¸ì‘ìš© ëª¨ë¸'ì— ë”°ë¥´ë©´, ë¶ˆê·œì¹™í•œ ê¸°ì§ˆì˜ ì•„ì´ì¼ìˆ˜ë¡ **ì¼ê´€ëœ ì™¸ë¶€ ë£¨í‹´**ì´ ë‚´ì¬í™”ë˜ëŠ” ë° 6-8ì£¼ê°€ ë” ê±¸ë ¤ìš”. ì§€ê¸ˆ íš¨ê³¼ê°€ ì—†ë‹¤ê³  í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”.`;
          } else {
            concernAnalysis += `${name}ì´(${age})ëŠ” **ê·œì¹™ì„±ì´ ë†’ì€ ê¸°ì§ˆ**ì´ì—ìš”. Mindell & Owens(2015)ì˜ ì—°êµ¬ì—ì„œ ê·œì¹™ì ì¸ ê¸°ì§ˆì˜ ì•„ì´ë“¤ì€ ìˆ˜ë©´ ë£¨í‹´ ë„ì… í›„ **í‰ê·  2-3ì£¼ ë‚´**ì— í° ê°œì„ ì„ ë³´ì¸ë‹¤ê³  í•´ìš”.\n\n`;
            if (childScores[3] < 5) concernAnalysis += `ë‹¤ë§Œ ${name}ì´ëŠ” **ì ì‘ì„±ì´ ë‚®ì€ í¸**ì´ë¼, ìƒˆë¡œìš´ ìˆ˜ë©´ ë£¨í‹´ì„ ë°›ì•„ë“¤ì´ëŠ” ì´ˆê¸° ë‹¨ê³„ì—ì„œ ì €í•­ì´ ìˆì„ ìˆ˜ ìˆì–´ìš”. Ferber(2006)ëŠ” ì´ëŸ° ê²½ìš° **ì ì§„ì  ì ‘ê·¼ë²•**ì„ ê¶Œì¥í•´ìš”.\n\n`;
            concernAnalysis += `**ì‹¤ì²œ íŒ:** ${name}ì´ì˜ ê·œì¹™ì„±ì„ í™œìš©í•´ '30ë¶„ ì „ ë£¨í‹´'ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”: ëª©ìš• â†’ ì±… ì½ê¸° â†’ ë¶ˆ ë„ê¸°. ì´ ìˆœì„œë¥¼ **ë§¤ì¼ ë˜‘ê°™ì€ ì‹œê°„**ì— ë°˜ë³µí•˜ë©´ ${name}ì´ì˜ ë‡Œê°€ ìë™ìœ¼ë¡œ ìˆ˜ë©´ ëª¨ë“œë¡œ ì „í™˜ë¼ìš”.`;
          }
        } else if (hasEating) {
          concernAnalysis = `**"${concern}"ì— ëŒ€í•œ ê¸°ì§ˆ ê¸°ë°˜ ì‹¬ì¸µ ë¶„ì„:**\n\n`;
          if (highSensitivity) {
            concernAnalysis += `${name}ì´(${age})ëŠ” **ê°ê° ì²˜ë¦¬ê°€ ë§¤ìš° ë¯¼ê°í•œ ê¸°ì§ˆ**ì´ì—ìš”. Dunn(1997)ì˜ ê°ê° ì²˜ë¦¬ ëª¨ë¸ì— ë”°ë¥´ë©´, ì´ëŸ° ì•„ì´ë“¤ì€ ìŒì‹ì˜ ì§ˆê°, ì˜¨ë„, ëƒ„ìƒˆë¥¼ **ì •ìƒë³´ë‹¤ 10ë°° ì´ìƒ ê°•í•˜ê²Œ ëŠê»´ìš”**.\n\n**ê³¼í•™ì  ì ‘ê·¼:** í•œ ë²ˆì— í•œ ê°€ì§€ ì‹ê°ë§Œ ì†Œê°œí•˜ê³ , ${name}ì´(ê°€) ì§ì ‘ ë§Œì ¸ë³´ê³  íƒìƒ‰í•  ì‹œê°„ì„ ì£¼ì„¸ìš”. Satter(2000)ì˜ 'ë¶„ì—… ì´ë¡ 'ì— ë”°ë¥´ë©´, ì—„ë§ˆëŠ” 'ë¬´ì—‡ì„, ì–¸ì œ' ì œê³µí• ì§€ ê²°ì •í•˜ê³ , ì•„ì´ëŠ” 'ë¨¹ì„ì§€, ì–¼ë§ˆë‚˜' ë¨¹ì„ì§€ ê²°ì •í•´ì•¼ í•´ìš”.`;
          } else if (lowAdaptability) {
            concernAnalysis += `${name}ì´(${age})ëŠ” **ìƒˆë¡œìš´ ê²ƒì— ëŒ€í•œ ì ì‘ì´ ëŠë¦° ê¸°ì§ˆ**ì´ì—ìš”. Kagan(1994)ì˜ ì—°êµ¬ì—ì„œ ì´ëŸ° ì•„ì´ë“¤ì€ **í‰ê·  15-20íšŒì˜ ë…¸ì¶œ**ì´ í•„ìš”í•´ì•¼ ìƒˆ ìŒì‹ì„ ë°›ì•„ë“¤ì¸ë‹¤ê³  í•´ìš”.\n\nBirch & Fisher(1998)ì˜ ì—°êµ¬ì— ë”°ë¥´ë©´, ì•„ì´ë“¤ì€ ê°™ì€ ìŒì‹ì„ 8-15ë²ˆ ë´ì•¼ 'ìµìˆ™í•¨'ì„ ëŠë¼ê¸° ì‹œì‘í•´ìš”. ${name}ì´ì˜ ê¸°ì§ˆìƒ **ì²œì²œíˆ, ë°˜ë³µì ìœ¼ë¡œ** ë…¸ì¶œì‹œí‚¤ëŠ” ê²Œ í•µì‹¬ì´ì—ìš”.`;
          } else {
            concernAnalysis += `${name}ì´(${age})ì˜ ê¸°ì§ˆì€ ê·¹ë‹¨ì ì´ì§€ ì•Šì•„ìš”. ${age} ì‹œê¸°ëŠ” ë°œë‹¬ìƒ **ìŒì‹ ì‹ í¬ë¹„ì•„(food neophobia)ê°€ ìµœê³ ì¡°**ì¸ ë•Œì˜ˆìš”. Dovey et al.(2008)ì— ë”°ë¥´ë©´ ìƒí›„ 18-24ê°œì›”ì— 90% ì•„ë™ì´ ì‹ì‚¬ ê±°ë¶€ë¥¼ ê²½í—˜í•´ìš”.\n\n**ì•ˆì‹¬í•˜ì„¸ìš”:** ì—°êµ¬ì— ë”°ë¥´ë©´ ì´ ë‹¨ê³„ëŠ” ë³´í†µ 6-12ê°œì›” ë‚´ì— ìì—°ìŠ¤ëŸ½ê²Œ ì§€ë‚˜ê°€ìš”.`;
          }
        } else if (hasTantrum) {
          concernAnalysis = `**"${concern}"ì— ëŒ€í•œ ê¸°ì§ˆ ê¸°ë°˜ ì‹¬ì¸µ ë¶„ì„:**\n\n`;
          if (highIntensity) {
            concernAnalysis += `${name}ì´(${age})ëŠ” **ê°ì • í‘œí˜„ ê°•ë„ê°€ ë†’ì€ ê¸°ì§ˆ**ì´ì—ìš”. Rothbart & Bates(2006)ì˜ ì—°êµ¬ì— ë”°ë¥´ë©´, ì´ëŠ” í¸ë„ì²´(amygdala)ì˜ ë°˜ì‘ì„±ê³¼ ê´€ë ¨ì´ ìˆì–´ìš”.\n\n**ì‹ ê²½ê³¼í•™ì  ì´í•´:** ${name}ì´ì˜ ì „ë‘ì—½(ê°ì • ì¡°ì ˆ ë‹´ë‹¹)ì€ ì•„ì§ ë°œë‹¬ ì¤‘ì´ì—ìš”. ì§€ê¸ˆì€ ${name}ì´(ê°€) **ìƒë¬¼í•™ì ìœ¼ë¡œ ê°ì • ì¡°ì ˆì´ ë¶ˆê°€ëŠ¥í•œ ë‹¨ê³„**ì˜ˆìš”.`;
          } else if (lowAdaptability) {
            concernAnalysis += `${name}ì´(${age})ëŠ” **ë³€í™”ì— ëŒ€í•œ ì ì‘ì´ ëŠë¦° ê¸°ì§ˆ**ì´ì—ìš”. Henderson & Wachs(2007)ì˜ ì—°êµ¬ì—ì„œ ì´ëŸ° ì•„ì´ë“¤ì€ ì˜ˆìƒ ë°–ì˜ ìƒí™©ì—ì„œ **ì½”ë¥´í‹°ì†”(ìŠ¤íŠ¸ë ˆìŠ¤ í˜¸ë¥´ëª¬) ìˆ˜ì¹˜ê°€ 2ë°° ë†’ê²Œ** ë‚˜íƒ€ë‚¬ì–´ìš”.\n\n**í•´ê²°ì˜ ì—´ì‡ :** ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì´ì—ìš”. Carlson(2003)ì˜ ì—°êµ¬ì—ì„œ ì ì‘ ëŠë¦° ì•„ì´ë“¤ì—ê²Œ **5-10ë¶„ ì „ ì˜ˆê³ **ë¥¼ í•˜ë©´ ë–¼ì“°ëŠ” ë¹ˆë„ê°€ 60% ê°ì†Œí–ˆì–´ìš”.`;
          } else {
            concernAnalysis += `${name}ì´(${age})ì˜ ê¸°ì§ˆì€ ê·¹ë‹¨ì ì´ì§€ ì•Šì•„ìš”. ${age} ì‹œê¸°ëŠ” Erikson(1963)ì´ ë§í•œ **'ììœ¨ì„± ëŒ€ ìˆ˜ì¹˜ì‹¬' ë‹¨ê³„**ì˜ˆìš”. Kopp(1982)ì˜ ì—°êµ¬ì— ë”°ë¥´ë©´, ${age} ì•„ì´ë“¤ì€ ìê¸° ì¡°ì ˆ ëŠ¥ë ¥ì´ ì•„ì§ 10-20% ìˆ˜ì¤€ì´ì—ìš”. ë–¼ì“°ëŠ” ê±´ ${name}ì´(ê°€) "ë„ì™€ì¤˜, ëª» ì°¸ê² ì–´!"ë¼ê³  ë§í•˜ëŠ” ë°©ì‹ì´ì—ìš”.`;
          }
        } else if (hasAggression) {
          concernAnalysis = `**"${concern}"ì— ëŒ€í•œ ê¸°ì§ˆ ê¸°ë°˜ ì‹¬ì¸µ ë¶„ì„:**\n\n`;
          if (highActivity) {
            concernAnalysis += `${name}ì´(${age})ëŠ” **í™œë™ì„±ì´ ë§¤ìš° ë†’ì€ ê¸°ì§ˆ**ì´ì—ìš”. Buss & Plomin(1984)ì˜ ì—°êµ¬ì—ì„œ ì´ëŸ° ì•„ì´ë“¤ì€ **ìš´ë™ ì—ë„ˆì§€ê°€ í‰ê· ì˜ 2ë°°**ë¼ê³  ë°í˜€ì¡Œì–´ìš”. ë•Œë¦¬ëŠ” í–‰ë™ì€ 'ê³µê²©'ì´ ì•„ë‹ˆë¼ **ì—ë„ˆì§€ ë°©ì¶œì˜ ë¯¸ìˆ™í•œ í˜•íƒœ**ì˜ˆìš”.\n\n**ê³¼í•™ì  í•´ê²°:** ${name}ì´ì—ê²Œ í•˜ë£¨ ìµœì†Œ 2ì‹œê°„ì˜ ê²©ë ¬í•œ ì‹ ì²´ í™œë™ì´ í•„ìš”í•´ìš”. Panksepp(1998)ì€ ì´ë¥¼ 'ê±°ì¹œ ë†€ì´(rough play)' ìš•êµ¬ë¼ê³  ëª…ëª…í–ˆì–´ìš”.`;
          } else if (highIntensity) {
            concernAnalysis += `${name}ì´(${age})ëŠ” **ê°ì • ê°•ë„ê°€ ë†’ì€ ê¸°ì§ˆ**ì´ì—ìš”. ${name}ì´(ê°€) ë•Œë¦¬ëŠ” ê±´ "ë§ë¡œ í‘œí˜„ ëª»í•˜ê² ì–´, ë„ˆë¬´ í™”ë‚˜!"ë¼ëŠ” **ë¯¸ì„±ìˆ™í•œ ì˜ì‚¬ì†Œí†µ**ì´ì—ìš”.\n\n**ì¢‹ì€ ì†Œì‹:** Hay(2017)ì˜ ì¢…ë‹¨ ì—°êµ¬ì—ì„œ ë§Œ 2ì„¸ì— ë•Œë¦¬ë˜ ì•„ì´ì˜ 95%ê°€ ë§Œ 4ì„¸ì—ëŠ” ì–¸ì–´ë¡œ ê°ì •ì„ í‘œí˜„í•˜ê²Œ ëì–´ìš”.`;
          } else {
            concernAnalysis += `${name}ì´(${age})ì˜ ê¸°ì§ˆì€ ê·¹ë‹¨ì ì´ì§€ ì•Šì•„ìš”. Alink et al.(2006)ì˜ ì—°êµ¬ì— ë”°ë¥´ë©´ ${age} ì•„ì´ì˜ 70%ê°€ ì£¼ 1íšŒ ì´ìƒ ë‹¤ë¥¸ ì•„ì´ë¥¼ ë•Œë¦¬ê±°ë‚˜ ë¯¼ë‹¤ê³  ë³´ê³ í–ˆì–´ìš”. ì´ëŠ” **ì •ìƒ ë°œë‹¬ì˜ ì¼ë¶€**ì˜ˆìš”. **ë°œë‹¬ì  í•´ê²°:** "ë•Œë¦¬ë©´ ì•„íŒŒ. ì†ì€ ì´ë ‡ê²Œ" (ë¶€ë“œëŸ½ê²Œ ë§Œì§€ëŠ” ì‹œë²”). Gershoff(2002)ì˜ ë©”íƒ€ ë¶„ì„ì—ì„œ ì¼ê´€ëœ ë°˜ë³µ êµìœ¡ì´ ê°€ì¥ íš¨ê³¼ì ì´ë¼ê³  ë°í˜€ì¡Œì–´ìš”.`;
          }
        } else {
          concernAnalysis = `**"${concern}"ì— ëŒ€í•œ ë¶„ì„:**\n\n${name}ì´(${age})ì˜ ì´ í–‰ë™ì„ ê¸°ì§ˆì  ê´€ì ì—ì„œ ì´í•´í•´ë³¼ê²Œìš”. êµ¬ì²´ì ì¸ ê³ ë¯¼ì„ ì…ë ¥í•˜ì‹œë©´ ë” ë§ì¶¤ ë¶„ì„ì„ ë“œë¦´ ìˆ˜ ìˆì–´ìš”.`;
        }
        // ì„¤ëª… ë¶„ê¸°: í‘œì‹œëœ ê¸°ì§ˆ ìœ í˜•(temperamentType.type)ê³¼ ë™ì¼í•œ ê¸°ì¤€ìœ¼ë¡œ ë¶„ê¸°í•´, ê²°ê³¼ì™€ ì„¤ëª…ì´ í•­ìƒ ì¼ì¹˜í•˜ë„ë¡ í•¨
        const parentHighControl = parentScores[2] > 7;
        const parentLowStress = parentScores[0] < 5;

        if (temperamentType.type === 'ì„¬ì„¸íŒŒ') {
          interpretation = `${name}ì´ëŠ” **'${temperamentType.type}' ${temperamentType.emoji}** ê¸°ì§ˆì´ì—ìš”. ì „ì²´ ì•„ë™ì˜ ì•½ 15-20%ê°€ ì´ì— í•´ë‹¹í•˜ëŠ” ìœ í˜•ìœ¼ë¡œ, ${age} ì‹œê¸°ì—ëŠ” íŠ¹íˆ ì†Œë¦¬, ë¹›, ì´‰ê° ê°™ì€ ìê·¹ì„ **í›¨ì”¬ ë” ê°•í•˜ê²Œ ëŠë¼ëŠ” ì˜ˆë¯¼í•œ ì‹ ê²½ê³„**ë¥¼ ê°€ì§€ê³  ìˆì–´ìš”.\n\nì´ ê¸°ì§ˆì˜ ì•„ì´ë“¤ì€ ë¯¸ì„¸í•œ ë³€í™”Â·ê°ì •Â·ì˜ˆìˆ ì  ìê·¹ì— ë›°ì–´ë‚˜ê³ , ê¹Šì€ ì‚¬ê³ ì™€ ê³µê° ëŠ¥ë ¥ì´ ë°œë‹¬í•˜ê¸° ì‰¬ì›Œìš”. ì‹œë„ëŸ¬ìš´ ì¥ì†Œ, ë°ì€ ì¡°ëª…, ê±°ì¹œ ì˜·ê°Â·íƒœê·¸, ìƒˆë¡œìš´ ìŒì‹ ì§ˆê°ì²˜ëŸ¼ ê°ê° ìê·¹ì´ ë§ê±°ë‚˜ ê°•í•  ë•ŒëŠ” ë¶ˆì•ˆÂ·ê±°ë¶€Â·ìš¸ìŒì´ ëŠ˜ì–´ë‚  ìˆ˜ ìˆì–´ìš”. ì´ëŠ” ìƒë¦¬ì  ë°˜ì‘ì´ì—ìš”.`;
          reassurance = `ì‡¼í•‘ëª°ì—ì„œ ìš¸ê±°ë‚˜ ì˜· ì…ëŠ” ê±¸ ê±°ë¶€í•˜ëŠ” ${name}ì´ëŠ” ì§€ê¸ˆ **'ê°ê° ê³¼ë¶€í•˜(Sensory Overload)'** ìƒíƒœì˜ˆìš”. ì´ê±´ ë²„ë¦‡ì´ë‚˜ ê³ ì§‘ì´ ì•„ë‹ˆë¼, ë‡Œê°€ "ìê·¹ì´ ë„ˆë¬´ ë§ì•„!"ë¼ê³  ì•Œë ¤ì£¼ëŠ” ìƒë¦¬ì  ë°˜ì‘ì´ì—ìš”.`;
          script = `**${name}ì´(ì„¬ì„¸íŒŒ) ê°ê° ì¡°ì ˆ ëŒ€í™”ë²•:**\n\n**1ë‹¨ê³„: ê³¼ë¶€í•˜ ì§•í›„ ì¸ì§€** - ê·€ ë§‰ê¸°, ëˆˆ ê°ê¸°, ì§œì¦ ì¦ê°€ â†’ Dunn(1997): ì˜ˆë¯¼í•œ ì•„ì´ì˜ **ë‡Œê°€ ë³´ë‚´ëŠ” SOS**\n\n**2ë‹¨ê³„: ì¦‰ê° í™˜ê²½ ì¡°ì •**\n"${name}ì•„, ì—¬ê¸° ë„ˆë¬´ (ì‹œë„ëŸ½ë‹¤/ë°ë‹¤). ì¡°ìš©í•œ ê³³ìœ¼ë¡œ ê°€ì."\n\n**3ë‹¨ê³„: ê°ê° ì¤„ì´ê¸°** - ì†ŒìŒ: í™”ì¥ì‹¤, ë³µë„ / ì¡°ëª…: ì»¤íŠ¼ ë‹«ê¸°, ì„ ê¸€ë¼ìŠ¤\n\n**4ë‹¨ê³„: ê·¸ë¼ìš´ë”©** "ì† ê½‰ ì¡ì•„. ì²œì²œíˆ ìˆ¨ ì‰¬ì. í•˜ë‚˜, ë‘˜, ì…‹..." â†’ Porges(2011) ë¯¸ì£¼ì‹ ê²½ ì´ë¡ \n\n**ì¶œì²˜:** Dunn, W. (1997). Sensory Profile. Ayres, A.J. (1979). Sensory Integration and the Child.`;
          practicalTips = [{ title: 'ì™¸ì¶œ ì „ ê°ê° ì¤€ë¹„', content: `ì™¸ì¶œ ì „ì— "ì‹œë„ëŸ¬ìš´ ê³³ì— ê°€ëŠ”ë°, ê·€ë§ˆê°œ ê°€ì ¸ê°ˆê¹Œ?"ì²˜ëŸ¼ ì˜ˆê³ í•˜ê³  ëŒ€ë¹„ì±…ì„ í•¨ê»˜ ì¤€ë¹„í•˜ì„¸ìš”.`, source: 'Aron, E. (1996)' }, { title: 'ì˜·ê° ì„ íƒê¶Œ ì£¼ê¸°', content: `ì˜· ì‚´ ë•Œ ${name}ì´ê°€ ì§ì ‘ ë§Œì ¸ë³´ê²Œ í•˜ì„¸ìš”. íƒœê·¸ëŠ” ë¯¸ë¦¬ ë‹¤ ì œê±°í•˜ê³ , ë¶€ë“œëŸ¬ìš´ ë©´ ì†Œì¬ë¥¼ ì„ íƒí•˜ì„¸ìš”.`, source: 'Kranowitz, C. (2005)' }, { title: 'ë‹¤ìš´íƒ€ì„ í™•ë³´', content: `${age} ì˜ˆë¯¼í•œ ì•„ì´ëŠ” í•˜ë£¨ì— ìµœì†Œ 1-2ì‹œê°„ì˜ ì¡°ìš©í•œ ì‹œê°„ì´ í•„ìš”í•´ìš”. ì¼ì •ì— ì˜ë„ì ìœ¼ë¡œ "ì‰¬ëŠ” ì‹œê°„"ì„ ë„£ìœ¼ì„¸ìš”.`, source: 'Aron, E. (2002)' }];
          realExamples = [{ situation: 'ì˜· ì…íˆë ¤ê³  í•˜ë©´ ìš¸ê³  ì €í•­', solution: `${name}ì´ê°€ ì§ì ‘ ì˜·ì„ ê³ ë¥´ê²Œ í•¨. 2-3ë²Œ ì¤‘ "ì–´ë–¤ ê²Œ ê¸°ë¶„ ì¢‹ì•„?" ë¬¼ì–´ë³´ê¸°.`, mom: '24ê°œì›” ì—¬ì•„ ì—„ë§ˆ', result: 'ì„ íƒê¶Œì„ ì£¼ë‹ˆê¹Œ ì €í•­ì´ 80% ì¤„ì—ˆì–´ìš”.' }, { situation: 'ì‹ë‹¹ì—ì„œ ì‹ì‚¬ ì¤‘ ê°‘ìê¸° ìš¸ê³  ë‚˜ê°€ìê³  í•¨', solution: `ì‹ë‹¹ ì„ íƒ ì‹œ êµ¬ì„ ìë¦¬ ì˜ˆì•½. ë…¸ì´ì¦ˆ ìº”ìŠ¬ë§ ê·€ë§ˆê°œ ì¤€ë¹„. 20ë¶„ ì´ìƒ ìˆì„ ë•ŒëŠ” ì¤‘ê°„ì— ë°–ì— ë‚˜ê°€ì„œ ì‰¬ëŠ” ì‹œê°„ ì£¼ê¸°.`, mom: '30ê°œì›” ë‚¨ì•„ ì—„ë§ˆ', result: 'ê·€ë§ˆê°œ í•˜ë‚˜ë¡œ ì™¸ì‹ì´ ê°€ëŠ¥í•´ì¡Œì–´ìš”.' }];
        } else if (temperamentType.type === 'ì—ë„ˆìì´ì €') {
          interpretation = `${name}ì´ëŠ” **'${temperamentType.type}' ${temperamentType.emoji}** ê¸°ì§ˆì´ì—ìš”. **ì ì‘ì„±ì´ ë‚®ê³  ë°˜ì‘ ê°•ë„ê°€ ë†’ì€** íŠ¹ì„±ì„ ë³´ì—¬, í™˜ê²½ ë³€í™”ì— ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•˜ë©° ìì‹ ì˜ ê°ì •ì„ ì†”ì§í•˜ê²Œ í‘œí˜„í•˜ëŠ” ìœ í˜•ì´ì—ìš”. ${age} ì•„ì´ì—ê²Œ ì´ëŸ° ê¸°ì§ˆì€ ë‚˜ìœ ê²Œ ì•„ë‹ˆë¼ ê°œì„±ì— ê°€ê¹Œì›Œìš”.\n\nì´ ê¸°ì§ˆì˜ ì•„ì´ë“¤ì€ ì—ë„ˆì§€Â·ì—´ì •Â·ì£¼ë„ì„±ì´ ë›°ì–´ë‚˜ê³ , í•œë²ˆ ë§ˆìŒì´ ë§ìœ¼ë©´ ê¹Šì€ ìœ ëŒ€ë¥¼ ë³´ì—¬ìš”. ê³„íš ë³€ê²½, ë‚¯ì„  ì¥ì†ŒÂ·ì‚¬ëŒ, ì˜ˆê³  ì—†ì´ ëë‚˜ëŠ” ë†€ì´, "ì•ˆ ë¼"ë§Œ ë°˜ë³µë  ë•Œ ê°ì •ì´ í­ë°œí•˜ê±°ë‚˜ ë–¼ì“°ê¸°ê°€ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”. ë°˜ì‘ ê°•ë„ê°€ ë†’ì€ ì•„ì´ëŠ” ìŠ¤íŠ¸ë ˆìŠ¤ í˜¸ë¥´ëª¬(ì½”ë¥´í‹°ì†”) ë°˜ì‘ì´ í° í¸ì´ì—ìš”.`;
          reassurance = `ìƒˆë¡œìš´ ì¥ì†Œë‚˜ ë‚¯ì„  ì‚¬ëŒì„ ë§Œë‚  ë•Œ ${name}ì´ê°€ í­ë°œì ìœ¼ë¡œ ë–¼ë¥¼ ì“°ëŠ” ê±´ "${name}ì´ê°€ ì§€ê¸ˆ ë¶ˆì•ˆí•´!"ë¼ê³  ì™¸ì¹˜ëŠ” **ë„ì›€ ìš”ì²­ ì‹ í˜¸**ì˜ˆìš”. Mary Sheedy Kurcinkaì˜ ì—°êµ¬(Raising Your Spirited Child, 2006)ì— ë”°ë¥´ë©´, ì´ëŸ° ì•„ì´ë“¤ì€ ë³€í™”ì— ëŒ€í•œ ì˜ˆê³ ì™€ ê°ì • ì¸ì •ì´ íŠ¹íˆ ì¤‘ìš”í•´ìš”.`;
          let dialogueTitle = ''; let dialogueContent = '';
          if (parentHighControl) {
            dialogueTitle = `**${name}ì´(ì—ë„ˆìì´ì €) + ê³„íší˜• ì—„ë§ˆ ë§ì¶¤ ëŒ€í™”ë²•:**`;
            dialogueContent = `\n\nì—„ë§ˆì˜ ê³„íšì„±ê³¼ ${name}ì´ì˜ ì¦‰í¥ì„±ì´ ì¶©ëŒí•  ë•Œ ì‚¬ìš©í•˜ì„¸ìš”.\n\n**ìƒí™©: ê°‘ìê¸° ê³„íš ë³€ê²½ ì‹œ**\n\nâŒ **í”¼í•´ì•¼ í•  ë§** (í†µì œí˜• ì‹¤ìˆ˜):\n"ì•„ë‹ˆì•¼, ê³„íšëŒ€ë¡œ í•´ì•¼ì§€!"\nâ†’ ${name}ì´ì˜ ë‡ŒëŠ” ì´ë¯¸ 'ê±°ë¶€ ëª¨ë“œ' ì§„ì…\n\nâœ… **ê·¼ê±° ê¸°ë°˜ ëŒ€í™”** (Kurcinka, 2006):\n"${name}ì•„, ì—„ë§ˆëŠ” â—‹â—‹ ê³„íší–ˆëŠ”ë°, ${name}ì´ëŠ” ë‹¤ë¥´ê²Œ í•˜ê³  ì‹¶êµ¬ë‚˜. ë‘˜ ë‹¤ í•´ë³¼ê¹Œ? ë¨¼ì € ì—„ë§ˆ ê²ƒ 5ë¶„, ê·¸ë‹¤ìŒ ${name}ì´ ê²ƒ 5ë¶„."\n\n**ì™œ íš¨ê³¼ì ì¸ê°€:** \n- Baumrind(1991)ì˜ ì—°êµ¬: ê¶Œìœ„ìˆëŠ”(authoritative) ì–‘ìœ¡ì´ ê¶Œìœ„ì£¼ì˜ì (authoritarian)ë³´ë‹¤ íš¨ê³¼ì \n- ì—„ë§ˆì˜ ê³„íšê³¼ ì•„ì´ì˜ ìš•êµ¬ë¥¼ **ëª¨ë‘ ì¸ì •**í•˜ëŠ” íƒ€í˜‘ì•ˆ\n- ${name}ì´ì˜ ë‡Œì—ì„œ ë„íŒŒë¯¼(ë³´ìƒ í˜¸ë¥´ëª¬) ë¶„ë¹„ â†’ í˜‘ë ¥ ì¦ê°€\n\n**ì¶œì²˜:** Kurcinka, M.S. (2006). Raising Your Spirited Child (Revised). HarperCollins.`;
          } else if (parentLowStress) {
            dialogueTitle = `**${name}ì´(ì—ë„ˆìì´ì €) + ì§€ì¹œ ì—„ë§ˆë¥¼ ìœ„í•œ ìµœì†Œ ì—ë„ˆì§€ ëŒ€í™”ë²•:**`;
            dialogueContent = `\n\nì—„ë§ˆì˜ ì—ë„ˆì§€ê°€ ë°”ë‹¥ë‚¬ì„ ë•Œë„ ì“¸ ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ ë°©ë²•ì´ì—ìš”.\n\n**ìƒí™©: ì—„ë§ˆê°€ ë„ˆë¬´ ì§€ì³ì„œ ê°ì • ì¡°ì ˆì´ ì•ˆ ë  ë•Œ**\n\nâŒ **í•˜ì§€ ë§ì•„ì•¼ í•  ê²ƒ:**\nê¸´ ì„¤ëª…, í˜‘ìƒ, ë‹¬ë˜ê¸° â†’ ì—„ë§ˆ ì—ë„ˆì§€ ê³ ê°ˆ ì•…í™”\n\nâœ… **3ë‹¨ì–´ ê·œì¹™** (Siegel & Bryson, 2011):\n"${name}ì•„. ë©ˆì¶°. ìœ„í—˜í•´."\n"${name}ì•„. ì•ˆë¼. ë."\n"${name}ì•„. í™”ë‚¬ì–´. ì‰´ê²Œ."\n\n**ì™œ íš¨ê³¼ì ì¸ê°€:**\n- Siegel & Bryson(2011) The Whole-Brain Child: ì§§ê³  ëª…í™•í•œ ì–¸ì–´ê°€ ê°ì • ë‡Œ(í¸ë„ì²´) ì§„ì •\n- ${age} ì•„ì´ëŠ” ê¸´ ë¬¸ì¥ ì²˜ë¦¬ ë¶ˆê°€ (ì‘ì—… ê¸°ì–µ í•œê³„)\n- ì—„ë§ˆì˜ **ë²ˆì•„ì›ƒ ì˜ˆë°©**ì´ ìµœìš°ì„ \n\n**ì—„ë§ˆ íšŒë³µ í›„:**\n"ì•„ê¹Œ ì—„ë§ˆê°€ í™”ë‚¬ì§€? ${name}ì•„ê°€ â—‹â—‹í•´ì„œ ì—„ë§ˆ í˜ë“¤ì—ˆì–´. ë‹¤ìŒì—” ì´ë ‡ê²Œ í•´ì¤„ë˜?"\n\n**ì¶œì²˜:** Siegel, D.J. & Bryson, T.P. (2011). The Whole-Brain Child. Bantam.`;
          } else {
            dialogueTitle = `**${name}ì´(ì—ë„ˆìì´ì €) ë§ì¶¤ 4ë‹¨ê³„ ëŒ€í™”ë²•:**`;
            dialogueContent = `\n\n**ê·¼ê±°:** Gottman(1997)ì˜ ê°ì • ì½”ì¹­ 5ë‹¨ê³„ë¥¼ ${age} ìˆ˜ì¤€ìœ¼ë¡œ ì¡°ì •\n\n**1ë‹¨ê³„: ê°ì • í¬ì°© (Emotion Coaching)**\n"${name}ì•„, ì§€ê¸ˆ í™”ë‚¬êµ¬ë‚˜."\nâ†’ ì—°êµ¬: ê°ì • ëª…ëª…ë§Œìœ¼ë¡œ í¸ë„ì²´ í™œì„± 40% ê°ì†Œ (Lieberman et al., 2007)\n\n**2ë‹¨ê³„: ê³µê° (Validation)**\n"ê·¸ëŸ´ ìˆ˜ ìˆì–´. â—‹â—‹ ì•ˆ ë˜ë‹ˆê¹Œ ì†ìƒí•˜ì§€."\nâ†’ ì—°êµ¬: ê³µê° ë°›ì€ ì•„ì´ì˜ ì½”ë¥´í‹°ì†”(ìŠ¤íŠ¸ë ˆìŠ¤) 50% ê°ì†Œ (Shenk & Fruzzetti, 2011)\n\n**3ë‹¨ê³„: í•œê³„ ì„¤ì • (Limit Setting)**\n"ê·¼ë° ë•Œë¦¬ëŠ” ê±´ ì•ˆ ë¼. ì•„íŒŒ."\nâ†’ ì—°êµ¬: ëª…í™•í•œ ê²½ê³„ê°€ ì•ˆì „ê° ì œê³µ (Gershoff et al., 2018)\n\n**4ë‹¨ê³„: ëŒ€ì•ˆ ì œì‹œ (Problem Solving)**\n"í™”ë‚˜ë©´ 'ì—„ë§ˆ, í™”ë‚˜!'ë¼ê³  ë§í•˜ê±°ë‚˜ ì´ ì¿ ì…˜ ë•Œë ¤."\nâ†’ ì—°êµ¬: ëŒ€ì²´ í–‰ë™ ì œì‹œê°€ ì–µì œë³´ë‹¤ 2ë°° íš¨ê³¼ì  (Kazdin, 2008)\n\n**ì¶œì²˜:** \n- Gottman, J. (1997). Raising An Emotionally Intelligent Child. Simon & Schuster.\n- Lieberman, M.D. et al. (2007). Putting feelings into words. Psychological Science, 18(5).`;
          }
          script = dialogueTitle + dialogueContent;
          practicalTips = [{ title: 'ë³€í™” ì˜ˆê³ í•˜ê¸°', content: `ìµœì†Œ 10-15ë¶„ ì „ì— ì•Œë ¤ì£¼ì„¸ìš”. "5ë¶„ í›„ì— ë‚˜ê°ˆ ê±°ì•¼"ë³´ë‹¤ "ì† ì”»ê³ , ì‹ ë°œ ì‹ ê³  ë‚˜ê°ˆ ê±°ì•¼"ì²˜ëŸ¼ ë‹¨ê³„ë¥¼ ì„¤ëª…í•˜ë©´ ë” íš¨ê³¼ì ì´ì—ìš”.`, source: 'Kurcinka, M. S. (2006)' }, { title: 'ê°ì • ì–¸ì–´ ê°€ë¥´ì¹˜ê¸°', content: `${age} ì•„ì´ëŠ” ê°ì •ì„ í‘œí˜„í•˜ëŠ” ë‹¨ì–´ê°€ ë¶€ì¡±í•´ìš”. "í™”ë‚¬ì–´?", "ë¬´ì„œì›Œ?" ê°™ì€ ì§ˆë¬¸ìœ¼ë¡œ ê°ì • ì´ë¦„ì„ ì•Œë ¤ì£¼ì„¸ìš”.`, source: 'Gottman, J. (1997) Raising An Emotionally Intelligent Child' }, { title: 'ì§„ì • ê³µê°„ ë§Œë“¤ê¸°', content: `ì§‘ì— ì¿ ì…˜, ì¸í˜•, ë¶€ë“œëŸ¬ìš´ ì¡°ëª…ì´ ìˆëŠ” ì¡°ìš©í•œ ì½”ë„ˆë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”. ê°ì •ì´ í­ë°œí•  ë•Œ í”¼ë‚œì²˜ê°€ ë¼ìš”.`, source: 'Siegel, D. & Bryson, T. (2012) The Whole-Brain Child' }];
          realExamples = [{ situation: 'ë§ˆíŠ¸ì—ì„œ ê³¼ì ì‚¬ë‹¬ë¼ê³  ë°”ë‹¥ì— ë“œëŸ¬ëˆ„ì›Œ ìš¸ê¸°', solution: `"ì§€ê¸ˆ ê³¼ì ë¨¹ê³  ì‹¶êµ¬ë‚˜. ê·¼ë° ì˜¤ëŠ˜ì€ ì•ˆ ì‚¬ëŠ” ë‚ ì´ì•¼. ëŒ€ì‹  ì§‘ì— ê°€ì„œ ì—„ë§ˆë‘ ì¿ í‚¤ ë§Œë“¤ì–´ ë¨¹ì„ê¹Œ?" (ëŒ€ì•ˆ ì œì‹œ)`, mom: '33ê°œì›” ë‚¨ì•„ ì—„ë§ˆ', result: 'ì²˜ìŒì—” ê³„ì† ìš¸ì—ˆì§€ë§Œ, 3-4ë²ˆ ë°˜ë³µí•˜ë‹ˆ "ì¿ í‚¤ ë§Œë“¤ì–´?" í•˜ë©´ì„œ ì§„ì •ëì–´ìš”.' }, { situation: 'ëª©ìš• ê±°ë¶€ë¡œ ë§¤ì¼ ì „ìŸ', solution: `ëª©ìš• 30ë¶„ ì „ë¶€í„° "ê³§ ëª©ìš• ì‹œê°„ì´ì•¼", "10ë¶„ ë‚¨ì•˜ì–´" ì•Œë¦¼. ëª©ìš• ìˆœì„œí‘œ ê·¸ë¦¼íŒ ë§Œë“¤ì–´ì„œ ë³´ì—¬ì£¼ê¸°.`, mom: '27ê°œì›” ì—¬ì•„ ì—„ë§ˆ', result: 'ì˜ˆì¸¡ ê°€ëŠ¥í•´ì§€ë‹ˆê¹Œ ì €í•­ì´ ì ˆë°˜ìœ¼ë¡œ ì¤„ì—ˆì–´ìš”. ìˆœì„œí‘œ ë„˜ê¸°ëŠ” ê±¸ ì¬ë°Œì–´í•´ìš”.' }, { situation: 'ì–´ë¦°ì´ì§‘ ë“±ì› ì‹œ ë§¤ì¼ ìš¸ìŒ', solution: `ë“±ì› ì „ "ì—„ë§ˆ ì† í”ë“¤í”ë“¤, ë½€ë½€ë½€" ì˜ì‹ ë§Œë“¤ê¸°. ì„ ìƒë‹˜ê»˜ ${name}ì´ê°€ ì¢‹ì•„í•˜ëŠ” ë†€ì‡ê° ë¯¸ë¦¬ êº¼ë‚´ë‹¬ë¼ê³  ë¶€íƒ.`, mom: '36ê°œì›” ë‚¨ì•„ ì—„ë§ˆ', result: '2ì£¼ ì •ë„ ê±¸ë ¸ì§€ë§Œ, ì´ì œ ì˜ì‹í•˜ê³  ë°”ë¡œ ë†€ì‡ê° ë‹¬ë ¤ê°€ìš”.' }];
        } else if (temperamentType.type === 'ì‹ ì¤‘íŒŒ') {
          interpretation = `${name}ì´ëŠ” **'${temperamentType.type}' ${temperamentType.emoji}** ê¸°ì§ˆì´ì—ìš”. ì „ì²´ ì•„ë™ì˜ ì•½ 15%ê°€ ì´ì— í•´ë‹¹í•´ìš”. **ì ‘ê·¼ì„±**(ë‚¯ì„  ì‚¬ëŒÂ·ì¥ì†Œì— ëŒ€í•œ ì´ˆê¸° ë°˜ì‘)ì´ ë‚®ì€ í¸ì´ë¼, ${age} ì‹œê¸°ì—ëŠ” **ìƒˆë¡œìš´ ìƒí™©ì„ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ê´€ì°°í•œ í›„ ì²œì²œíˆ ì°¸ì—¬**í•˜ëŠ” íŠ¹ì„±ì´ ë‚˜íƒ€ë‚˜ìš”. ì ì‘ì„±ì€ í•œë²ˆ ìµíˆë©´ ë¹ ë¥¸ í¸ì¼ ìˆ˜ ìˆì–´ìš”. ê¸°ë¶„ì´ ë‚®ì€ í¸(í‰ì†Œ ë¶ˆì¾Œ ì •ì„œê°€ ë§ìŒ)ì¼ ìˆ˜ë„ ìˆì–´ìš”.\n\nì´ ê¸°ì§ˆì˜ ì•„ì´ë“¤ì€ ìœ„í—˜ íšŒí”¼Â·ê´€ì°°ë ¥Â·ì¸ë‚´ê°€ ë›°ì–´ë‚˜ê³ , ìµìˆ™í•´ì§€ë©´ ê¹Šì€ ì• ì°©ì„ ë³´ì—¬ìš”. ë‚¯ì„  ì‚¬ëŒÂ·ì¥ì†Œ, ê°‘ì‘ìŠ¤ëŸ° ë³€í™”, "ë¹¨ë¦¬ í•´"Â·"ìš©ê¸° ë‚´" ê°™ì€ ì••ë°•ì— ë¶ˆì•ˆÂ·ìš¸ìŒÂ·ê±°ë¶€ê°€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆì–´ìš”. ì ì‘ì— ì‹œê°„ì´ í•„ìš”í•œ ìœ í˜•ì´ì—ìš”.`;
          reassurance = `ì–´ë¦°ì´ì§‘ ì²«ë‚  ìš¸ê±°ë‚˜ ë‚¯ì„  ì‚¬ëŒ ì•ì—ì„œ ì–¼ì–´ë¶™ëŠ” ${name}ì´ëŠ” 'ê²ìŸì´'ê°€ ì•„ë‹ˆì—ìš”. Kagan(1994)ì˜ ì—°êµ¬ì—ì„œ ì´ëŸ° ì•„ì´ë“¤ì€ **í–‰ë™ ì–µì œ ì‹œìŠ¤í…œ(BIS)**ì´ í™œì„±í™”ëœ ê²ƒìœ¼ë¡œ, ì‹ ì¤‘í•¨ì€ ìœ„í—˜ íšŒí”¼ ëŠ¥ë ¥ì´ì ìƒì¡´ ì „ëµì´ì—ìš”.`;
          script = `**${name}ì´(ì‹ ì¤‘íŒŒ) ì›Œë°ì—… ëŒ€í™”ë²•:**\n\n**1ë‹¨ê³„: ê´€ì°° ì‹œê°„ í™•ë³´** "${name}ì•„, ì—¬ê¸° ì²˜ìŒì´ì§€? ì—„ë§ˆë‘ ì•‰ì•„ì„œ êµ¬ê²½í•˜ì." â†’ 5-10ë¶„ ê´€ì°° ì‹œê°„ì´ ì°¸ì—¬ ì˜ìš• 3ë°° â†‘ (Kagan, 1994)\n\n**2ë‹¨ê³„: ì–¸ì–´í™”** "ì €ê¸° ë¯¸ë„ëŸ¼í‹€ ìˆë„¤. ë¹¨ê°„ìƒ‰ì´ë‹¤."\n\n**3ë‹¨ê³„: ì ì§„ì  ì ‘ê·¼** "ì—„ë§ˆ ì† ì¡ê³  ê°€ê¹Œì´ ê°€ë³¼ê¹Œ? ë§Œì ¸ë§Œ ë³´ì."\n\n**4ë‹¨ê³„: ë¬´ì••ë°• ì°¸ì—¬** "íƒ€ê³  ì‹¶ìœ¼ë©´ íƒ€ê³ , ì•„ë‹ˆë©´ êµ¬ê²½ë§Œ í•´ë„ ë¼."\n\n**ì¶œì²˜:** Thomas, A. & Chess, S. (1977). Kagan, J. (1994). Galen's Prophecy.`;
          practicalTips = [{ title: 'ì˜ˆê³ ì™€ ì¤€ë¹„', content: `ìƒˆë¡œìš´ ì¥ì†Œ ë°©ë¬¸ ì „ ì‚¬ì§„ì´ë‚˜ ì˜ìƒì„ ë³´ì—¬ì£¼ì„¸ìš”. ${name}ì´ì˜ ë‡Œê°€ "ë‚¯ì„¤ì§€ ì•Šì•„"ë¼ê³  ì¸ì‹í•˜ë©´ ì ì‘ì´ 2ë°° ë¹¨ë¼ì ¸ìš”.`, source: 'Kagan, J. (1994)' }, { title: 'ê°•ìš” ê¸ˆì§€', content: `"ë¹¨ë¦¬ í•´", "ìš©ê¸° ë‚´" ê°™ì€ ë§ì€ ì—­íš¨ê³¼ì˜ˆìš”. ${name}ì´ê°€ ì¤€ë¹„ëì„ ë•Œ ìì—°ìŠ¤ëŸ½ê²Œ ì‹œë„í•  ê±°ì˜ˆìš”.`, source: 'Thomas & Chess (1977)' }, { title: 'ì‘ì€ ì„±ê³µ ì¶•ì ', content: `í•œ ë²ˆ ì„±ê³µí•œ ê²½í—˜ì„ ë°˜ë³µ ë…¸ì¶œí•˜ì„¸ìš”. ìµìˆ™í•¨ì´ ìì‹ ê°ìœ¼ë¡œ ì´ì–´ì ¸ìš”.`, source: 'Bandura, A. (1977)' }];
          realExamples = [{ situation: 'ì–´ë¦°ì´ì§‘ ì ì‘ ì•ˆ ë¨ (3ì£¼ì§¸ ìš¸ìŒ)', solution: `ì„ ìƒë‹˜ê»˜ ${name}ì´ ì¢‹ì•„í•˜ëŠ” ì¸í˜• ë¯¸ë¦¬ ì¤€ë¹„ ë¶€íƒ. ë“±ì› í›„ "ì¸í˜•ì´ ${name}ì´ ê¸°ë‹¤ë ¸ëŒ€" ë§í•˜ë©° 10ë¶„ ê°™ì´ ë†€ë‹¤ê°€ ë‚˜ì˜´.`, mom: '30ê°œì›” ì—¬ì•„ ì—„ë§ˆ', result: '4ì£¼ì°¨ë¶€í„° ì¸í˜• ë³´ìë§ˆì ìš¸ìŒ ë©ˆì¶¤.' }, { situation: 'ìƒì¼íŒŒí‹°ì—ì„œ í˜¼ì êµ¬ì„ì—ë§Œ ìˆìŒ', solution: `ì–µì§€ë¡œ ëŒì–´ë‚´ì§€ ì•Šê³ , ì—„ë§ˆê°€ ì˜†ì—ì„œ ì•„ì´ë“¤ ë…¸ëŠ” ê±° ê°™ì´ êµ¬ê²½. "ì € ì¹œêµ¬ í’ì„  ê°€ì§€ê³  ë…¸ë„¤" ì„¤ëª…í•´ì¤Œ.`, mom: '34ê°œì›” ë‚¨ì•„ ì—„ë§ˆ', result: '30ë¶„ í›„ ìŠ¤ìŠ¤ë¡œ í’ì„  ë§Œì§€ëŸ¬ ê°.' }];
        } else if (temperamentType.type === 'íƒí—˜ê°€') {
          interpretation = `${name}ì´ëŠ” **'${temperamentType.type}' ${temperamentType.emoji}** ê¸°ì§ˆì´ì—ìš”. **ìš´ë™ ì—ë„ˆì§€ ìˆ˜ì¤€ì´ í‰ê· ì˜ 2ë°°** ì •ë„ë¡œ, ${age} ì‹œê¸°ì—ëŠ” ëŠì„ì—†ì´ ì›€ì§ì´ê³ , íƒìƒ‰í•˜ê³ , ë§Œì§€ê³  ì‹¶ì–´í•˜ëŠ” ìš•êµ¬ê°€ ê°•í•´ìš”.\n\nì´ ê¸°ì§ˆì˜ ì•„ì´ë“¤ì€ í˜¸ê¸°ì‹¬Â·í•™ìŠµÂ·ë„ì „ ìš•êµ¬ê°€ í¬ê³ , ê²©ë ¬í•œ ë†€ì´ê°€ ì‹ ì²´Â·ì‚¬íšŒì„± ë°œë‹¬ì— ë„ì›€ì´ ë¼ìš”. ì›€ì§ì´ì§€ ëª»í•˜ê±°ë‚˜ ì¡°ìš©íˆ ì•‰ì•„ ìˆê¸°Â·ëŒ€ê¸° ì‹œê°„ì´ ê¸¸ ë•Œ, ì‹¤ë‚´ì—ì„œ ì—ë„ˆì§€ë¥¼ ì“¸ ê³³ì´ ì—†ì„ ë•Œ ì§œì¦Â·ì‚°ë§Œí•¨Â·ë›°ì–´ë‹¤ë‹ˆê¸°ê°€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆì–´ìš”.`;
          reassurance = `${name}ì´ê°€ 5ë¶„ë„ ëª» ì•‰ì•„ìˆê³  ì§‘ì•ˆì„ ë›°ì–´ë‹¤ë‹ˆëŠ” ê±´ 'ì‚°ë§Œí•¨'ì´ ì•„ë‹ˆë¼ **ë‡Œê°€ ìš”êµ¬í•˜ëŠ” ì •ìƒì ì¸ ì›€ì§ì„**ì´ì—ìš”. Panksepp(1998)ì˜ ì—°êµ¬ì—ì„œ ë†’ì€ í™œë™ì„±ì€ SEEKING ì‹œìŠ¤í…œ(íƒìƒ‰ ë³¸ëŠ¥) í™œì„±í™”ë¡œ, í•™ìŠµê³¼ ë°œë‹¬ì— ê¸ì •ì ì´ì—ìš”.`;
          script = `**${name}ì´(íƒí—˜ê°€) ì—ë„ˆì§€ ë°©í–¥ ëŒ€í™”ë²•:**\n\n**1ë‹¨ê³„: ì—ë„ˆì§€ ì¸ì •** "${name}ì•„, ëª¸ì´ ë§‰ ì›€ì§ì´ê³  ì‹¶êµ¬ë‚˜. ì—„ë§ˆ ì•Œì•„."\n\n**2ë‹¨ê³„: ì•ˆì „í•œ ë°©í–¥ ì œì‹œ** "ì—¬ê¸°ì„œëŠ” ì•ˆ ë¼. ìœ„í—˜í•´. ë°–ì— ë‚˜ê°€ì„œ ë›°ì."\n\n**3ë‹¨ê³„: ì—ë„ˆì§€ ì†Œì§„ í™œë™** "ì´ ê³µ ë˜ì ¸ë´. 10ë²ˆ!" â†’ Pellegrini & Smith(1998): í•˜ë£¨ 2ì‹œê°„ ê²©ë ¬í•œ í™œë™ í•„ìˆ˜\n\n**4ë‹¨ê³„: ì§„ì • ì‹ í˜¸** "ì´ì œ ì²œì²œíˆ ê±·ê¸°. í•˜ë‚˜, ë‘˜, ì…‹..."\n\n**ì¶œì²˜:** Panksepp, J. (1998). Affective Neuroscience. Pellegrini & Smith (1998). Child Development, 69(3).`;
          practicalTips = [{ title: 'í•˜ë£¨ 2ì‹œê°„ ê²©ë ¬í•œ ë†€ì´', content: `ê³µì›, ë›°ê¸°, ì í”„, ì˜¤ë¥´ê¸° ë“± ëŒ€ê·¼ìœ¡ í™œë™ì´ í•„ìˆ˜ì˜ˆìš”. ì—ë„ˆì§€ ë°œì‚° ì•ˆ ë˜ë©´ ë°¤ì ë„ ì•ˆ ì™€ìš”.`, source: 'Pellegrini & Smith (1998)' }, { title: 'ì§‘ì•ˆ ì•ˆì „ ê³µê°„', content: `ì†ŒíŒŒ ì¿ ì…˜ìœ¼ë¡œ ì í”„ì¡´, í…Œì´í”„ë¡œ ê¸¸ ë§Œë“¤ê¸° ë“±. ë¹„ ì˜¤ëŠ” ë‚  ëŒ€ë¹„ í•„ìˆ˜ì˜ˆìš”.`, source: 'Buss & Plomin (1984)' }, { title: 'íƒ€ì´ë¨¸ ê²Œì„', content: `"5ë¶„ ë™ì•ˆ ì¡°ìš©íˆ ì•‰ì•„ìˆê¸°" ì±Œë¦°ì§€. ì„±ê³µí•˜ë©´ 10ë¶„ ë›°ì–´ë†€ê¸°. ìê¸° ì¡°ì ˆ ì—°ìŠµì´ì—ìš”.`, source: 'Rothbart & Bates (2006)' }];
          realExamples = [{ situation: 'ì‹ë‹¹ì—ì„œ ê³„ì† ëŒì•„ë‹¤ë‹ˆê³  ë›°ì–´ë‹¤ë‹˜', solution: `ì‹ì‚¬ ì „ ì‹ë‹¹ ì£¼ì°¨ì¥ì—ì„œ 10ë¶„ ë›°ì–´ë†€ê¸°. ì‹ë‹¹ ë„ì°© ì „ "ì•‰ì•„ìˆê¸° ê²Œì„" ì˜ˆê³ . 5ë¶„ ì•‰ì•„ìˆìœ¼ë©´ ìŠ¤í‹°ì»¤.`, mom: '35ê°œì›” ë‚¨ì•„ ì—„ë§ˆ', result: 'ì—ë„ˆì§€ ë¯¸ë¦¬ ë¹¼ë‹ˆê¹Œ 15ë¶„ì€ ì•‰ì•„ìˆì–´ìš”.' }, { situation: 'ì§‘ì—ì„œ ì†ŒíŒŒ ìœ„ë¡œ ê³„ì† ì í”„', solution: `ê±°ì‹¤ í•œìª½ì— ë§¤íŠ¸ ê¹”ê³  "ì í”„ì¡´" ì§€ì •. "ì†ŒíŒŒëŠ” ì•ˆ ë¼, ì—¬ê¸°ì„œ ì í”„!" ì¼ê´€ëœ ê·œì¹™.`, mom: '32ê°œì›” ì—¬ì•„ ì—„ë§ˆ', result: '1ì£¼ì¼ ê±¸ë ¸ì§€ë§Œ ì´ì œ ì í”„ì¡´ì—ì„œë§Œ ë†€ì•„ìš”.' }];
        } else if (temperamentType.type === 'ìˆœë‘¥ì´') {
          interpretation = `${name}ì´ëŠ” **'${temperamentType.type}' ${temperamentType.emoji}** ê¸°ì§ˆì´ì—ìš”. ì „ì²´ ì•„ë™ì˜ ì•½ 40%ê°€ ì´ì— í•´ë‹¹í•´ìš”. ${age} ì‹œê¸°ì—ëŠ” **ê·œì¹™ì ì¸ ìƒí™œ ë¦¬ë“¬, ë¹ ë¥¸ ì ì‘ë ¥, ê¸ì •ì ì¸ ê¸°ë¶„**ì„ ë³´ì—¬ìš”.\n\nì´ ê¸°ì§ˆì˜ ì•„ì´ë“¤ì€ ê·œì¹™ì„±Â·ì ì‘ë ¥Â·ê¸ì • ì •ì„œê°€ ë†’ì•„ ìƒˆ í™˜ê²½Â·ë£¨í‹´ì— ì˜ ë§ì¶°ì§€ê³ , ì„ íƒ ê¸°íšŒë¥¼ ì£¼ë©´ ììœ¨ì„±Â·ë™ê¸°ê°€ ì˜ ìë¼ìš”. ìˆœí•œ ì•„ì´ì¼ìˆ˜ë¡ ë¶€ëª¨ì˜ ë¬´ê´€ì‹¬Â·ê°ˆë“±ì— ë” ë¯¼ê°í•´ìš”. "ì˜í•˜ë‹ˆê¹Œ" ë°©ì¹˜í•˜ê±°ë‚˜ ì˜ê²¬ì„ ë¬»ì§€ ì•Šìœ¼ë©´ ì†Œê·¹ì Â·ìê¸°ì£¼ì¥ ë¶€ì¡±ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”.`;
          reassurance = `${name}ì´(ê°€) í‚¤ìš°ê¸° ì‰½ë‹¤ê³  í•´ì„œ ì—„ë§ˆê°€ ëœ ì¤‘ìš”í•œ ê±´ ì•„ë‹ˆì—ìš”. Belsky(1984)ì˜ ì—°êµ¬ì—ì„œ ìˆœí•œ ì•„ì´ì¼ìˆ˜ë¡ **ë¶€ëª¨ì˜ ì–‘ìœ¡ íƒœë„ì— ë” ë¯¼ê°**í•˜ê²Œ ë°˜ì‘í•œë‹¤ê³  ë°í˜€ì¡Œì–´ìš”.`;
          script = `**${name}ì´(ìˆœë‘¥ì´) ì„±ì¥ ì´‰ì§„ ëŒ€í™”ë²•:**\n\n**ê°ì • í‘œí˜„ ì´‰ì§„** "${name}ì•„, ì§€ê¸ˆ ë¸”ë¡ ìŒ“ê¸° ì¬ë¯¸ìˆì–´? ì—„ë§ˆí•œí…Œ ë³´ì—¬ì¤„ë˜?" â†’ ê´€ì‹¬ í‘œí˜„ì´ ìì¡´ê° í˜•ì„±\n\n**ì„ íƒ ì—°ìŠµ** "ì˜¤ëŠ˜ ë­ ë¨¹ê³  ì‹¶ì–´? ${name}ì´ê°€ ê³¨ë¼ë´." â†’ Deci & Ryan(1985): ìˆœí•œ ì•„ì´ì¼ìˆ˜ë¡ ì„ íƒ ê²½í—˜ í•„ìš”\n\n**ê±°ì ˆ í—ˆìš©** "${name}ì•„, í•˜ê¸° ì‹«ìœ¼ë©´ 'ì‹«ì–´'ë¼ê³  ë§í•´ë„ ë¼."\n\n**ì¶œì²˜:** Thomas, A. & Chess, S. (1977). Gottman, J. (1997). Raising An Emotionally Intelligent Child.`;
          practicalTips = [{ title: 'ê°ì • ì–´íœ˜ í™•ì¥', content: `"í™”ë‚¬ì–´" ì™¸ì— "ì†ìƒí•´", "ì•„ì‰¬ì›Œ", "ë¶€ëŸ¬ì›Œ" ë“± ë‹¤ì–‘í•œ ê°ì • ë‹¨ì–´ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.`, source: 'Gottman, J. (1997)' }, { title: 'ì„ íƒ ê¸°íšŒ ì œê³µ', content: `í•˜ë£¨ì— 3ë²ˆ ì´ìƒ ${name}ì´ê°€ ì„ íƒí•˜ê²Œ í•˜ì„¸ìš”. "ì˜¤ëŠ˜ ë­ ì…ì„ê¹Œ?", "ê°„ì‹ ë­ ë¨¹ì„ê¹Œ?"`, source: 'Deci & Ryan (1985)' }, { title: 'ê´€ì‹¬ ì§€ì†', content: `ìˆœë‘¥ì´ë¼ê³  ë°©ì¹˜í•˜ì§€ ë§ˆì„¸ìš”. í•˜ë£¨ 15ë¶„ ${name}ì´ë§Œì„ ìœ„í•œ ì‹œê°„ì„ í™•ë³´í•˜ì„¸ìš”.`, source: 'Belsky, J. (1984)' }];
          realExamples = [{ situation: 'ë™ìƒì´ ì¥ë‚œê° ë¹¼ì•—ì•„ë„ ê°€ë§Œíˆ ìˆìŒ', solution: `"${name}ì•„, ê·¸ ì¥ë‚œê° ${name}ì´ ê±°ì•¼. 'ë‚´ ê±°ì•¼'ë¼ê³  ë§í•´ë´." ìê¸° ì£¼ì¥ ì—°ìŠµ ì‹œí‚´.`, mom: '36ê°œì›” ë‚¨ì•„ ì—„ë§ˆ', result: '3ì£¼ í›„ ìŠ¤ìŠ¤ë¡œ "ë‚´ ê±°!" ë§í•˜ê¸° ì‹œì‘.' }, { situation: 'ì—„ë§ˆê°€ ì‹œí‚¤ëŠ” ëŒ€ë¡œë§Œ í•¨ (ì˜ê²¬ í‘œí˜„ ì•ˆ í•¨)', solution: `ë§¤ì¼ "ì˜¤ëŠ˜ ë­ í•˜ê³  ì‹¶ì–´?" ë¬¼ì–´ë´„. "ì˜ ëª¨ë¥´ê² ìœ¼ë©´ ì—„ë§ˆê°€ 2ê°€ì§€ ë§í• ê²Œ" ì„ íƒ ì—°ìŠµ.`, mom: '33ê°œì›” ì—¬ì•„ ì—„ë§ˆ', result: '2ê°œì›” í›„ "ë‚˜ëŠ” ì´ê±° í•˜ê³  ì‹¶ì–´" ìŠ¤ìŠ¤ë¡œ ë§í•˜ê¸° ì‹œì‘.' }];
        } else if (temperamentType.type === 'í˜¼í•©í˜•') {
          interpretation = `${name}ì´ëŠ” **'${temperamentType.type}' ${temperamentType.emoji}** í”„ë¡œí•„ì´ì—ìš”. ì¼ë¶€ ê¸°ì§ˆ ì˜ì—­ì—ì„œ ê·¹ë‹¨ì ì¸ ì ìˆ˜ê°€ ìˆì–´, í•˜ë‚˜ì˜ ìœ í˜•ìœ¼ë¡œ ë¬¶ê¸° ì–´ë ¤ìš´ ì¡°í•©ì´ì—ìš”. ì´ëŸ° ì•„ì´ë“¤ë„ ê¸°ì§ˆê³¼ í™˜ê²½ì´ ì˜ ë§ìœ¼ë©´ ì˜ ì ì‘í•´ìš”.\n\nì•„ë˜ ê¸°ì§ˆ í”„ë¡œí•„ ë§‰ëŒ€ë¥¼ ë³´ì‹œê³ , ë†’ì€ í•­ëª©(ê°•ì )ê³¼ ë‚®ì€ í•­ëª©(ì¼€ì–´ê°€ í•„ìš”í•œ ë¶€ë¶„)ì„ í•¨ê»˜ ë³´ì‹œë©´ ë¼ìš”.`;
          reassurance = `${name}ì´(ê°€) ê·¹ë‹¨ ì ìˆ˜ê°€ ìˆì–´ë„ 'ì´ìƒí•œ ì•„ì´'ê°€ ì•„ë‹ˆì—ìš”. Rothbart & Bates(2006)ëŠ” ê¸°ì§ˆì„ 'ìƒë¬¼í•™ì  ê¸°ë°˜ì˜ ê°œì¸ì°¨'ë¡œ ë³´ë©°, í™˜ê²½ì´ ë§ì„ ë•Œ ê°•ì ìœ¼ë¡œ ë°œí˜„ëœë‹¤ê³  í–ˆì–´ìš”.`;
          script = `**${name}ì´(í˜¼í•©í˜•) + ${parentType.type} ë§ì¶¤ ëŒ€í™”ë²•:**\n\n**P.E.T. 4ë‹¨ê³„** (Gordon, 1970): "${name}ì•„, ë¬´ìŠ¨ ì¼ì´ì•¼?" â†’ ì ê·¹ì  ê²½ì²­ â†’ "ì–´ë–»ê²Œ í•˜ë©´ ì¢‹ì„ê¹Œ?" â†’ ì„ íƒê³¼ ì‹¤í–‰. í”„ë¡œí•„ì—ì„œ ë‚®ì€ í•­ëª©(ì˜ˆ: ì ‘ê·¼ì„±Â·ê¸°ë¶„)ì´ ìˆìœ¼ë©´ ì˜ˆê³ Â·ì„ íƒê¶Œì„, ë†’ì€ í•­ëª©(ì˜ˆ: í™œë™ì„±)ì´ ìˆìœ¼ë©´ ì—ë„ˆì§€ ë°œì‚° ê¸°íšŒë¥¼ ë” ì£¼ì„¸ìš”.`;
          practicalTips = [{ title: 'í”„ë¡œí•„ ë§‰ëŒ€ ì°¸ê³ ', content: `ê·¹ë‹¨ì´ ìˆëŠ” í•­ëª©ë§Œ ê³¨ë¼ ì¼€ì–´í•˜ì„¸ìš”. ëª¨ë“  í•­ëª©ì„ ë°”ê¾¸ë ¤ í•˜ì§€ ë§ˆì„¸ìš”.`, source: 'Thomas & Chess (1977)' }, { title: 'ê°ì • ì½”ì¹­', content: `"í™”ë‚¬ì–´", "ìŠ¬í¼" ê°™ì€ ê°ì • ì´ë¦„ì„ ìì£¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.`, source: 'Gottman, J. (1997)' }, { title: 'ì¼ê´€ì„±', content: `ê·œì¹™ì€ ëª…í™•í•˜ê³  ì¼ê´€ë˜ê²Œ ì ìš©í•˜ì„¸ìš”.`, source: 'Gordon, T. (1970)' }];
          realExamples = [{ situation: 'ì¥ë‚œê° ì •ë¦¬ ì•ˆ í•˜ê³  ë–¼ì“°ê¸°', solution: `"5ë¶„ í›„ì— ì •ë¦¬í•  ê±°ì•¼" ì˜ˆê³  â†’ íƒ€ì´ë¨¸ â†’ í•¨ê»˜ ì •ë¦¬ â†’ êµ¬ì²´ì  ì¹­ì°¬`, mom: '32ê°œì›” ë‚¨ì•„ ì—„ë§ˆ', result: 'íƒ€ì´ë¨¸ ì†Œë¦¬ ë“¤ìœ¼ë©´ ì •ë¦¬ ì‹œì‘í•´ìš”.' }, { situation: 'ë™ìƒ ë•Œë¦¬ê¸°', solution: `"ë•Œë¦¬ë©´ ì•„íŒŒ. ì´ë ‡ê²Œ í•´ (ì“°ë‹¤ë“¬ê¸°)" + "í™”ë‚¬ìœ¼ë©´ ì—„ë§ˆí•œí…Œ ë§í•´"`, mom: '29ê°œì›” ì—¬ì•„ ì—„ë§ˆ', result: '"ì—„ë§ˆ, í™”ë‚˜!" ë§ë¡œ í‘œí˜„í•´ìš”.' }];
        } else {
          interpretation = `${name}ì´ëŠ” **'${temperamentType.type}' ${temperamentType.emoji}** ê¸°ì§ˆì´ì—ìš”. ${age} ì‹œê¸°ì— ê° ê¸°ì§ˆ ì˜ì—­ì—ì„œ ê·¹ë‹¨ì ì´ì§€ ì•Šê³  ê· í˜•ì„ ë³´ì´ëŠ” ê±´ ë§¤ìš° ê¸ì •ì ì´ì—ìš”. ì´ëŸ° ì•„ì´ë“¤ì€ ìƒˆë¡œìš´ ìƒí™©Â·ê·œì¹™ì— ë¹„êµì  ìœ ì—°í•˜ê²Œ ë°˜ì‘í•˜ëŠ” í¸ì´ì—ìš”.\n\nì—¬ëŸ¬ ìƒí™©ì— ê³¨ê³ ë£¨ ì ì‘í•˜ëŠ” í¸ì´ë¼, ìœ ì¹˜ì›Â·ìƒˆ í™˜ê²½ ì ì‘ì´ ìƒëŒ€ì ìœ¼ë¡œ ìˆ˜ì›”í•  ìˆ˜ ìˆì–´ìš”. í”¼ê³¤í•˜ê±°ë‚˜ ë°°ê³ í”„ê±°ë‚˜ ìê·¹ì´ ê³¼í•  ë•ŒëŠ” ë‹¤ë¥¸ ì•„ì´ë“¤ì²˜ëŸ¼ ì§œì¦Â·ìš¸ìŒì´ ëŠ˜ì–´ë‚  ìˆ˜ ìˆì–´ìš”. ê·¸ë•ŒëŠ” íœ´ì‹Â·ê°„ì‹Â·ì¡°ìš©í•œ ê³µê°„ì„ ë¨¼ì € ì±™ê²¨ ì£¼ì„¸ìš”.`;
          reassurance = `${name}ì´(ê°€) ê°€ë” ë³´ì´ëŠ” ë¬¸ì œ í–‰ë™ì€ ê¸°ì§ˆë³´ë‹¤ëŠ” **ë°œë‹¬ ë‹¨ê³„**ë‚˜ **í™˜ê²½ì  ìš”ì¸**ê³¼ ê´€ë ¨ì´ ìˆì„ ê°€ëŠ¥ì„±ì´ ì»¤ìš”. ì—„ë§ˆëŠ” ì¶©ë¶„íˆ ì˜í•˜ê³  ê³„ì„¸ìš”.`;
          script = `**${name}ì´(ê· í˜•í˜•) + ${parentType.type} ë§ì¶¤ ëŒ€í™”ë²•:**\n\n**P.E.T. 4ë‹¨ê³„ ë¬¸ì œ í•´ê²° ëŒ€í™”ë²•** (Gordon, 1970):\n\n**1ë‹¨ê³„: ë¬¸ì œ ì¸ì‹** "${name}ì•„, ë¬´ìŠ¨ ì¼ì´ì•¼?"\n\n**2ë‹¨ê³„: ì ê·¹ì  ê²½ì²­** "(ì¥ë‚œê°ì„ ëºê²¼êµ¬ë‚˜/ì¹œêµ¬ê°€ ê°™ì´ ì•ˆ ë†€ì•„ì¤¬êµ¬ë‚˜). ê·¸ë˜ì„œ ì†ìƒí–ˆì–´?"\n\n**3ë‹¨ê³„: í•´ê²°ì±… ë¸Œë ˆì¸ìŠ¤í† ë°** "ì–´ë–»ê²Œ í•˜ë©´ ì¢‹ì„ê¹Œ? ${name}ì´ ìƒê°ì€?" â†’ Shure & Spivack(1982): ì•„ì´ê°€ ì§ì ‘ í•´ê²°ì±… ì œì‹œí•˜ë©´ ì‹¤í–‰ë¥  3ë°° â†‘\n\n**4ë‹¨ê³„: ì„ íƒê³¼ ì‹¤í–‰** "ì¢‹ì€ ìƒê°ì´ë‹¤. ê·¸ëŸ¼ í•´ë³¼ê¹Œ?"\n\n**ì¶œì²˜:** Gordon, T. (1970). P.E.T. Shure, M.B. & Spivack, G. (1982). Interpersonal problem-solving in young children.`;
          practicalTips = [{ title: 'ì¼ê´€ì„± ìœ ì§€í•˜ê¸°', content: `ê·œì¹™ì€ ëª…í™•í•˜ê²Œ, ì¼ê´€ë˜ê²Œ ì ìš©í•˜ì„¸ìš”. "ì•ˆ ë¼"ë¼ê³  í–ˆìœ¼ë©´ ëê¹Œì§€ ì§€í‚¤ëŠ” ê²Œ ì¤‘ìš”í•´ìš”.`, source: 'Gordon, T. (1970)' }, { title: 'ê°ì • ì½”ì¹­', content: `${age} ì•„ì´ëŠ” ê°ì • ì´ë¦„ì„ ë°°ìš°ëŠ” ì¤‘ì´ì—ìš”. "í™”ë‚¬ì–´", "ìŠ¬í¼" ê°™ì€ ë‹¨ì–´ë¥¼ ìì£¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”.`, source: 'Gottman, J. (1997)' }, { title: 'ì§ˆë³´ë‹¤ ì–‘', content: `í•˜ë£¨ 15ë¶„ ${name}ì´ê°€ ì£¼ë„í•˜ëŠ” ë†€ì´ ì‹œê°„ì„ ë§Œë“¤ì–´ë³´ì„¸ìš”.`, source: 'Lansbury, J. (2014) No Bad Kids' }];
          realExamples = [{ situation: 'ì¥ë‚œê° ì •ë¦¬ ì•ˆ í•˜ê³  ë–¼ì“°ê¸°', solution: `"5ë¶„ í›„ì— ì •ë¦¬í•  ê±°ì•¼" ì˜ˆê³  â†’ íƒ€ì´ë¨¸ ì„¤ì • â†’ í•¨ê»˜ ì •ë¦¬í•˜ê¸° â†’ "ì™€, ${name}ì´ê°€ ë¸”ë¡ 3ê°œë‚˜ ì •ë¦¬í–ˆë„¤!" êµ¬ì²´ì  ì¹­ì°¬`, mom: '32ê°œì›” ë‚¨ì•„ ì—„ë§ˆ', result: 'íƒ€ì´ë¨¸ ì†Œë¦¬ ë“¤ìœ¼ë©´ ì´ì œ ì•Œì•„ì„œ ì •ë¦¬ ì‹œì‘í•´ìš”.' }, { situation: 'ë™ìƒ ë•Œë¦¬ê¸°', solution: `"ë•Œë¦¬ë©´ ì•„íŒŒ. ë™ìƒí•œí…Œ ì´ë ‡ê²Œ í•´ (ì‚´ì§ ì“°ë‹¤ë“¬ê¸°)" ì¦‰ê° ê°œì… + "í™”ë‚¬ìœ¼ë©´ ì—„ë§ˆí•œí…Œ ë§í•´" ëŒ€ì•ˆ ì œì‹œ`, mom: '29ê°œì›” ì—¬ì•„ ì—„ë§ˆ', result: 'í•œ ë‹¬ ì •ë„ ê±¸ë ¸ì§€ë§Œ ì´ì œ "ì—„ë§ˆ, í™”ë‚˜!" ë§ë¡œ í‘œí˜„í•´ìš”.' }];
        }
        return { interpretation, reassurance, script, childScores, parentScores, temperamentType, parentType, practicalTips, realExamples, concernAnalysis, parentAnalysis };
      };

      const generateResponse = (question, recentHistory = []) => {
        const childScores = temperamentQuestions.map((_, i) => childProfile[`q${i}`] || 5);
        const parentScores = parentQuestions.map((_, i) => parentProfile[`p${i}`] || 5);
        const temperamentType = getTemperamentType(childScores);
        const parentType = getParentType(parentScores);
        const name = childInfo.name;
        const age = getChildAge();
        const lowAdaptability = childScores[3] < 5;
        const highActivity = childScores[0] > 7;
        const highSensitivity = childScores[8] > 7;
        const lastAssistant = recentHistory.filter(m => m.role === 'assistant').pop();
        const lastAssistantText = lastAssistant ? (lastAssistant.content || '').slice(0, 800) : '';
        const q = question.trim();
        const isFollowUp = recentHistory.length >= 2;
        const lastAboutEating = /ë°¥|ì‹ì‚¬|ë¨¹|ì„ íƒê¶Œ|ë‹¨ê³„|ê±°ë¶€|ìŒì‹|í•´ ë³´ì‹¤|ì‹œë„í•´ ë³´ì‹¤|ì¶”ì²œ ë£¨í‹´|ì‹ì‚¬ ì‹œê°„/.test(lastAssistantText);
        const lastAboutSleep = /ì |ìˆ˜ë©´|ë£¨í‹´|ì¬ìš°ê¸°|ì·¨ì¹¨/.test(lastAssistantText);
        const lastAboutTantrum = /ë–¼|ìš¸|ê°ì •|ì˜ˆê³ |ì ì‘/.test(lastAssistantText);

        if (isFollowUp && lastAssistantText) {
          if (lastAboutEating && /ì•¼ì±„|ì±„ì†Œ|í¸ì‹|ë¨¹ê¸° ì‹«ì–´|ì•ˆ ë¨¹ì–´|ê·¸ë˜ë„ ì•ˆ|í•´ë„ ì•ˆ/.test(q)) {
            if (highSensitivity) {
              return `ì•¼ì±„ëŠ” ì§ˆê°ì´ë‚˜ ëƒ„ìƒˆê°€ ê°•í•´ì„œ, ${name}ì´ì²˜ëŸ¼ ê°ê°ì´ ì˜ˆë¯¼í•œ í¸ì´ë©´ ê±°ë¶€ê°ì´ ë” í¬ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”. ë¬´ë¦¬í•˜ê²Œ ë¨¹ì´ê¸°ë³´ë‹¤ëŠ” í•œ ê°€ì§€ë§Œ ê³¨ë¼ì„œ(ì˜ˆ: ë‹¹ê·¼ë§Œ) ë¶€ë“œëŸ½ê²Œ ìµí˜€ì„œ í“¨ë ˆì²˜ëŸ¼ ë³´ì—¬ì£¼ì‹œê³ , ${name}ì´ê°€ ì†ìœ¼ë¡œ ë§Œì ¸ ë³´ê±°ë‚˜ ëƒ„ìƒˆë§Œ ë§¡ê²Œ í•´ ë‘ëŠ” ê²ƒë¶€í„° ì‹œì‘í•´ ë³´ì„¸ìš”. 8~15ë²ˆ ì •ë„ ì‹íƒì—ë§Œ ì˜¬ë ¤ë‘ì–´ë„ "ìµìˆ™í•¨"ì´ ìƒê¸°ë©´ì„œ ì¡°ê¸ˆì”© ë°›ì•„ë“¤ì´ëŠ” ê²½ìš°ê°€ ë§ì•„ìš”. ì˜¤ëŠ˜ì€ "ì´ê±° ìˆì–´"ë§Œ ë§í•˜ê³  ë¨¹ìœ¼ë¼ê³  í•˜ì§€ ì•Šìœ¼ì…”ë„ ë¼ìš”. ğŸ’•`;
            }
            if (lowAdaptability) {
              return `ì•¼ì±„ì²˜ëŸ¼ ìƒˆë¡œìš´ ìŒì‹ì€ ${name}ì´í•œí…Œ ì‹œê°„ì´ ì¡°ê¸ˆ ë” ê±¸ë¦¬ëŠ” í¸ì´ì—ìš”. ê°™ì€ ì•¼ì±„ë¥¼ 15~20ë²ˆ ì •ë„ ì‹íƒì—ë§Œ ì˜¬ë ¤ë‘ì‹œê³ , ë¨¹ìœ¼ë¼ê³  í•˜ì§€ ì•Šìœ¼ì…”ë„ ë¼ìš”. ì¢‹ì•„í•˜ëŠ” ìŒì‹ ì˜†ì— ì‘ê²Œ ë†“ì•„ ë‘ì‹œë©´ "ì´ê±° ìˆì–´"ë§Œ ë§í•´ ì£¼ì„¸ìš”. ê°•ìš”í• ìˆ˜ë¡ ê±°ë¶€ê°€ ê¸¸ì–´ì§€ë‹ˆê¹Œ, ì˜¤ëŠ˜ì€ ê±°ë¶€í•´ë„ ë‚´ì¼ ë‹¤ì‹œ ì˜¬ë ¤ë§Œ ë‘ì‹œëŠ” ê±¸ 2~3ì£¼ ì´ì–´ê°€ ë³´ì‹œë©´ ì¢‹ì•„ìš”. ğŸ’•`;
            }
            return `ì•¼ì±„ëŠ” ë§ì€ ì•„ì´ë“¤ì´ ë‹¨ê³„ì ìœ¼ë¡œ ë°›ì•„ë“¤ì´ëŠ” ìŒì‹ì´ì—ìš”. "ì´ê±° í• ë˜? ì €ê±° í• ë˜?"ë¡œ ë‹¹ê·¼ì´ë‘ ì˜¤ì´ ì¤‘ì—ì„œ ê³¨ë¼ ë³´ê²Œ í•˜ì‹œê±°ë‚˜, ë°¥ ìœ„ì— ì‚´ì§ ì˜¬ë ¤ë§Œ ë‘ê³  ë¨¹ìœ¼ë¼ê³  í•˜ì§€ ì•Šìœ¼ì…”ë„ ë¼ìš”. ê°™ì´ ì•‰ì•„ì„œ ì—„ë§ˆê°€ ë§›ìˆê²Œ ë¨¹ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ì‹œëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë„ì›€ì´ ë©ë‹ˆë‹¤. í•œ ê°€ì§€ë§Œ ì •í•´ì„œ 2ì£¼ ì •ë„ ê¾¸ì¤€íˆ ë³´ì—¬ì£¼ì‹œë‹¤ê°€, ì¡°ê¸ˆ ë‚˜ì•„ì§€ë©´ ê·¸ë‹¤ìŒ ì•¼ì±„ë¥¼ í•˜ë‚˜ ë” ë„ì…í•´ ë³´ì„¸ìš”. ğŸ’•`;
          }
          if (lastAboutSleep && /ì |ìˆ˜ë©´|ìê¸°|ì·¨ì¹¨|ê·¸ë˜ë„ ì•ˆ|í•´ë„ ì•ˆ/.test(q)) {
            const regular = childScores[1] > 7;
            return regular
              ? `ì§€ë‚œë²ˆì— ë§ì”€ë“œë¦° ë£¨í‹´(ê°™ì€ ì‹œê°„, ê°™ì€ ìˆœì„œ)ì„ 2ì£¼ ì •ë„ í•´ ë³´ì…¨ì„ ë•Œë„ ë³€í™”ê°€ ì—†ìœ¼ì‹œë©´, ì·¨ì¹¨ ì‹œê°„ì„ 15ë¶„ë§Œ ë‹¹ê²¨ ë³´ì‹œê±°ë‚˜ ë‚®ì ì´ ë„ˆë¬´ ëŠ¦ê²Œ ëë‚˜ì§€ ì•Šì•˜ëŠ”ì§€ í•œ ë²ˆë§Œ ì ê²€í•´ ë³´ì„¸ìš”. ${name}ì´ëŠ” ê·œì¹™ì„±ì´ ìˆëŠ” í¸ì´ë¼, ì‹œê°„ë§Œ ì¡°ê¸ˆ ë§ì¶° ì£¼ì‹œë©´ ê¸ˆë°© ì¡íˆëŠ” ê²½ìš°ê°€ ë§ì•„ìš”. ê·¸ë˜ë„ ì•ˆ ë˜ì‹œë©´ ê·¸ë•Œ "ëª‡ ì‹œì— ì¬ìš°ì‹œë‚˜ìš”, ë‚®ì ì€ ëª‡ ì‹œê°„ì´ì—ìš”" ê°™ì´ ì¡°ê¸ˆë§Œ ë” ì•Œë ¤ ì£¼ì‹œë©´ ê·¸ë‹¤ìŒ ë‹¨ê³„ ê°™ì´ ì§šì–´ ë“œë¦´ê²Œìš”. ğŸ’•`
              : `ë¶ˆê·œì¹™í•œ í¸ì¸ ${name}ì´í•œí…ŒëŠ” "ë§¤ì¼ ê°™ì€ ìˆœì„œ"ê°€ ë” ì¤‘ìš”í•´ìš”. ì‹œê°„ì€ ì¡°ê¸ˆ ë‹¬ë¼ë„ ê´œì°®ìœ¼ë‹ˆê¹Œ, "ëª©ìš• â†’ íŒŒìë§ˆ â†’ ì±… í•œ ê¶Œ â†’ ë¶ˆ ë„ê¸°"ë§Œ ë§¤ì¼ ë˜‘ê°™ì´ 2~3ì£¼ ì´ì–´ê°€ ë³´ì„¸ìš”. ì²˜ìŒì—” ì €í•­í•´ë„ "ì§€ê¸ˆ ìëŠ” ì‹œê°„ì´ì•¼"ë§Œ ì°¨ë¶„íˆ ë°˜ë³µí•´ ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. 6~8ì£¼ ë„˜ê¸°ì‹œë©´ ì°¨ì´ê°€ ë³´ì´ëŠ” ê²½ìš°ê°€ ë§ì•„ìš”. ê·¸ë™ì•ˆ í•´ ë³´ì‹œë‹¤ê°€ ë§‰íˆëŠ” ìˆœê°„ì´ ìˆìœ¼ë©´ ê·¸ë•Œ ë§ì”€í•´ ì£¼ì„¸ìš”. ğŸ’•`;
          }
          if (lastAboutTantrum && /ë–¼|ìš¸|ì§œì¦|ê·¸ë˜ë„|í•´ë„ ì•ˆ/.test(q)) {
            return lowAdaptability
              ? `ì§€ë‚œë²ˆì— ë§ì”€ë“œë¦° ì˜ˆê³ ë‚˜ ì„ íƒê¶Œ ì£¼ê¸°, í•œë²ˆ í•´ ë³´ì…¨ì„ê¹Œìš”? ê·¸ë˜ë„ ë–¼ì“°ëŠ” ìˆœê°„ì´ ë§ìœ¼ì‹œë©´, ê·¸ë•ŒëŠ” "ì§€ê¸ˆ ì†ìƒí•˜êµ¬ë‚˜" í•œ ë²ˆë§Œ ë§í•´ ì£¼ì‹  ë’¤ 10ì´ˆ ì •ë„ ê°€ë§Œíˆ ê³„ì‹œë‹¤ê°€, "ì´ê±° í• ë˜? ì €ê±° í• ë˜?"ë¡œ ë‹¤ìŒ í–‰ë™ë§Œ ì§§ê²Œ ë°”ê¿” ì£¼ì‹œë©´ ë¼ìš”. ${name}ì´ëŠ” ì ì‘ì´ ëŠë¦° í¸ì´ë¼ ê°™ì€ ë§ì„ ì—¬ëŸ¬ ë²ˆ ë°˜ë³µí•´ ì£¼ì…”ì•¼ ìµìˆ™í•´ì ¸ìš”. 2~3ì£¼ ê¾¸ì¤€íˆ í•˜ì‹œë‹¤ê°€ "ì´ë ‡ê²Œ í–ˆëŠ”ë° ì´ë ‡ë‹¤"ê³  ì•Œë ¤ ì£¼ì‹œë©´ ê·¸ë‹¤ìŒë„ ì´ì–´ì„œ ë§ì”€ë“œë¦´ê²Œìš”. ğŸ’•`
              : `í‰ì†Œì—” ì ì‘ì´ ì˜ë˜ëŠ” ${name}ì´ì¸ë° ìš”ì¦˜ë§Œ ê·¸ë ‡ë‹¤ë©´, í”¼ê³¤í•˜ê±°ë‚˜ ë°°ê°€ ê³ ë¥´ê±°ë‚˜ ìê·¹ì´ ë§ì•˜ë˜ ë‚ ì¸ì§€ í•œë²ˆë§Œ ëŒì•„ë³´ì‹œë©´ ì¢‹ì•„ìš”. ê·¸ëŸ° ë‚ ì€ "ì´ê±° í• ë˜? ì €ê±° í• ë˜?"ë¡œ ì„ íƒë§Œ ì£¼ì‹œê³ , ë§ì€ ì§§ê²Œ í•´ ì£¼ì‹œëŠ” ê²Œ ì¢‹ìŠµë‹ˆë‹¤. ë‚®ì Â·ì·¨ì¹¨ ì‹œê°„ì´ ìš”ì¦˜ ííŠ¸ëŸ¬ì§€ì§€ ì•Šì•˜ëŠ”ì§€ë„ ì ê²€í•´ ë³´ì‹œê³ , 1~2ì£¼ ì§€ë‚˜ë„ ê°™ì€ ì •ë„ë¡œ í˜ë“œì‹œë©´ ê·¸ë•Œ ìƒí™©ì„ ì¡°ê¸ˆë§Œ ë” ë§ì”€í•´ ì£¼ì„¸ìš”. ğŸ’•`;
          }
          if (/ì–¼ë§ˆë‚˜|ëª‡\s*ì£¼|ëª‡\s*ë‹¬|ì–¸ì œì¯¤|ê¸°ê°„|ì§€ì¼œë´|ì–¼ë§ˆë‚˜\s*ì§€ì¼œ/.test(q)) {
            const weeks = temperamentType.type === 'ì‹ ì¤‘íŒŒ' ? '2~4ì£¼' : temperamentType.type === 'ì—ë„ˆìì´ì €' ? '6~8ì£¼' : temperamentType.type === 'ì„¬ì„¸íŒŒ' ? '3~5ì£¼' : temperamentType.type === 'íƒí—˜ê°€' ? '4~6ì£¼' : '2~6ì£¼';
            return `${name}ì´(${age})ì˜ **${temperamentType.type}** ê¸°ì§ˆì„ ê¸°ì¤€ìœ¼ë¡œ ë§ì”€ë“œë¦¬ë©´, ê°™ì€ ë£¨í‹´ì„ ê¾¸ì¤€íˆ í•´ì£¼ì‹¤ ë•Œ ëŒ€ë¶€ë¶„ **${weeks}** ì•ˆì— ìŠµê´€ì´ ì¡íˆê¸° ì‹œì‘í•´ìš”.\n\në‹¤ë§Œ ${temperamentType.type === 'ì—ë„ˆìì´ì €' ? 'ê°ì • ê°•ë„ê°€ ë†’ì€ ì•„ì´ëŠ”' : temperamentType.type === 'ì‹ ì¤‘íŒŒ' ? 'ì²œì²œíˆ ì ì‘í•˜ëŠ” ì•„ì´ëŠ”' : 'ì•„ì´ë§ˆë‹¤'} ì°¨ì´ê°€ ìˆì–´ì„œ, 2ì£¼ë§Œì— ë‹¬ë¼ì§€ê¸°ë„ í•˜ê³  ì¡°ê¸ˆ ë” ê±¸ë¦¬ê¸°ë„ í•´ìš”. ì¤‘ìš”í•œ ê±´ â€˜ì–¼ë§ˆë‚˜ ë¹¨ë¦¬â€™ê°€ ì•„ë‹ˆë¼, ${name}ì´ í˜ì´ìŠ¤ì— ë§ì¶° **ì¼ê´€ë˜ê²Œ** í•´ì£¼ì‹œëŠ” ê±°ì˜ˆìš”.\n\nê·¸ë™ì•ˆ ì¡°ê¸ˆì”© ë‚˜ì•„ì§€ëŠ” êµ¬ê°„ì´ ë³´ì´ì‹œë©´ ê·¸ëŒ€ë¡œ ì´ì–´ê°€ì‹œê³ , ì „í˜€ ë³€í•¨ì´ ì—†ë‹¤ê³  ëŠê»´ì§€ì‹œë©´ ê·¸ë•Œ í•œ ë²ˆ ë” ë§ì”€í•´ ì£¼ì„¸ìš”. í•¨ê»˜ ì§šì–´ë³¼ê²Œìš”. ğŸ’•`;
          }
          if (/êµ¬ì²´ì |ì˜ˆì‹œ|ì–´ë–»ê²Œ\s*í•´ìš”|ì–´ë–»ê²Œ\s*í•˜ë‚˜|ë°©ë²•|ì‹¤ì œë¡œ|í•´ë³´ê³ /.test(q)) {
            if (lowAdaptability && (lastAssistantText.includes('ì ì‘') || lastAssistantText.includes('ë³€í™”'))) {
              return `ì‹¤ì œë¡œ í•´ë³´ì‹œê¸° ì¢‹ì€ ìˆœì„œë¥¼ ${name}ì´ ê¸°ì§ˆì— ë§ì¶° ì •ë¦¬í•´ë³¼ê²Œìš”.\n\n**1ë‹¨ê³„ (ë‹¹ì¼)**\në‚˜ê°€ê¸°/ìê¸° ì „ 10~15ë¶„ ì „ì— "ì´ì œ ì† ì”»ê³ , ì‹ ë°œ ì‹ ê³  ë‚˜ê°ˆ ê±°ì•¼"ì²˜ëŸ¼ **ë‹¨ê³„**ë¥¼ ì§§ê²Œ ë§í•´ì£¼ì„¸ìš”. "5ë¶„ í›„"ë§Œ ë§í•˜ëŠ” ê²ƒë³´ë‹¤ ë­˜ í• ì§€ ì•Œë ¤ì£¼ë©´ ${name}ì´ì²˜ëŸ¼ ì ì‘ì´ ëŠë¦° ì•„ì´ëŠ” ë§ˆìŒì´ ë” ì¤€ë¹„ë¼ìš”.\n\n**2ë‹¨ê³„ (ë§¤ì¼)**\nê°™ì€ ì‹œê°„ì— ê°™ì€ ìˆœì„œë¥¼ ë°˜ë³µí•´ ë³´ì„¸ìš”. ì˜ˆ: ëª©ìš• â†’ íŒŒìë§ˆ â†’ ì–‘ì¹˜ â†’ ë¶ˆ ë„ê¸°. 2ì£¼ ì •ë„ ê¾¸ì¤€íˆ í•˜ë©´ "ì´ì œ ìëŠ” êµ¬ë‚˜"ê°€ ëª¸ì— ë°°ê¸° ì‹œì‘í•´ìš”.\n\n**3ë‹¨ê³„ (ë§ë¡œ ì¸ì •)**\n"ì§€ê¸ˆ ì‹«êµ¬ë‚˜. ê·¸ë˜ë„ ì´ê±° í•˜ë©´ ì—„ë§ˆë‘ ê°™ì´ ëˆ„ìš¸ ìˆ˜ ìˆì–ì•„."ì²˜ëŸ¼ ê°ì •ì€ ì¸ì •í•˜ê³ , ë‹¤ìŒ í–‰ë™ë§Œ ì§§ê²Œ ë§í•´ì£¼ì‹œë©´ ë¼ìš”.\n\ní•œ ë²ˆì— ë‹¤ í•˜ì‹œë ¤ í•˜ì§€ ë§ˆì‹œê³ , 1ë‹¨ê³„ë§Œì´ë¼ë„ ì´ë²ˆ ì£¼ì— ë¶™ë“¤ì–´ ë³´ì‹œë‹¤ê°€ í¸í•´ì§€ë©´ 2ë‹¨ê³„ë¡œ ë„˜ì–´ê°€ì‹œë©´ ë©ë‹ˆë‹¤. ğŸ’•`;
            }
            if (highSensitivity && (lastAssistantText.includes('ê°ê°') || lastAssistantText.includes('ìê·¹'))) {
              return `ì‹¤ì œë¡œ í•´ë³´ì‹œê¸° ì¢‹ì€ ê±¸ ${name}ì´ì²˜ëŸ¼ ê°ê°ì´ ì˜ˆë¯¼í•œ ì•„ì´ ê¸°ì¤€ìœ¼ë¡œë§Œ ë§ì”€ë“œë¦´ê²Œìš”.\n\n**ì™¸ì¶œ ì „**\n"ì˜¤ëŠ˜ ê°€ëŠ” ê³³ì€ ì‚¬ëŒì´ ë§ì•„ì„œ ì‹œë„ëŸ¬ìš¸ ìˆ˜ ìˆì–´. ê·€ ë§ˆê°œ ê°€ì ¸ê°ˆê¹Œ?"ì²˜ëŸ¼ í•œ ë²ˆë§Œ ë¯¸ë¦¬ ë§í•´ì£¼ì„¸ìš”. ê°€ì ¸ê°€ê¸°ë¡œ í–ˆìœ¼ë©´ ê°€ë°©ì— ë„£ì–´ ë‘ê³ , ${name}ì´ê°€ "ì‹œë„ëŸ¬ì›Œ" í•˜ë©´ ë°”ë¡œ ì“¸ ìˆ˜ ìˆê²Œ í•´ì£¼ì„¸ìš”.\n\n**ì˜·/ë¨¹ì„ê±°**\níƒœê·¸ëŠ” ë¯¸ë¦¬ ì˜ë¼ ë‘ì‹œê³ , ì˜·ì€ 2~3ë²Œë§Œ ë³´ì—¬ì¤€ ë‹¤ìŒ "ì–´ë–¤ ê²Œ ì¢‹ì•„?" í•˜ê³  ê³¨ë¼ë„ ì¢‹ì•„ìš”. ë¨¹ëŠ” ê²ƒë„ í•œ ë²ˆì— í•œ ê°€ì§€ ì‹ê°Â·ë§›ë§Œ ë„ì…í•˜ê³ , ê±°ë¶€í•˜ë©´ "ì˜¤ëŠ˜ì€ ì´ê±°ë§Œ ìˆì–´. ë‹¤ìŒì— ë‹¤ì‹œ ë³´ì" ì •ë„ë¡œ ë„˜ì–´ê°€ë„ ë¼ìš”.\n\n**ê³¼ë¶€í•˜ ë‚¬ì„ ë•Œ**\në§ì´ ì¤„ê±°ë‚˜ ëˆˆì„ í”¼í•˜ë©´ "ì—¬ê¸° ì‹œë„ëŸ½ì§€? ì¡°ê¸ˆë§Œ ë‚˜ê°€ì„œ ì‰¬ì" í•˜ê³  ë°ë¦¬ê³  ë‚˜ê°€ ì£¼ì„¸ìš”. ì„¤ëª…ë³´ë‹¤ **í™˜ê²½ë§Œ ë°”ê¿”ì£¼ëŠ” ê²ƒ**ì´ ë” ë¹¨ë¦¬ ì§„ì •ë˜ëŠ” ê²½ìš°ê°€ ë§ì•„ìš”.\n\nì‘ì€ ê²ƒë¶€í„° í•˜ë‚˜ì”© ì‹œë„í•´ ë³´ì‹œê³ , ë§‰íˆëŠ” ë¶€ë¶„ ìˆìœ¼ë©´ ê·¸ ìƒí™© ê·¸ëŒ€ë¡œ ì ì–´ ì£¼ì„¸ìš”. ğŸ’•`;
            }
          }
          if (/ì™œ|ì´ìœ |ì›ì¸|ê·¸ëŸ°\s*í–‰ë™|ê·¸ë ‡ê²Œ\s*ë¼/.test(q)) {
            const reason = temperamentType.type === 'ì—ë„ˆìì´ì €' ? 'ë‡Œê°€ ì‘ì€ ìê·¹ì—ë„ ê°•í•˜ê²Œ ë°˜ì‘í•˜ëŠ” ê¸°ì§ˆì´ë¼, ì›í•˜ëŠ” ëŒ€ë¡œ ì•ˆ ë  ë•Œ ê°ì •ì´ í¬ê²Œ ì˜¬ë¼ì™€ìš”.' : temperamentType.type === 'ì‹ ì¤‘íŒŒ' ? 'ìƒˆë¡œìš´ ìƒí™©ì„ ì²œì²œíˆ ê´€ì°°í•œ ë’¤ì—ì•¼ ì°¸ì—¬í•˜ëŠ” ê¸°ì§ˆì´ë¼, ê°‘ì‘ìŠ¤ëŸ¬ìš´ ë³€í™”ë‚˜ ì••ë°•ì´ ìˆìœ¼ë©´ ë¶ˆì•ˆí•´í•´ìš”.' : temperamentType.type === 'ì„¬ì„¸íŒŒ' ? 'ì†Œë¦¬Â·ë¹›Â·ì´‰ê°ì„ ì£¼ë³€ë³´ë‹¤ ë” ì„¸ê²Œ ëŠë¼ëŠ” ê¸°ì§ˆì´ë¼, ìê·¹ì´ ë§ìœ¼ë©´ ë‡Œê°€ "ë„ˆë¬´ ë§ì•„"ë¼ê³  ë°˜ì‘í•´ìš”.' : temperamentType.type === 'íƒí—˜ê°€' ? 'ì›€ì§ì´ê³  íƒìƒ‰í•˜ëŠ” ìš•êµ¬ê°€ ì»¤ì„œ, ê°€ë§Œíˆ ìˆìœ¼ë¼ê³ ë§Œ í•˜ë©´ ì—ë„ˆì§€ê°€ ë°–ìœ¼ë¡œ íŠ€ì–´ë‚˜ì™€ìš”.' : 'ì•„ì´ë§ˆë‹¤ ê¸°ì§ˆì´ ë‹¬ë¼ì„œ, ì–´ë–¤ ì•„ì´ëŠ” ë³€í™”ë‚˜ ìê·¹ì— ë” ë¯¼ê°í•˜ê²Œ ë°˜ì‘í•´ìš”.';
            return `${name}ì´ê°€ ê·¸ë ‡ê²Œ í–‰ë™í•˜ëŠ” ì´ìœ ë¥¼ ê¸°ì§ˆ ìª½ìœ¼ë¡œë§Œ ë§ì”€ë“œë¦¬ë©´ìš”.\n\n${name}ì´ëŠ” **${temperamentType.type}**ì— ê°€ê¹Œìš´ ê¸°ì§ˆì´ì—ìš”. ${reason}\n\nê·¸ë˜ì„œ "ë²„ë¦‡ì´ ë‚˜ìœ ê±° ì•„ë‹ˆì•¼?"ê°€ ì•„ë‹ˆë¼, **ì§€ê¸ˆ ì´ ë‚˜ì´ì— ì´ ê¸°ì§ˆì´ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ë°˜ì‘**ì— ê°€ê¹ë‹¤ê³  ë³´ì‹œë©´ ë¼ìš”. ë‹¤ë§Œ í™˜ê²½ì„ ì¡°ê¸ˆë§Œ ë§ì¶° ì£¼ì‹œë©´â€”ì˜ˆê³ , ì„ íƒ, ì¡°ìš©í•œ ê³µê°„ ê°™ì€ ê²ƒâ€”ê°™ì€ ìƒí™©ì—ì„œë„ í›¨ì”¬ ëœ í˜ë“¤ì–´í•˜ëŠ” ê±¸ ë§ì´ ë´ìš”.\n\në” ê¶ê¸ˆí•˜ì‹  ì  ìˆìœ¼ë©´ í¸í•˜ê²Œ ì´ì–´ì„œ ë¬¼ì–´ë´ ì£¼ì„¸ìš”. ğŸ’•`;
          }
          if (/ë‹¤ë¥¸|ë”|ì¶”ê°€|ë˜\s*ìˆ|ì´ì™¸/.test(q)) {
            return `ì¶”ê°€ë¡œ ë„ì›€ì´ ë  ìˆ˜ ìˆëŠ” ê±¸ ${name}ì´Â·ì—„ë§ˆ ìŠ¤íƒ€ì¼ ê¸°ì¤€ìœ¼ë¡œë§Œ ë§ì”€ë“œë¦´ê²Œìš”.\n\n**${name}ì´ (${temperamentType.type})**\n${temperamentType.type === 'ì—ë„ˆìì´ì €' ? 'ê°ì •ì´ ì˜¬ë¼ì™”ì„ ë•Œ "í™”ë‚¬êµ¬ë‚˜" í•œ ë²ˆ ì¸ì •í•´ ì£¼ì‹  ë’¤, "ì†ì€ ì´ë ‡ê²Œ (ì“°ë‹¤ë“¬ê¸°)"ì²˜ëŸ¼ ëŒ€ì•ˆë§Œ ì§§ê²Œ ì•Œë ¤ì£¼ì‹œë©´ ì¢‹ì•„ìš”.' : temperamentType.type === 'ì‹ ì¤‘íŒŒ' ? 'ìƒˆ ì¥ì†ŒÂ·ìƒˆ ì‚¬ëŒì€ ê°•ìš”í•˜ì§€ ë§ˆì‹œê³ , "ì¼ë‹¨ êµ¬ê²½ë§Œ í•˜ì" "í•˜ê³  ì‹¶ìœ¼ë©´ ë‚˜ì¤‘ì— í•´ë„ ë¼"ë¼ê³ ë§Œ í•´ ì£¼ì…”ë„ ë¶€ë‹´ì´ ì¤„ì–´ìš”.' : temperamentType.type === 'ì„¬ì„¸íŒŒ' ? 'ì¡°ìš©í•œ ì½”ë„ˆë‚˜ ê·€ ë§ˆê°œ ê°™ì€ **ëŒ€ë¹„ìš©**ì„ ë¯¸ë¦¬ ë‘ì–´ ë‘ì‹œë©´, ê³¼ë¶€í•˜ ì „ì— ìŠ¤ìŠ¤ë¡œ ì“°ê²Œ ë„ì™€ì¤„ ìˆ˜ ìˆì–´ìš”.' : 'ì—ë„ˆì§€ê°€ ë„˜ì¹  ë•ŒëŠ” "10ë²ˆ ë›°ì–´ì™€"ì²˜ëŸ¼ ì§§ì€ ë†€ì´ë¡œ í•œ ë²ˆ ë¹¼ ì£¼ì‹œë©´, ê·¸ë‹¤ìŒ ëŒ€í™”ë‚˜ ê·œì¹™ì´ í›¨ì”¬ ì˜ ë“¤ì–´ê°€ìš”.'}\n\n**ì—„ë§ˆ (${parentType.type})**\n${parentType.type === 'ê³„íší˜• ì—„ë§ˆ' ? 'ë£¨í‹´ì´ ê¹¨ì ¸ë„ "ì˜¤ëŠ˜ì€ ì´ë ‡ê²Œ ê°ˆê²Œ" í•˜ëŠ” í”Œëœ B í•˜ë‚˜ë§Œ ì •í•´ ë‘ì‹œë©´ ë§ˆìŒì´ ëœ í”ë“¤ë ¤ìš”.' : parentType.type === 'ê³µê°í˜• ì—„ë§ˆ' ? 'ë°˜ì‘í•˜ê¸° ì „ 10ì´ˆë§Œ ê¸°ë‹¤ë ¤ ë³´ì‹œë©´, ì•„ì´ê°€ ìŠ¤ìŠ¤ë¡œ ì‹œë„í•  í‹ˆì´ ìƒê²¨ìš”.' : 'í•œ ê°€ì§€ë§Œ ì •í•´ ë³´ì‹œëŠ” ê±¸ ì¶”ì²œí•´ìš”. "ì˜¤ëŠ˜ì€ ì˜ˆê³ ë§Œ ê¼­ í•´ë³´ì"ì²˜ëŸ¼ìš”.'}\n\nê¶ê¸ˆí•œ ê²Œ ë” ìˆìœ¼ë©´ ì´ì–´ì„œ ë¬¼ì–´ë´ ì£¼ì„¸ìš”. ğŸ’•`;
          }
        }

        if (/ë–¼|ìš¸|ì§±|ì§œì¦/.test(q)) {
          if (lowAdaptability) {
            return `${name}ì´(${age})ëŠ” ì ì‘ì´ ì¡°ê¸ˆ ëŠë¦° **${temperamentType.type}** ê¸°ì§ˆì´ë¼, ëœ»ëŒ€ë¡œ ì•ˆ ë  ë•Œ ê°ì •ì´ í¬ê²Œ ì˜¬ë¼ì˜¤ëŠ” ê²½ìš°ê°€ ìˆì–´ìš”. ì´ê±´ ${age} ì‹œê¸°ì— ë” ì˜ ë³´ì´ëŠ” íŠ¹ì„±ì´ì—ìš”.\n\n**${name}ì´í•œí…Œ ë§ëŠ” ëŒ€ì‘:**\n1. **ë¯¸ë¦¬ ì˜ˆê³ ** â€” "ì† ì”»ê³  ì‹ ë°œ ì‹ ê³  ë‚˜ê°ˆ ê±°ì•¼"ì²˜ëŸ¼ ë‹¨ê³„ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.\n2. **ì„ íƒê¶Œ** â€” "ì´ê±° í• ë˜, ì €ê±° í• ë˜?"ë¡œ ìŠ¤ìŠ¤ë¡œ ê³ ë¥´ê²Œ í•´ ì£¼ì„¸ìš”.\n3. **ê°ì • ì¸ì •** â€” "${name}ì•„, ì§€ê¸ˆ ì†ìƒí•˜êµ¬ë‚˜" í•œ ë²ˆ ë§í•´ ì£¼ì‹œë©´, ê·¸ë‹¤ìŒ ë§ì´ ì˜ ë“¤ì–´ê°€ìš”.\n\nì—„ë§ˆê°€ ì¼ê´€ë˜ê²Œ ì´ë ‡ê²Œ ë°˜ì‘í•´ ì£¼ì‹œë©´, ${name}ì´ë„ ì ì  "ì˜ˆê³  â†’ ì„ íƒ â†’ ì¸ì •" íë¦„ì— ìµìˆ™í•´ì ¸ìš”. ë” ê¶ê¸ˆí•˜ì‹œë©´ ì´ì–´ì„œ ë¬¼ì–´ë´ ì£¼ì„¸ìš”. ğŸ’•`;
          }
          return `${name}ì´ ê¸°ì§ˆì„ ë³´ë©´ í‰ì†Œì—” ì ì‘ì´ ì˜ë˜ëŠ” í¸ì´ì—ìš”. ê·¸ëŸ´ ë•ŒëŠ” **í”¼ê³¤í•¨Â·ë°°ê³ í””Â·ìê·¹ ê³¼ë‹¤**ë¥¼ ë¨¼ì € ì ê²€í•´ ë³´ì‹œë©´ ì¢‹ì•„ìš”.\n\n**ì²´í¬í•´ ë³´ì‹¤ ê²ƒ:**\nÂ· ë‚®ì Â·ì·¨ì¹¨ ì‹œê°„ì´ ìš”ì¦˜ ííŠ¸ëŸ¬ì§€ì§€ ì•Šì•˜ë‚˜ìš”?\nÂ· ì‹ì‚¬ ì‹œê°„ì´ ë„ˆë¬´ ë“¤ì­‰ë‚ ì­‰í•˜ì§€ëŠ” ì•Šë‚˜ìš”?\nÂ· ìµœê·¼ ì´ì‚¬, ë™ìƒ, ì–´ë¦°ì´ì§‘ ê°™ì€ í° ë³€í™”ëŠ” ì—†ì—ˆë‚˜ìš”?\n\nì´ ì¤‘ í•˜ë‚˜ë§Œ ë§ì•„ë„ ë–¼ì“°ê¸°ê°€ ì¦ì•„ì§ˆ ìˆ˜ ìˆì–´ìš”. ì–´ë–¤ ìƒí™©ì—ì„œ ê°€ì¥ ìì£¼ ê·¸ëŸ°ì§€ ì•Œë ¤ì£¼ì‹œë©´, ê·¸ë•Œë§ˆë‹¤ ì–´ë–»ê²Œ ë§í•´ ì£¼ì‹œë©´ ì¢‹ì„ì§€ê¹Œì§€ êµ¬ì²´ì ìœ¼ë¡œ ì ì–´ ë“œë¦´ê²Œìš”. ğŸ’•`;
        }
        if (/ì |ìˆ˜ë©´|ìê¸°|ì·¨ì¹¨|ì íˆ¬ì •/.test(q)) {
          const regular = childScores[1] > 7;
          return `${name}ì´(${age}) ìˆ˜ë©´ì€ ì§€ê¸ˆ ë‚˜ì´ì— ì •ë§ ì¤‘ìš”í•´ìš”. ${name}ì´ëŠ” ê·œì¹™ì„±ì´ ${regular ? 'ë†’ì€ í¸' : 'ë‚®ì€ í¸'}ì´ë¼, ${regular ? 'ê°™ì€ ì‹œê°„Â·ê°™ì€ ìˆœì„œë§Œ ì§€í‚¤ë©´ 2~3ì£¼ ì•ˆì— ë£¨í‹´ì´ ì¡íˆê¸° ì‰¬ì›Œìš”.' : 'ë§¤ì¼ ì¡°ê¸ˆì”© ë‹¬ë¼ë„ ê´œì°®ì•„ìš”. ëŒ€ì‹  "30ë¶„ ì „ë¶€í„° ë¶ˆ ë„ê¸° â†’ ëª©ìš• â†’ ì±… í•œ ê¶Œ"ì²˜ëŸ¼ **ìˆœì„œ**ë§Œ ë§¤ì¼ ë˜‘ê°™ì´ í•´ ì£¼ì„¸ìš”. 6~8ì£¼ ê¾¸ì¤€íˆ í•˜ì‹œë©´ ì°¨ì´ê°€ ë³´ì—¬ìš”.'}\n\n**ì¶”ì²œ ë£¨í‹´:**\n1. ë§¤ì¼ ë¹„ìŠ·í•œ ì‹œê°„ì— ì¬ìš°ê¸°\n2. 30ë¶„ ì „ë¶€í„° ì¡°ëª… ë‚®ì¶”ê¸°\n3. ëª©ìš•Â·ì±…Â·ì–‘ì¹˜ ë“± ìˆœì„œ ê³ ì •\n4. "ì´ì œ ìëŠ” ì‹œê°„ì´ì•¼" í•œ ë§ˆë””ë¡œ ë§ˆë¬´ë¦¬\n\n${regular ? 'ì§€ê¸ˆë„ ë£¨í‹´ì´ ìˆìœ¼ì‹œë‹¤ë©´, ì‹œê°„ë§Œ ì¡°ê¸ˆë§Œ ë‹¹ê¸°ê±°ë‚˜ ë‹¹ê¸°ì§€ ë§ê³  ìœ ì§€í•´ ë³´ì‹œë©´ ë©ë‹ˆë‹¤.' : 'ì²˜ìŒì—” ì €í•­í•  ìˆ˜ ìˆì–´ìš”. ê·¸ë•ŒëŠ” "ì§€ê¸ˆ ìëŠ” ì‹œê°„ì´ì•¼"ë§Œ ì°¨ë¶„íˆ ë°˜ë³µí•´ ì£¼ì‹œê³ , ë‹¤ìŒ ë‚  ë‹¤ì‹œ ê°™ì€ ìˆœì„œë¡œ ì‹œë„í•´ ë³´ì„¸ìš”.'} ë” ê¶ê¸ˆí•˜ì‹œë©´ ì´ì–´ì„œ ë¬¼ì–´ë´ ì£¼ì„¸ìš”. ğŸ’•`;
        }
        if (/ë°¥|ì‹ì‚¬|ë¨¹|í¸ì‹|ë°¥ê±°ë¶€|ì•¼ì±„|ì±„ì†Œ/.test(q)) {
          const isAboutVegetables = /ì•¼ì±„|ì±„ì†Œ|í¸ì‹/.test(q);
          if (isAboutVegetables) {
            if (highSensitivity) {
              return `ì•¼ì±„ëŠ” ì§ˆê°ì´ë‚˜ ëƒ„ìƒˆê°€ ê°•í•´ì„œ, ${name}ì´ì²˜ëŸ¼ ê°ê°ì´ ì˜ˆë¯¼í•œ í¸ì´ë©´ ê±°ë¶€ê°ì´ ë” í¬ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆì–´ìš”. "ì•ˆ ë¨¹ëŠ” ê²ƒ"ì´ ê³ ì§‘ì´ ì•„ë‹ˆë¼ ëŠë‚Œì´ ë¶ˆí¸í•œ ê²ƒì¼ ìˆ˜ ìˆì–´ìš”. í•œ ê°€ì§€ë§Œ ê³¨ë¼ì„œ(ë‹¹ê·¼ì´ë‚˜ ë¸Œë¡œì½œë¦¬ì²˜ëŸ¼) ë¶€ë“œëŸ½ê²Œ ìµí˜€ í“¨ë ˆì²˜ëŸ¼ ë³´ì—¬ì£¼ì‹œê³ , ${name}ì´ê°€ ì†ìœ¼ë¡œ ë§Œì ¸ ë³´ê±°ë‚˜ ëƒ„ìƒˆë§Œ ë§¡ê²Œ í•´ ë‘ëŠ” ê²ƒë¶€í„° ì‹œì‘í•´ ë³´ì„¸ìš”. 8~15ë²ˆ ì •ë„ ì‹íƒì—ë§Œ ì˜¬ë ¤ë‘ì–´ë„ ìµìˆ™í•´ì§€ë©´ì„œ ì¡°ê¸ˆì”© ë°›ì•„ë“¤ì´ëŠ” ê²½ìš°ê°€ ë§ì•„ìš”. ì˜¤ëŠ˜ì€ "ì´ê±° ìˆì–´"ë§Œ ë§í•˜ê³  ë¨¹ìœ¼ë¼ê³  í•˜ì§€ ì•Šìœ¼ì…”ë„ ë¼ìš”. ğŸ’•`;
            }
            if (lowAdaptability) {
              return `ì•¼ì±„ì²˜ëŸ¼ ìƒˆë¡œìš´ ìŒì‹ì€ ${name}ì´í•œí…Œ ì‹œê°„ì´ ì¡°ê¸ˆ ë” ê±¸ë¦¬ëŠ” í¸ì´ì—ìš”. ê°™ì€ ì•¼ì±„ë¥¼ 15~20ë²ˆ ì •ë„ ì‹íƒì—ë§Œ ì˜¬ë ¤ë‘ì‹œê³  ë¨¹ìœ¼ë¼ê³  í•˜ì§€ ì•Šìœ¼ì…”ë„ ë¼ìš”. ì¢‹ì•„í•˜ëŠ” ìŒì‹ ì˜†ì— ì‘ê²Œ ë†“ì•„ ë‘ì‹œê³  "ì´ê±° ìˆì–´"ë§Œ ë§í•´ ì£¼ì„¸ìš”. ê°•ìš”í• ìˆ˜ë¡ ê±°ë¶€ê°€ ê¸¸ì–´ì§€ë‹ˆê¹Œ, ì˜¤ëŠ˜ ê±°ë¶€í•´ë„ ë‚´ì¼ ë‹¤ì‹œ ì˜¬ë ¤ë§Œ ë‘ì‹œëŠ” ê±¸ 2~3ì£¼ ì´ì–´ê°€ ë³´ì‹œë©´ ì¢‹ì•„ìš”. ğŸ’•`;
            }
            return `${name}ì´(${age})ëŠ” ë°œë‹¬ìƒ "ë‚´ê°€ ê³ ë¥¼ë˜"ê°€ ê°•í•´ì§€ëŠ” ì‹œê¸°ë¼ ë°¥ ê±°ë¶€ê°€ ì¦ì„ ìˆ˜ ìˆì–´ìš”. ì•¼ì±„ëŠ” ë§ì€ ì•„ì´ë“¤ì´ ë‹¨ê³„ì ìœ¼ë¡œ ë°›ì•„ë“¤ì´ëŠ” ìŒì‹ì´ì—ìš”. "ì´ê±° í• ë˜? ì €ê±° í• ë˜?"ë¡œ ë‹¹ê·¼ì´ë‘ ì˜¤ì´ ì¤‘ì—ì„œ ê³¨ë¼ ë³´ê²Œ í•˜ì‹œê±°ë‚˜, ë°¥ ìœ„ì— ì‚´ì§ ì˜¬ë ¤ë§Œ ë‘ê³  ë¨¹ìœ¼ë¼ê³  í•˜ì§€ ì•Šìœ¼ì…”ë„ ë¼ìš”. ê°™ì´ ì•‰ì•„ì„œ ì—„ë§ˆê°€ ë§›ìˆê²Œ ë¨¹ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ì‹œëŠ” ê²ƒë§Œìœ¼ë¡œë„ ë„ì›€ì´ ë©ë‹ˆë‹¤. í•œ ê°€ì§€ë§Œ ì •í•´ì„œ 2ì£¼ ì •ë„ ê¾¸ì¤€íˆ ë³´ì—¬ì£¼ì‹œë‹¤ê°€ ì¡°ê¸ˆ ë‚˜ì•„ì§€ë©´ ê·¸ë‹¤ìŒ ì•¼ì±„ë¥¼ í•˜ë‚˜ ë” ë„ì…í•´ ë³´ì„¸ìš”. ğŸ’•`;
          }
          if (highSensitivity) {
            return `${name}ì´ëŠ” ${temperamentType.type}ë¼ ìŒì‹ì˜ ì§ˆê°Â·ëƒ„ìƒˆÂ·ì˜¨ë„ë¥¼ ë” ì„¸ê²Œ ëŠê»´ìš”. ê·¸ë˜ì„œ "ì•ˆ ë¨¹ëŠ” ê²ƒ"ì´ ê³ ì§‘ì´ ì•„ë‹ˆë¼ ëŠë‚Œì´ ë¶ˆí¸í•œ ê²ƒì¼ ìˆ˜ ìˆì–´ìš”. í•œ ë²ˆì— í•œ ê°€ì§€ ì‹ê°ë§Œ (ë¶€ë“œëŸ¬ìš´ ê²ƒ â†’ ë‹¨ë‹¨í•œ ê²ƒ ìˆœ) ë³´ì—¬ì£¼ì‹œê³ , ${name}ì´ê°€ ì†ìœ¼ë¡œ ë§Œì ¸ ë³´ê²Œ í•´ ì£¼ì„¸ìš”. "ì´ê±° ë¨¹ì„ë˜?"ë§Œ í•˜ê³  ê°•ìš”í•˜ì§€ ì•Šìœ¼ì‹œë©´ ë¼ìš”. ê°™ì€ ìŒì‹ì„ 8~15ë²ˆ ì •ë„ ë³´ì—¬ì£¼ëŠ” ê²ƒë§Œìœ¼ë¡œë„ ìµìˆ™í•¨ì´ ìƒê²¨ìš”. ${age}ì—ëŠ” ìŒì‹ ê±°ë¶€ê°€ í”í•œ ì‹œê¸°ë¼ ${name}ì´ í˜ì´ìŠ¤ì— ë§ì¶° ì²œì²œíˆ ë…¸ì¶œë§Œ í•´ ì£¼ì…”ë„ ì¢‹ì•„ìš”. ğŸ’•`;
          }
          if (lowAdaptability) {
            return `${name}ì´ëŠ” ${temperamentType.type}ë¼ ìƒˆë¡œìš´ ê±¸ ë°›ì•„ë“¤ì´ëŠ” ë° ì‹œê°„ì´ ì¡°ê¸ˆ ë” ê±¸ë ¤ìš”. ìƒˆ ìŒì‹ì€ "ì˜¤ëŠ˜ì€ ì˜†ì—ë§Œ ë‘˜ê²Œ" í•˜ê³  ë¨¹ìœ¼ë¼ê³  í•˜ì§€ ì•Šìœ¼ì…”ë„ ë¼ìš”. 15~20ë²ˆ ì •ë„ ë³´ì—¬ì£¼ì‹œë©´ ë°›ì•„ë“¤ì´ëŠ” ê²½ìš°ê°€ ë§ì•„ìš”. ì¢‹ì•„í•˜ëŠ” ìŒì‹ ì˜†ì— ìƒˆ ê±¸ ë†“ê³  "ì´ê±° ìˆì–´"ë§Œ ë§í•´ ì£¼ì„¸ìš”. ê°•ìš”í• ìˆ˜ë¡ ê±°ë¶€ê°€ ê¸¸ì–´ì§ˆ ìˆ˜ ìˆì–´ìš”. ğŸ’•`;
          }
          return `${name}ì´(${age})ëŠ” ë°œë‹¬ìƒ "ë‚´ê°€ ê³ ë¥¼ë˜"ê°€ ê°•í•´ì§€ëŠ” ì‹œê¸°ì˜ˆìš”. ê·¸ë˜ì„œ ë°¥ ê±°ë¶€ê°€ ì¦ì„ ìˆ˜ ìˆê³ , ì´ê±´ ê¸°ì§ˆë³´ë‹¤ ë‹¨ê³„ì— ê°€ê¹Œìš´ ê²½ìš°ê°€ ë§ì•„ìš”. "ì´ê±° í• ë˜? ì €ê±° í• ë˜?"ë¡œ ì„ íƒê¶Œì„ ì£¼ì‹œê³ , ë¨¹ëŠ” ì–‘ë³´ë‹¤ "ê°™ì´ ì•‰ì•„ì„œ ì‹ì‚¬ ì‹œê°„"ì— ì´ˆì ì„ ë‘ì‹œë©´ ì¢‹ì•„ìš”. 6~12ê°œì›” ì§€ë‚˜ë©´ ë§ì´ ë‚˜ì•„ì§€ëŠ” ê²½ìš°ê°€ ë§ì•„ìš”. ì•¼ì±„ë‚˜ íŠ¹ì • ìŒì‹ì´ í˜ë“œì‹œë©´ ê·¸ê±¸ ë§ì”€í•´ ì£¼ì‹œë©´ ê·¸ë‹¤ìŒ ë°©ë²•ë„ ì´ì–´ì„œ ë§ì”€ë“œë¦´ê²Œìš”. ğŸ’•`;
        }
        if (/ë•Œë¦¬|ê³µê²©|ë°€|ì‹¸ì›€|ì¹œêµ¬.*ë•Œ/.test(q)) {
          if (highActivity) {
            return `${name}ì´ëŠ” **${temperamentType.type}**ë¼ ì›€ì§ì„ ìš•êµ¬ê°€ ì»¤ìš”. ë•Œë¦¬ëŠ” í–‰ë™ì´ "ë‚˜ìœ ì•„ì´"ë¼ì„œë¼ê¸°ë³´ë‹¤ **ì—ë„ˆì§€ê°€ ë°–ìœ¼ë¡œ íŠ€ëŠ” ê²ƒ**ì— ê°€ê¹Œì›Œìš”.\n\n**ë„ì›€ì´ ë˜ëŠ” ê²ƒ:**\nÂ· í•˜ë£¨ 2ì‹œê°„ ê°€ê¹Œì´ ë›°ê¸°Â·ì˜¤ë¥´ê¸°Â·ê³µ ë†€ì´ ê°™ì€ ëŒ€ê·¼ìœ¡ ë†€ì´\nÂ· "ì—¬ê¸°ì„œëŠ” ì•ˆ ë¼. ëŒ€ì‹  ì´ ê³µ 10ë²ˆ ë˜ì ¸ ë´"ì²˜ëŸ¼ **ëŒ€ì²´ í–‰ë™** ì•Œë ¤ì£¼ê¸°\nÂ· ê·œì¹™ì€ ì§§ê³  ëª…í™•í•˜ê²Œ: "ë•Œë¦¬ë©´ ì•„íŒŒ. ì†ì€ ì´ë ‡ê²Œ (ì“°ë‹¤ë“¬ê¸°)"\n\nì—ë„ˆì§€ë¥¼ ë†€ì´ë¡œ ë¹¼ ì£¼ì‹œë©´, ê°™ì€ ìƒí™©ì—ì„œ ëœ íŠ€ì–´ë‚˜ì˜¤ëŠ” ê±¸ ë§ì´ ë´ìš”. ë” ê¶ê¸ˆí•˜ì‹œë©´ ì´ì–´ì„œ ë¬¼ì–´ë´ ì£¼ì„¸ìš”. ğŸ’•`;
          }
          if (childScores[4] > 7) {
            return `${name}ì´ëŠ” ê°ì •ì´ í¬ê²Œ ì˜¬ë¼ì˜¤ëŠ” ê¸°ì§ˆì´ë¼, ë§ë¡œ ëª» í•  ë•Œ ì†ì´ ë¨¼ì € ë‚˜ê°ˆ ìˆ˜ ìˆì–´ìš”. "í™”ë‚¬êµ¬ë‚˜" í•˜ê³  í•œ ë²ˆ ì¸ì •í•´ ì£¼ì‹  ë’¤, "ë•Œë¦¬ë©´ ì•„íŒŒ. í™”ë‚˜ë©´ 'ì—„ë§ˆ í™”ë‚˜!'ë¼ê³  ë§í•´"ì²˜ëŸ¼ **ë§ë¡œ í‘œí˜„í•˜ëŠ” ë²•**ì„ ì•Œë ¤ ì£¼ì‹œë©´ ì¢‹ì•„ìš”.\n\n2~4ì„¸ì¯¤ ë˜ë©´ "ë‚˜ í™”ë‚¬ì–´!"ë¼ê³  ë§í•˜ëŠ” ê±¸ ë°°ìš°ë©´ì„œ, ë•Œë¦¬ëŠ” í–‰ë™ì€ ë§ì´ ì¤„ì–´ë“œëŠ” ê²½ìš°ê°€ ë§ì•„ìš”. ê·¸ë•Œê¹Œì§€ëŠ” ë§ ëŒ€ì‹  ì“°ëŠ” í–‰ë™ì„ **ë°”ë¡œ** "ì´ë ‡ê²Œ ë§í•´ ë³´ì"ë¡œ ë°”ê¿” ì£¼ì‹œë©´ ë¼ìš”. ğŸ’•`;
          }
          return `${name}ì´(${age})ëŠ” ë˜ë˜ë“¤ì²˜ëŸ¼ "ìƒëŒ€ê°€ ì•„í”„ë‹¤"ëŠ” ê±¸ ì•„ì§ ì™„ì „íˆ ì´í•´í•˜ê¸° ì–´ë ¤ìš´ ë‚˜ì´ì˜ˆìš”. ê·¸ë˜ì„œ ë•Œë¦¬ëŠ” í–‰ë™ì´ ë‚˜ì™€ë„ **ì˜ë„ì ì¸ ê³µê²©**ì´ë¼ê¸°ë³´ë‹¤, ê°ì •ì´ë‚˜ í˜¸ê¸°ì‹¬ì´ í–‰ë™ìœ¼ë¡œ ë‚˜ì˜¨ ê²½ìš°ê°€ ë§ì•„ìš”.\n\n**ë°˜ë³µí•´ì„œ ì•Œë ¤ ì£¼ì‹¤ ê²ƒ:**\n"ë•Œë¦¬ë©´ ì•„íŒŒ. ì†ì€ ì´ë ‡ê²Œ (ë¶€ë“œëŸ½ê²Œ ì“°ë‹¤ë“¬ê¸°)" â€” ë§ê³¼ ë™ì‘ì„ ê°™ì´ ë³´ì—¬ ì£¼ì‹œê³ , ê°™ì€ ë§ì„ ì¼ê´€ë˜ê²Œ í•´ ì£¼ì‹œë©´ ì ì°¨ ì¤„ì–´ë“¤ì–´ìš”. ìƒí™©ì´ ë”°ë¡œ ìˆìœ¼ë©´ ë§ì”€í•´ ì£¼ì„¸ìš”. ğŸ’•`;
        }

        const traits = [];
        if (highActivity) traits.push('í™œë™ì„±ì´ ë†’ì•„ ì—ë„ˆì§€ ë°œì‚°ì´ í•„ìš”í•´ìš”');
        if (lowAdaptability) traits.push('ì ì‘ì´ ëŠë ¤ ë³€í™”ì— ì‹œê°„ì´ í•„ìš”í•´ìš”');
        if (highSensitivity) traits.push('ê°ê°ì´ ì˜ˆë¯¼í•´ ìê·¹ ì¡°ì ˆì´ ì¤‘ìš”í•´ìš”');
        const traitText = traits.length ? traits.map(t => `Â· ${t}`).join('\n') : `Â· ${name}ì´ëŠ” ì—¬ëŸ¬ ê¸°ì§ˆì´ ê³ ë¥´ê²Œ ì„ì¸ í¸ì´ì—ìš”.`;
        return `${name}ì´(${age})ì˜ **${temperamentType.type}** ê¸°ì§ˆì„ ê¸°ì¤€ìœ¼ë¡œ ë§ì”€ë“œë¦´ê²Œìš”.\n\nì§€ê¸ˆ ê²ªê³  ê³„ì‹  ìƒí™©ì„ ì´ë ‡ê²Œ ì´í•´í•˜ì‹œë©´ ì¢‹ì•„ìš”:\n${traitText}\n\n${age}ì—ëŠ” ì´ëŸ° í–‰ë™ì´ ë°œë‹¬ ê³¼ì •ì˜ ì¼ë¶€ë¡œ ë‚˜íƒ€ë‚˜ê¸°ë„ í•´ìš”. **"ì¡°ê¸ˆ ë” ì§€ì¼œë³´ì"**ë³´ë‹¤ëŠ”, ${name}ì´í•œí…Œ ë§ëŠ” **í•œ ê°€ì§€ ë°©ë²•**ì„ ì •í•´ì„œ 2~3ì£¼ ê¾¸ì¤€íˆ í•´ ë³´ì‹œëŠ” ê±¸ ì¶”ì²œí•´ìš”. ì˜ˆê³ , ì„ íƒê¶Œ ì£¼ê¸°, ê°ì • ì¸ì • ì¤‘ í•˜ë‚˜ë§Œì´ë¼ë„ ë§¤ì¼ ì ìš©í•´ ë³´ì‹œë‹¤ê°€, "ì´ë ‡ê²Œ í–ˆëŠ”ë° ì´ë ‡ë‹¤"ê³  ì•Œë ¤ ì£¼ì‹œë©´ ê·¸ë‹¤ìŒ ë‹¨ê³„ë„ ê°™ì´ ì§šì–´ ë“œë¦´ê²Œìš”. ğŸ’•`;
      };

      const handleSendMessage = () => {
        if (!currentInput.trim()) return;
        const newMessage = { role: 'user', content: currentInput, timestamp: new Date() };
        const updatedHistory = [...chatHistory, newMessage];
        setChatHistory(updatedHistory);
        setCurrentInput('');
        setIsAnalyzing(true);
        setTimeout(() => {
          let response = generateResponse(currentInput, updatedHistory);
          response = response.replace(/\*\*(.*?)\*\*/g, '$1');
          const aiMessage = { role: 'assistant', content: response, timestamp: new Date() };
          const finalHistory = [...updatedHistory, aiMessage];
          setChatHistory(finalHistory);
          saveToStorage({ chatHistory: finalHistory });
          setIsAnalyzing(false);
        }, 1200);
      };

      const handleChildInfoSubmit = (e) => {
        e.preventDefault();
        if (childInfo.name && childInfo.birthDate) {
          saveToStorage({ childInfo });
          setStep('profile');
        }
      };

      const handleChildAnswer = (score) => {
        const updated = { ...childProfile, [`q${currentQuestion}`]: score };
        setChildProfile(updated);
        saveToStorage({ childProfile: updated });
        if (currentQuestion < temperamentQuestions.length - 1) setCurrentQuestion(currentQuestion + 1);
        else { setStep('parentProfile'); setCurrentQuestion(0); }
      };

      const handleParentAnswer = (score) => {
        const updated = { ...parentProfile, [`p${currentQuestion}`]: score };
        setParentProfile(updated);
        saveToStorage({ parentProfile: updated });
        if (currentQuestion < parentQuestions.length - 1) setCurrentQuestion(currentQuestion + 1);
        else { setStep('behavior'); setCurrentQuestion(0); }
      };

      const handleBehaviorSubmit = () => {
        if (!behaviorInput.trim()) { alert('ê³ ë¯¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'); return; }
        saveToStorage({ behaviorInput });
        setStep('report');
      };

      const handleReset = () => {
        if (confirm('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤. ì •ë§ ì´ˆê¸°í™”í•˜ì‹œê² ì–´ìš”?')) {
          localStorage.removeItem('gwaenchanayo_data');
          window.location.reload();
        }
      };

      const handleStart = () => setStep('childInfo');

      const colorMap = { green: ['var(--mint-muted)','var(--mint)'], red: ['var(--coral-muted)','var(--coral)'], blue: ['var(--mint-muted)','var(--mint)'], orange: ['var(--warm-yellow-light)','var(--warm-yellow-dark)'], purple: ['var(--mint-muted)','var(--mint)'], teal: ['var(--mint-muted)','var(--mint)'] };
      const parentColorMap = { blue: ['var(--mint-muted)','var(--mint)'], purple: ['var(--mint-muted)','var(--mint)'], pink: ['var(--coral-muted)','var(--coral)'], green: ['var(--mint-muted)','var(--mint)'], teal: ['var(--mint-muted)','var(--mint)'] };

      return (
        <div className="min-h-screen bg-[var(--warm-yellow)]">
          {step === 'welcome' && (
            <div className="min-h-screen flex items-center justify-center p-4 sm:p-6">
              <div className="max-w-2xl w-full">
                <div className="text-center mb-6 sm:mb-8" style={{ animation: 'fadeIn 1s ease-in' }}>
                  <div className="inline-block mb-4 sm:mb-6 relative">
                    <Baby className="w-16 h-16 sm:w-20 sm:h-20 text-[var(--coral-dark)]" style={{ animation: 'bounce 2s ease-in-out infinite' }} />
                    <Sparkles className="w-6 h-6 sm:w-8 sm:h-8 text-[var(--warm-yellow-dark)] absolute -top-2 -right-2" style={{ animation: 'spin 3s linear infinite' }} />
                  </div>
                  <h1 className="text-4xl sm:text-5xl md:text-6xl font-bold mb-3 sm:mb-4 text-[var(--coral-dark)] leading-tight">ì•„ì´ ì—¬í–‰</h1>
                  <p className="text-base sm:text-lg md:text-xl text-gray-600 mb-2 px-1">&#39;ì™œ ì´ëŸ´ê¹Œ?&#39;ë¥¼ &#39;ê·¸ë˜ì„œ ê·¸ë¬êµ¬ë‚˜&#39;ë¡œ ë°”ê¿”ì£¼ëŠ”,<br />ì•„ì´ ê¸°ì§ˆ ê¸°ë°˜ í–‰ë™ ê°€ì´ë“œ ì„œë¹„ìŠ¤</p>
                  <p className="text-lg sm:text-xl md:text-2xl text-gray-700 font-medium mt-3 sm:mt-4 px-2 leading-snug">ì•„ì´ì˜ ë§ˆìŒ ì§€ë„ë¥¼ ë”°ë¼, í•¨ê»˜ ì—¬í–‰í•´ë³¼ê¹Œìš”?</p>
                </div>
                <div className="bg-white/90 backdrop-blur-sm rounded-2xl sm:rounded-[32px] p-5 sm:p-8 md:p-10 shadow-xl border-2 sm:border-4 border-[var(--coral-light)] mb-6 sm:mb-8">
                  <div className="space-y-4 sm:space-y-6">
                    <div className="flex items-start gap-3 sm:gap-4">
                      <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--coral)] flex items-center justify-center flex-shrink-0"><Heart className="w-5 h-5 sm:w-6 sm:h-6 text-white" /></div>
                      <div><h3 className="text-base sm:text-lg md:text-xl font-bold text-gray-800 mb-1 sm:mb-2">ì•„ì´ì˜ ê¸°ì§ˆì„ ì •ë°€ ë¶„ì„í•´ìš”</h3><p className="text-sm sm:text-base text-gray-600 leading-relaxed">9ê°€ì§€ ê¸°ì§ˆ ì°¨ì›ì„ ì¸¡ì •í•˜ì—¬ ìš°ë¦¬ ì•„ì´ë§Œì˜ ê³ ìœ í•œ ì„±í–¥ì„ íŒŒì•…í•´ìš”.</p></div>
                    </div>
                    <div className="flex items-start gap-3 sm:gap-4">
                      <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--warm-yellow-soft)] flex items-center justify-center flex-shrink-0"><MessageCircle className="w-5 h-5 sm:w-6 sm:h-6 text-[var(--warm-yellow-dark)]" /></div>
                      <div><h3 className="text-base sm:text-lg md:text-xl font-bold text-gray-800 mb-1 sm:mb-2">ì–¸ì œë“  ë¬¼ì–´ë³´ì„¸ìš”</h3><p className="text-sm sm:text-base text-gray-600 leading-relaxed">ê¸°ì§ˆ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒí™©ë³„ ë§ì¶¤ ì¡°ì–¸ì„ ê³„ì† ë°›ì„ ìˆ˜ ìˆì–´ìš”.</p></div>
                    </div>
                    <div className="flex items-start gap-3 sm:gap-4">
                      <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--mint)] flex items-center justify-center flex-shrink-0"><Sparkles className="w-5 h-5 sm:w-6 sm:h-6 text-white" /></div>
                      <div><h3 className="text-base sm:text-lg md:text-xl font-bold text-gray-800 mb-1 sm:mb-2">ì„±ì¥ ê¸°ë¡ì´ ìŒ“ì—¬ìš”</h3><p className="text-sm sm:text-base text-gray-600 leading-relaxed">ê³ ë¯¼ê³¼ ë‹µë³€ì´ ëˆ„ì ë˜ì–´ ì•„ì´ì˜ ë³€í™”ë¥¼ ì¶”ì í•  ìˆ˜ ìˆì–´ìš”.</p></div>
                    </div>
                  </div>
                </div>
                {childInfo.name && Object.keys(childProfile).length > 0 ? (
                  <div className="space-y-3 sm:space-y-4">
                    <button onClick={() => setStep('chat')} className="w-full bg-[var(--coral)] text-white text-lg sm:text-xl md:text-2xl font-bold py-4 sm:py-5 md:py-6 rounded-2xl sm:rounded-[28px] hover:opacity-90 hover:shadow-lg active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-2 sm:gap-3 min-h-[48px]">
                      <MessageCircle className="w-6 h-6 sm:w-7 sm:h-7" /><span>{childInfo.name}ì´ ìƒë‹´ ê³„ì†í•˜ê¸°</span>
                    </button>
                    <button onClick={handleStart} className="w-full bg-white border-2 sm:border-3 border-[var(--coral)] text-[var(--coral-dark)] text-base sm:text-lg md:text-xl font-bold py-4 sm:py-5 rounded-2xl sm:rounded-[28px] hover:bg-[var(--coral-muted)] hover:shadow-lg active:scale-[0.98] transition-all duration-300 min-h-[48px]">ìƒˆë¡œìš´ ì•„ì´ë¡œ ì‹œì‘í•˜ê¸°</button>
                  </div>
                ) : (
                  <button onClick={handleStart} className="w-full bg-[var(--coral)] text-white text-lg sm:text-xl md:text-2xl font-bold py-4 sm:py-5 md:py-6 rounded-2xl sm:rounded-[28px] hover:opacity-90 hover:shadow-lg active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-2 sm:gap-3 min-h-[48px]">
                    <span>ì§€ê¸ˆ ì‹œì‘í•˜ê¸°</span><ArrowRight className="w-6 h-6 sm:w-7 sm:h-7" />
                  </button>
                )}
                <p className="text-center text-xs sm:text-sm text-gray-500 mt-4 sm:mt-6">â±ï¸ ì•½ 5ë¶„ ì†Œìš” Â· ë°ì´í„°ëŠ” ê¸°ê¸°ì— ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤</p>
              </div>
            </div>
          )}

          {step === 'childInfo' && (
            <div className="min-h-screen flex items-center justify-center p-4 sm:p-6">
              <div className="max-w-2xl w-full">
                <div className="bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-[32px] p-5 sm:p-8 md:p-10 shadow-xl border-2 sm:border-4 border-[var(--coral-light)]">
                  <div className="text-center mb-6 sm:mb-8">
                    <Baby className="w-14 h-14 sm:w-16 sm:h-16 text-[var(--coral-dark)] mx-auto mb-3 sm:mb-4" />
                    <h2 className="text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-2 sm:mb-3 leading-snug px-1">ì•„ì´ì˜ ë§ˆìŒì„ ì•Œì•„ê°€ëŠ” ì—¬í–‰ì„<br />ì‹œì‘í•´ë³¼ê¹Œìš”?</h2>
                    <p className="text-sm sm:text-base text-gray-600">ì´ë¦„ê³¼ ìƒë…„ì›”ì¼ì„ ì•Œë ¤ì£¼ì‹œë©´, ë” ì •í™•í•œ ë¶„ì„ì´ ê°€ëŠ¥í•´ìš”.</p>
                  </div>
                  <form onSubmit={handleChildInfoSubmit} className="space-y-4 sm:space-y-6">
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">ì•„ì´ ì´ë¦„</label>
                      <input type="text" value={childInfo.name} onChange={(e) => setChildInfo({ ...childInfo, name: e.target.value })} placeholder="ì˜ˆ: ì§€ìš°" className="w-full p-3 sm:p-4 border-2 border-[var(--coral-light)] rounded-xl sm:rounded-[20px] text-base sm:text-lg focus:outline-none focus:border-[var(--coral)] transition-colors min-h-[48px]" required />
                    </div>
                    <div>
                      <label className="block text-sm font-medium text-gray-700 mb-2">ìƒë…„ì›”ì¼</label>
                      <input type="date" value={childInfo.birthDate} onChange={(e) => setChildInfo({ ...childInfo, birthDate: e.target.value })} max={new Date().toISOString().split('T')[0]} className="w-full p-3 sm:p-4 border-2 border-[var(--coral-light)] rounded-xl sm:rounded-[20px] text-base sm:text-lg focus:outline-none focus:border-[var(--coral)] transition-colors min-h-[48px]" required />
                      <p className="text-xs sm:text-sm text-gray-500 mt-2">ğŸ’¡ ì •í™•í•œ ì›”ë ¹ ê³„ì‚°ì„ ìœ„í•´ ìƒë…„ì›”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
                    </div>
                    <button type="submit" className="w-full bg-[var(--coral)] text-white text-base sm:text-lg md:text-xl font-bold py-4 sm:py-5 rounded-xl sm:rounded-[24px] hover:opacity-90 hover:shadow-lg active:scale-[0.98] transition-all duration-300 min-h-[48px]">ë‹¤ìŒìœ¼ë¡œ</button>
                  </form>
                </div>
              </div>
            </div>
          )}

          {step === 'profile' && (
            <div className="min-h-screen flex items-center justify-center p-4 sm:p-6">
              <div className="max-w-3xl w-full">
                <div className="mb-4 sm:mb-8">
                  <div className="flex justify-between mb-2 sm:mb-3"><span className="text-xs sm:text-sm font-medium text-gray-600">{childInfo.name}ì´ì˜ ë§ˆìŒ ì—¬í–‰ {currentQuestion + 1}/{temperamentQuestions.length}</span><span className="text-xs sm:text-sm font-medium text-[var(--coral-dark)]">{Math.round(((currentQuestion + 1) / temperamentQuestions.length) * 100)}%</span></div>
                  <div className="h-2 sm:h-3 bg-gray-200 rounded-full overflow-hidden"><div className="h-full bg-[var(--coral)] transition-all duration-500 rounded-full" style={{ width: `${((currentQuestion + 1) / temperamentQuestions.length) * 100}%` }} /></div>
                </div>
                <div className="bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-[32px] p-5 sm:p-8 md:p-10 shadow-xl border-2 sm:border-4 border-[var(--warm-yellow-soft)]" style={{ animation: 'slideUp 0.5s ease-out' }}>
                  <div className="text-center mb-6 sm:mb-8">
                    <span className="inline-block px-4 sm:px-6 py-1.5 sm:py-2 bg-[var(--warm-yellow-light)] text-[var(--warm-yellow-dark)] rounded-full text-xs sm:text-sm font-medium mb-3 sm:mb-4">{temperamentQuestions[currentQuestion].dimension}</span>
                    <h2 className="text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 leading-snug sm:leading-relaxed mb-2 sm:mb-3 px-1 whitespace-pre-line">{temperamentQuestions[currentQuestion].question.replace('{{name}}', childInfo.name)}</h2>
                    <p className="text-xs sm:text-sm text-gray-500 italic">{temperamentQuestions[currentQuestion].description}</p>
                  </div>
                  <div className="space-y-2 sm:space-y-3">
                    {temperamentQuestions[currentQuestion].options.map((option, idx) => (
                      <button key={idx} onClick={() => handleChildAnswer(option.score)} className="w-full p-4 sm:p-5 bg-[var(--coral-muted)] hover:bg-[var(--coral-light)] border-2 border-[var(--coral-light)] rounded-xl sm:rounded-[20px] text-left transition-all duration-300 hover:scale-[1.01] active:scale-[0.99] hover:shadow-xl group min-h-[52px]">
                        <div className="flex items-center gap-2 sm:gap-3">
                          <span className="text-2xl sm:text-3xl flex-shrink-0">{option.emoji}</span>
                          <span className="text-sm sm:text-base text-gray-700 group-hover:text-gray-900 font-medium flex-1 leading-relaxed text-left">{option.text}</span>
                          <ArrowRight className="w-4 h-4 sm:w-5 sm:h-5 text-[var(--coral-dark)] opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0" />
                        </div>
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          )}

          {step === 'parentProfile' && (
            <div className="min-h-screen flex items-center justify-center p-4 sm:p-6">
              <div className="max-w-3xl w-full">
                <div className="mb-4 sm:mb-8">
                  <div className="flex justify-between mb-2 sm:mb-3"><span className="text-xs sm:text-sm font-medium text-gray-600">ì–‘ìœ¡ì ì„±í–¥ ê²€ì‚¬ {currentQuestion + 1}/{parentQuestions.length}</span><span className="text-xs sm:text-sm font-medium text-[var(--mint-dark)]">{Math.round(((currentQuestion + 1) / parentQuestions.length) * 100)}%</span></div>
                  <div className="h-2 sm:h-3 bg-gray-200 rounded-full overflow-hidden"><div className="h-full bg-[var(--mint)] transition-all duration-500 rounded-full" style={{ width: `${((currentQuestion + 1) / parentQuestions.length) * 100}%` }} /></div>
                </div>
                <div className="bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-[32px] p-5 sm:p-8 md:p-10 shadow-xl border-2 sm:border-4 border-[var(--mint-light)]">
                  <div className="text-center mb-6 sm:mb-8">
                    <span className="inline-block px-4 sm:px-6 py-1.5 sm:py-2 bg-[var(--mint-muted)] text-[var(--mint-dark)] rounded-full text-xs sm:text-sm font-medium mb-3 sm:mb-4">{parentQuestions[currentQuestion].dimension}</span>
                    <h2 className="text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 leading-snug sm:leading-relaxed mb-2 sm:mb-3 px-1 whitespace-pre-line">{parentQuestions[currentQuestion].question}</h2>
                    <p className="text-xs sm:text-sm text-gray-500 italic">{parentQuestions[currentQuestion].description}</p>
                  </div>
                  <div className="space-y-2 sm:space-y-3">
                    {parentQuestions[currentQuestion].options.map((option, idx) => (
                      <button key={idx} onClick={() => handleParentAnswer(option.score)} className="w-full p-4 sm:p-5 bg-[var(--mint-muted)] hover:bg-[var(--mint-light)] border-2 border-[var(--mint-light)] rounded-xl sm:rounded-[20px] text-left transition-all duration-300 hover:scale-[1.01] active:scale-[0.99] hover:shadow-xl group min-h-[52px]">
                        <div className="flex items-center justify-between gap-3">
                          <span className="text-sm sm:text-base text-gray-700 group-hover:text-gray-900 font-medium leading-relaxed flex-1">{option.text}</span>
                          <ArrowRight className="w-4 h-4 sm:w-5 sm:h-5 text-[var(--mint-dark)] opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0" />
                        </div>
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          )}

          {step === 'behavior' && (
            <div className="min-h-screen flex items-center justify-center p-4 sm:p-6">
              <div className="max-w-3xl w-full">
                <div className="bg-white/95 backdrop-blur-sm rounded-2xl sm:rounded-[32px] p-5 sm:p-8 md:p-10 shadow-xl border-2 sm:border-4 border-[var(--warm-yellow-soft)]">
                  <div className="text-center mb-5 sm:mb-8">
                    <MessageCircle className="w-14 h-14 sm:w-16 sm:h-16 text-[var(--warm-yellow-dark)] mx-auto mb-3 sm:mb-4" />
                    <h2 className="text-xl sm:text-2xl md:text-3xl font-bold text-gray-800 mb-2 sm:mb-3 leading-snug px-1">ìš”ì¦˜ {childInfo.name}ì´,<br />ì–´ë–¤ í–‰ë™ì´ ì œì¼ í˜ë“œì‹ ê°€ìš”?</h2>
                    <p className="text-sm sm:text-base text-gray-600">êµ¬ì²´ì ìœ¼ë¡œ ì ì–´ì£¼ì‹œë©´ ë” ì •í™•í•œ ì¡°ì–¸ì„ ë“œë¦´ ìˆ˜ ìˆì–´ìš”.</p>
                  </div>
                  <div className="space-y-3 sm:space-y-4 mb-4 sm:mb-6">
                    <div className="bg-[var(--warm-yellow-light)] rounded-xl sm:rounded-[20px] p-4 sm:p-5 border-2 border-[var(--warm-yellow-soft)]">
                      <p className="text-xs sm:text-sm text-[var(--warm-yellow-dark)] font-medium mb-2 sm:mb-3">ğŸ’¡ ì´ë ‡ê²Œ ì ì–´ë³´ì„¸ìš”:</p>
                      <ul className="text-xs sm:text-sm text-gray-700 space-y-1.5 sm:space-y-2 leading-relaxed">
                        <li>â€¢ "ë§ˆíŠ¸ì—ì„œ ê³¼ì ì‚¬ë‹¬ë¼ê³  ë°”ë‹¥ì— ë“œëŸ¬ëˆ„ì›Œ ìš¸ì–´ìš”"</li>
                        <li>â€¢ "ë°¤ë§ˆë‹¤ ì íˆ¬ì •ì´ ì‹¬í•´ì„œ 2ì‹œê°„ì”© ì•ˆ ììš”"</li>
                        <li>â€¢ "ì–´ë¦°ì´ì§‘ ë“±ì›í•  ë•Œë§ˆë‹¤ ìš¸ë©´ì„œ ë–¼ë¥¼ ì¨ìš”"</li>
                        <li>â€¢ "ë™ìƒì„ ë•Œë¦¬ê³  ë°€ì³ìš”"</li>
                      </ul>
                    </div>
                    <p className="text-xs sm:text-sm font-medium text-gray-700 mb-2">ìì£¼ ìˆëŠ” ê³ ë¯¼ì„ ë¹ ë¥´ê²Œ ì„ íƒí•´ë³´ì„¸ìš”</p>
                    <div className="grid grid-cols-2 gap-2 sm:gap-3">
                      {['ë–¼ì“°ê³  ìš¸ì–´ìš”', 'ì ì„ ì•ˆ ììš”', 'ë°¥ì„ ì•ˆ ë¨¹ì–´ìš”', 'ì¹œêµ¬ë¥¼ ë•Œë ¤ìš”', 'ë‚¯ì„  ì‚¬ëŒë§Œ ë³´ë©´ ìš¸ì–´ìš”', 'ì˜· ì…ê¸°ë¥¼ ê±°ë¶€í•´ìš”'].map((example, idx) => (
                        <button
                          key={idx}
                          type="button"
                          onClick={() => setBehaviorInput(example)}
                          className="p-3 sm:p-4 bg-[var(--warm-yellow-light)] border-2 border-[var(--warm-yellow-soft)] rounded-xl sm:rounded-[16px] text-xs sm:text-sm text-gray-700 font-medium hover:bg-[var(--warm-yellow-soft)] hover:border-[var(--warm-yellow-dark)] transition-all text-center min-h-[44px]"
                        >
                          {example}
                        </button>
                      ))}
                    </div>
                  </div>
                  <textarea value={behaviorInput} onChange={(e) => setBehaviorInput(e.target.value)} placeholder={`ì˜ˆ: ${childInfo.name}ì´ê°€ ëª©ìš•í•˜ê¸° ì‹«ë‹¤ê³  ë§¤ì¼ ìš¸ì–´ìš”. ì–µì§€ë¡œ í•˜ë©´ ë” ì‹¬í•˜ê²Œ ìš¸ê³ ...`} className="w-full h-32 sm:h-40 p-4 sm:p-5 border-2 border-[var(--warm-yellow-soft)] rounded-xl sm:rounded-[20px] text-base sm:text-lg focus:outline-none focus:border-[var(--warm-yellow-dark)] transition-colors resize-none" />
                  <div className="flex gap-3 sm:gap-4 mt-4 sm:mt-6">
                    <button onClick={() => { setStep('parentProfile'); setCurrentQuestion(parentQuestions.length - 1); }} className="px-4 sm:px-6 py-3 sm:py-4 bg-white border-2 border-gray-300 text-gray-700 text-sm sm:text-base font-bold rounded-xl sm:rounded-[20px] hover:bg-gray-50 transition-all min-h-[48px]">â† ì´ì „</button>
                    <button onClick={() => { if (behaviorInput.trim()) { saveToStorage({ behaviorInput }); setStep('report'); } else alert('ê³ ë¯¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš” ğŸ™'); }} className="flex-1 bg-[var(--warm-yellow-dark)] text-white text-base sm:text-lg md:text-xl font-bold py-3 sm:py-4 rounded-xl sm:rounded-[20px] hover:opacity-90 hover:shadow-lg active:scale-[0.98] transition-all duration-300 min-h-[48px]">ë¶„ì„ ê²°ê³¼ ë³´ê¸° â†’</button>
                  </div>
                  <p className="text-center text-xs sm:text-sm text-gray-500 mt-3 sm:mt-4">ğŸ’¬ ë‚˜ì¤‘ì— ì±„íŒ…ì—ì„œë„ ì–¸ì œë“  ì§ˆë¬¸í•  ìˆ˜ ìˆì–´ìš”</p>
                </div>
              </div>
            </div>
          )}

          {step === 'report' && (() => {
            const result = analyzeTemperament();
            const tc = colorMap[result.temperamentType.color] || colorMap.teal;
            const pc = parentColorMap[result.parentType.color] || parentColorMap.teal;
            return (
            <div className="min-h-screen p-4 sm:p-6 py-8 sm:py-12 bg-[var(--warm-yellow)]">
              <div className="max-w-4xl mx-auto">
                <div className="text-center mb-8 sm:mb-12" style={{ animation: 'fadeIn 1s ease-in' }}>
                  <div className="inline-block mb-4 sm:mb-6 relative">
                    <div className="w-20 h-20 sm:w-24 sm:h-24 rounded-full bg-[var(--coral)] flex items-center justify-center"><Heart className="w-10 h-10 sm:w-12 sm:h-12 text-white" /></div>
                    <Sparkles className="w-8 h-8 sm:w-10 sm:h-10 text-[var(--warm-yellow-dark)] absolute -top-2 -right-2" style={{ animation: 'spin 3s linear infinite' }} />
                  </div>
                  <h1 className="text-3xl sm:text-4xl md:text-5xl font-bold mb-3 sm:mb-4 text-[var(--coral-dark)] leading-tight">ì•„ì´ ì—¬í–‰</h1>
                  <p className="text-lg sm:text-xl md:text-2xl text-gray-700 font-medium mb-2 leading-snug">ì˜¤ëŠ˜, ì•„ì´ì˜ ë§ˆìŒ ì§€ë„ë¥¼ í•¨ê»˜ í¼ì³ë´…ë‹ˆë‹¤.</p>
                  <p className="text-base sm:text-lg md:text-xl text-gray-500">{childInfo.name}ì´, {getChildAge()}</p>
                </div>
                <div className="bg-white rounded-2xl sm:rounded-[32px] p-5 sm:p-8 md:p-10 shadow-xl border-2 sm:border-4 border-[var(--coral-light)] mb-6 sm:mb-8">
                  <div className="text-center mb-6 sm:mb-10">
                    <div className="inline-block px-5 sm:px-8 py-3 sm:py-4 rounded-xl sm:rounded-[24px] mb-3 sm:mb-4" style={{ backgroundColor: tc[0], border: '2px solid', borderColor: tc[1] }}>
                      <div className="flex items-center gap-2 sm:gap-3">
                        <div className="text-left"><h3 className="text-xl sm:text-2xl font-bold text-gray-800">{result.temperamentType.type}</h3><p className="text-xs sm:text-sm text-gray-600">{result.temperamentType.english}</p></div>
                      </div>
                    </div>
                    <p className="text-sm sm:text-base text-gray-600 mt-2 leading-relaxed px-1">{result.temperamentType.description}</p>
                  </div>
                  <div className="mb-6 sm:mb-10 pb-6 sm:pb-10 border-b-2 border-dashed border-[var(--coral-light)]">
                    <div className="flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6">
                      <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--coral)] flex items-center justify-center flex-shrink-0"><BookOpen className="w-5 h-5 sm:w-6 sm:h-6 text-white" /></div>
                      <h2 className="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">{childInfo.name}ì´ëŠ” ì–´ë–¤ ì•„ì´ì¸ê°€ìš”?</h2>
                    </div>
                    <div className="bg-[var(--coral-muted)] rounded-xl sm:rounded-[24px] p-5 sm:p-8 border-2 border-[var(--coral-light)]">
                      <p className="text-sm sm:text-base md:text-lg leading-relaxed text-gray-700" dangerouslySetInnerHTML={{ __html: result.interpretation.replace(/\*\*(.*?)\*\*/g, '<strong style="color:var(--coral-dark);font-weight:700">$1</strong>') }} />
                      <p className="text-sm text-gray-600 leading-relaxed mt-4 pt-4 border-t border-[var(--coral-light)]">
                        Thomas & Chess(1977)ì˜ ë‰´ìš• ì¢…ë‹¨ ì—°êµ¬ì— ë”°ë¥´ë©´ ê¸°ì§ˆì€ ìƒí›„ ì´ˆê¸°ë¶€í„° ê´€ì°°ë˜ëŠ” ì„ ì²œì  ì„±í–¥ì…ë‹ˆë‹¤. Rothbart & Bates(2006)ëŠ” ê¸°ì§ˆì„ &#39;ìƒë¬¼í•™ì  ê¸°ë°˜ì˜ ì •ì„œÂ·ì£¼ì˜Â·í™œë™ì„± ê°œì¸ì°¨&#39;ë¡œ ì •ì˜í•˜ë©°, ì–‘ìœ¡ ë°©ì‹ì´ ì•„ë‹Œ ì•„ì´ ê³ ìœ ì˜ íŠ¹ì„±ì„ì„ ê°•ì¡°í•©ë‹ˆë‹¤.
                      </p>
                    </div>
                  </div>
                  <div className="mb-6 sm:mb-10 pb-6 sm:pb-10 border-b-2 border-dashed border-[var(--mint-light)]">
                    <div className="bg-[var(--mint-muted)] rounded-xl sm:rounded-[24px] p-5 sm:p-8 border-2 border-[var(--mint-light)]">
                      <h3 className="text-base sm:text-lg md:text-xl font-bold text-gray-800 mb-4 sm:mb-6 flex items-center">
                        <Baby className="w-5 h-5 sm:w-6 sm:h-6 mr-2 text-[var(--mint-dark)] flex-shrink-0" />
                        {childInfo.name}ì´ì˜ ê¸°ì§ˆ í”„ë¡œí•„
                      </h3>
                      <div className="space-y-4">
                        {temperamentQuestions.map((q, idx) => (
                          <div key={idx}>
                            <div className="flex justify-between mb-2"><span className="text-sm font-medium text-gray-700">{q.dimension}</span><span className="text-sm font-bold text-[var(--mint-dark)]">{result.childScores[idx]}/10</span></div>
                            <div className="h-3 bg-gray-200 rounded-full overflow-hidden"><div className="h-full bg-[var(--mint)] rounded-full transition-all duration-1000" style={{ width: `${(result.childScores[idx] / 10) * 100}%` }} /></div>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                  <div className="mb-6 sm:mb-10 pb-6 sm:pb-10 border-b-2 border-dashed border-[var(--mint-light)]">
                    <div className="flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6">
                      <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--mint)] flex items-center justify-center flex-shrink-0"><User className="w-5 h-5 sm:w-6 sm:h-6 text-white" /></div>
                      <h2 className="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">ì—„ë§ˆëŠ” ì–´ë–¤ ìœ¡ì•„ ìŠ¤íƒ€ì¼ì¸ê°€ìš”?</h2>
                    </div>
                    <div className="text-center mb-4 sm:mb-6">
                      <div className="inline-block px-5 sm:px-8 py-3 sm:py-4 rounded-xl sm:rounded-[24px]" style={{ backgroundColor: pc[0], border: '2px solid', borderColor: pc[1] }}>
                        <div className="flex items-center gap-2 sm:gap-3">
                          <div className="text-left"><h3 className="text-lg sm:text-xl font-bold text-gray-800">{result.parentType.type}</h3><p className="text-xs sm:text-sm text-gray-600">{result.parentType.english}</p></div>
                        </div>
                      </div>
                      <p className="text-sm sm:text-base text-gray-600 mt-2 sm:mt-3 px-1">{result.parentType.description}</p>
                    </div>
                    <div className="bg-[var(--mint-muted)] rounded-xl sm:rounded-[24px] p-5 sm:p-8 border-2 border-[var(--mint-light)]">
                      <p className="text-sm sm:text-base md:text-lg leading-relaxed text-gray-700 whitespace-pre-line" dangerouslySetInnerHTML={{ __html: result.parentAnalysis.replace(/\*\*(.*?)\*\*/g, '<strong style="color:var(--mint-dark);font-weight:700">$1</strong>') }} />
                      <p className="text-xs sm:text-sm text-gray-600 leading-relaxed mt-4 pt-4 border-t border-[var(--mint-light)]">
                        ë°˜ì‘ì„±(ì˜¨ì •)ê³¼ ìš”êµ¬ë„(í†µì œ)ê°€ ê· í˜• ì¡íŒ ì–‘ìœ¡ ìŠ¤íƒ€ì¼ì€ ì•„ë™ì˜ ì‚¬íšŒì Â·ì •ì„œì  ë°œë‹¬ì— ê¸ì •ì  ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆì–´ìš”.
                      </p>
                    </div>
                    <div className="mt-4 sm:mt-6 bg-white rounded-xl sm:rounded-[20px] p-4 sm:p-6 border-2 border-[var(--mint-light)]">
                      <h3 className="text-base sm:text-lg font-bold text-gray-800 mb-3 sm:mb-4">ì—„ë§ˆì˜ ì–‘ìœ¡ ì„±í–¥ í”„ë¡œí•„</h3>
                      <div className="space-y-3">
                        {parentQuestions.map((q, idx) => (
                          <div key={idx}>
                            <div className="flex justify-between mb-1">
                              <span className="text-sm font-medium text-gray-700">{q.dimension}</span>
                              <span className="text-sm font-bold text-[var(--mint-dark)]">{result.parentScores[idx]}/10</span>
                            </div>
                            <div className="h-2 bg-gray-200 rounded-full overflow-hidden">
                              <div className="h-full bg-[var(--mint)] rounded-full transition-all duration-1000" style={{ width: `${(result.parentScores[idx] / 10) * 100}%` }} />
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                  {result.concernAnalysis && behaviorInput && (
                    <div className="mb-6 sm:mb-10 pb-6 sm:pb-10 border-b-2 border-dashed border-[var(--mint-light)]">
                      <div className="flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6">
                        <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--mint)] flex items-center justify-center flex-shrink-0"><MessageCircle className="w-5 h-5 sm:w-6 sm:h-6 text-white" /></div>
                        <h2 className="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">ì—„ë§ˆì˜ ê³ ë¯¼</h2>
                      </div>
                      <div className="bg-[var(--mint-muted)] rounded-xl sm:rounded-[24px] p-5 sm:p-8 border-2 border-[var(--mint-light)]">
                        <div className="bg-white rounded-xl sm:rounded-[16px] p-3 sm:p-4 mb-3 sm:mb-4"><p className="text-xs sm:text-sm text-[var(--mint-dark)] font-medium mb-2">ì—„ë§ˆê°€ ì ì–´ì£¼ì‹  ê³ ë¯¼</p><p className="text-sm sm:text-base text-gray-700 italic leading-relaxed">"{behaviorInput}"</p></div>
                        <p className="text-sm sm:text-base md:text-lg leading-relaxed text-gray-700 whitespace-pre-line" dangerouslySetInnerHTML={{ __html: result.concernAnalysis.replace(/\*\*(.*?)\*\*/g, '<strong style="color:var(--mint-dark);font-weight:700">$1</strong>') }} />
                      </div>
                    </div>
                  )}
                  <div className="mb-6 sm:mb-10 pb-6 sm:pb-10 border-b-2 border-dashed border-[var(--mint-light)]">
                    <div className="flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6">
                      <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--mint)] flex items-center justify-center flex-shrink-0"><Sparkles className="w-5 h-5 sm:w-6 sm:h-6 text-white" /></div>
                      <h2 className="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">ë°”ë¡œ ì“¸ ìˆ˜ ìˆëŠ” ëŒ€í™”ë²•</h2>
                    </div>
                    <div className="bg-[var(--mint-muted)] rounded-xl sm:rounded-[24px] p-5 sm:p-8 border-2 border-[var(--mint-light)]">
                      <p className="text-sm sm:text-base leading-relaxed text-gray-700 whitespace-pre-line" dangerouslySetInnerHTML={{ __html: result.script.replace(/\*\*(.*?)\*\*/g, '<strong style="color:var(--mint-dark);font-weight:700">$1</strong>').replace(/ğŸ“š\s*/g, '<br/><br/>') }} />
                    </div>
                  </div>
                  {result.practicalTips && result.practicalTips.length > 0 && (
                    <div className="mb-6 sm:mb-10 pb-6 sm:pb-10 border-b-2 border-dashed border-[var(--mint-light)]">
                      <div className="flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6">
                        <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--mint)] flex items-center justify-center flex-shrink-0"><BookOpen className="w-5 h-5 sm:w-6 sm:h-6 text-white" /></div>
                        <h2 className="text-lg sm:text-xl md:text-2xl font-bold text-gray-800">ì‹¤ì „ ìœ¡ì•„ íŒ</h2>
                      </div>
                      <div className="space-y-3 sm:space-y-4">
                        {result.practicalTips.map((tip, idx) => (
                          <div key={idx} className="bg-[var(--mint-muted)] rounded-xl sm:rounded-[20px] p-4 sm:p-6 border-2 border-[var(--mint-light)]">
                            <h3 className="text-base sm:text-lg font-bold text-gray-800 mb-2 flex items-center"><span className="w-5 h-5 sm:w-6 sm:h-6 rounded-full bg-[var(--mint)] text-white flex items-center justify-center text-xs sm:text-sm mr-2 flex-shrink-0">{idx + 1}</span>{tip.title}</h3>
                            <p className="text-sm sm:text-base text-gray-700 mb-2 leading-relaxed">{tip.content}</p>
                            <p className="text-xs text-[var(--mint-dark)] italic">ì¶œì²˜: {tip.source}</p>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}
                  {result.realExamples && result.realExamples.length > 0 && (
                    <div className="mb-6 sm:mb-8 pb-6 sm:pb-10 border-b-2 border-dashed border-[var(--mint-light)]">
                      <div className="flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6">
                        <div className="w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-[var(--mint)] flex items-center justify-center flex-shrink-0"><MessageCircle className="w-5 h-5 sm:w-6 sm:h-6 text-white" /></div>
                        <h2 className="text-base sm:text-xl md:text-2xl font-bold text-gray-800 leading-snug">ë¹„ìŠ·í•œ ê¸°ì§ˆ ì•„ì´ ì—„ë§ˆë“¤ì˜ ì‹¤ì œ í•´ê²°ë²•</h2>
                      </div>
                      <div className="space-y-3 sm:space-y-4">
                        {result.realExamples.map((example, idx) => (
                          <div key={idx} className="bg-[var(--mint-muted)] rounded-xl sm:rounded-[20px] p-4 sm:p-6 border-2 border-[var(--mint-light)]">
                            <div className="flex items-start gap-2 sm:gap-3 mb-3">
                              <div className="flex-1 min-w-0">
                                <h4 className="text-sm sm:text-base font-bold text-gray-800 mb-1">ìƒí™©: {example.situation}</h4>
                                <div className="bg-white rounded-xl sm:rounded-[12px] p-3 sm:p-4 mb-2 sm:mb-3">
                                  <p className="text-xs sm:text-sm text-gray-600 mb-1">í•´ê²° ë°©ë²•</p>
                                  <p className="text-sm sm:text-base text-gray-700 leading-relaxed">{example.solution}</p>
                                </div>
                                <div className="flex flex-wrap items-center justify-between gap-1 text-xs sm:text-sm">
                                  <span className="text-[var(--mint-dark)] font-medium">{example.mom}</span>
                                  <span className="text-[var(--mint-dark)] font-medium">{example.result}</span>
                                </div>
                              </div>
                            </div>
                          </div>
                        ))}
                      </div>
                    </div>
                  )}
                  <div className="flex justify-center flex-wrap gap-3 sm:gap-4">
                    <button onClick={() => { setStep('chat'); saveToStorage(); }} className="w-full sm:w-auto px-5 sm:px-8 py-3 sm:py-4 text-sm sm:text-base bg-[var(--coral)] text-white font-bold rounded-xl sm:rounded-[24px] hover:opacity-90 hover:shadow-lg active:scale-[0.98] transition-all duration-300 flex items-center justify-center space-x-2 sm:space-x-3 min-h-[48px]"><MessageCircle className="w-5 h-5 flex-shrink-0" /><span>ê³„ì† ìƒë‹´í•˜ê¸°</span></button>
                    <button onClick={() => setStep('welcome')} className="w-full sm:w-auto px-5 sm:px-8 py-3 sm:py-4 text-sm sm:text-base bg-white border-2 sm:border-3 border-[var(--mint)] text-[var(--mint-dark)] font-bold rounded-xl sm:rounded-[24px] hover:bg-[var(--mint-muted)] hover:shadow-lg active:scale-[0.98] transition-all duration-300 flex items-center justify-center space-x-2 min-h-[48px]"><Home className="w-5 h-5 flex-shrink-0" /><span>í™ˆìœ¼ë¡œ</span></button>
                    <button onClick={handleReset} className="w-full sm:w-auto px-5 sm:px-8 py-3 sm:py-4 text-sm sm:text-base bg-white border-2 sm:border-3 border-[var(--coral)] text-[var(--coral-dark)] font-bold rounded-xl sm:rounded-[24px] hover:bg-[var(--coral-muted)] hover:shadow-lg active:scale-[0.98] transition-all duration-300 flex items-center justify-center space-x-2 min-h-[48px]"><RotateCcw className="w-5 h-5 flex-shrink-0" /><span>ì´ˆê¸°í™”</span></button>
                  </div>
                </div>
                <p className="text-center text-xs sm:text-sm text-gray-500 mt-6 sm:mt-8 px-2 leading-relaxed">ì´ ë¶„ì„ì€ Chess & Thomasì˜ ì•„ë™ ê¸°ì§ˆ ì´ë¡ ì„ ë°”íƒ•ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤. ì „ë¬¸ì ì¸ ì˜í•™ì  ì§„ë‹¨ì´ í•„ìš”í•œ ê²½ìš° ì†Œì•„ì²­ì†Œë…„ê³¼ ì „ë¬¸ì˜ì™€ ìƒë‹´í•˜ì„¸ìš”.</p>
              </div>
            </div>
            );
          })()}

          {step === 'chat' && (
            <div className="min-h-screen flex flex-col">
              <div className="bg-white border-b-2 sm:border-b-4 border-[var(--coral-light)] p-4 sm:p-6 shadow-lg">
                <div className="max-w-4xl mx-auto flex flex-wrap items-center justify-between gap-3">
                  <div className="flex items-center gap-3 sm:gap-4 min-w-0 flex-1">
                    <div className="w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-[var(--coral)] flex items-center justify-center flex-shrink-0"><Heart className="w-6 h-6 sm:w-7 sm:h-7 text-white" /></div>
                    <div className="min-w-0">
                      <h1 className="text-lg sm:text-2xl font-bold text-gray-800 truncate">{childInfo.name}ì´ ({getChildAge()})</h1>
                      <p className="text-xs sm:text-sm text-gray-500">ì–¸ì œë“  ê¶ê¸ˆí•œ ê±¸ ë¬¼ì–´ë³´ì„¸ìš” ğŸ’•</p>
                    </div>
                  </div>
                  <div className="flex items-center gap-1.5 sm:gap-2 flex-shrink-0">
                    <button onClick={() => setStep('report')} className="p-2.5 sm:p-3 rounded-full bg-[var(--mint-muted)] hover:bg-[var(--mint-light)] transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center" title="ê¸°ì§ˆ í”„ë¡œí•„ ë³´ê¸°"><User className="w-5 h-5 text-[var(--mint-dark)]" /></button>
                    <button onClick={() => { if (confirm('ì²˜ìŒ í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ì‹œê² ì–´ìš”? (ë°ì´í„°ëŠ” ë³´ì¡´ë©ë‹ˆë‹¤)')) setStep('welcome'); }} className="p-2.5 sm:p-3 rounded-full bg-[var(--mint-muted)] hover:bg-[var(--mint-light)] transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center" title="í™ˆìœ¼ë¡œ"><Home className="w-5 h-5 text-[var(--mint-dark)]" /></button>
                    <button onClick={handleReset} className="p-2.5 sm:p-3 rounded-full bg-[var(--coral-muted)] hover:bg-[var(--coral-light)] transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center" title="ì´ˆê¸°í™”"><RotateCcw className="w-5 h-5 text-[var(--coral-dark)]" /></button>
                  </div>
                </div>
              </div>
              <div className="flex-1 overflow-y-auto p-4 sm:p-6">
                <div className="max-w-4xl mx-auto space-y-4 sm:space-y-6">
                  {chatHistory.length === 0 ? (
                    <div className="text-center py-8 sm:py-12">
                      <Sparkles className="w-14 h-14 sm:w-16 sm:h-16 text-[var(--warm-yellow-dark)] mx-auto mb-3 sm:mb-4" />
                      <h3 className="text-lg sm:text-xl font-bold text-gray-700 mb-2 px-1">{childInfo.name}ì´ì— ëŒ€í•´ ê¶ê¸ˆí•œ ê²Œ ìˆìœ¼ì‹ ê°€ìš”?</h3>
                      <p className="text-sm sm:text-base text-gray-500 px-2">ì €ì¥ëœ ê¸°ì§ˆ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìƒí™©ë³„ ë§ì¶¤ ì¡°ì–¸ì„ ë“œë¦´ê²Œìš”.</p>
                      <div className="mt-6 sm:mt-8 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 max-w-2xl mx-auto">
                        {['ìš”ì¦˜ ìê¾¸ ë–¼ë¥¼ ì¨ìš”', 'ë°¤ì— ì˜ ì•ˆ ìë ¤ê³  í•´ìš”', 'ë°¥ì„ ì˜ ì•ˆ ë¨¹ì–´ìš”', 'ì¹œêµ¬ë“¤ê³¼ ë†€ ë•Œ ë•Œë ¤ìš”'].map((q, i) => (
                          <button key={i} onClick={() => setCurrentInput(q)} className="p-4 sm:p-4 bg-white border-2 border-[var(--coral-light)] rounded-xl sm:rounded-[16px] text-left hover:bg-[var(--coral-muted)] hover:border-[var(--coral)] transition-all min-h-[48px]"><p className="text-sm sm:text-base text-gray-700 font-medium">{q}</p></button>
                        ))}
                      </div>
                    </div>
                  ) : (
                    chatHistory.map((msg, idx) => (
                      <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>
                        <div className={`max-w-[85%] sm:max-w-2xl ${msg.role === 'user' ? 'bg-[var(--coral)] text-white' : 'bg-white border-2 border-[var(--coral-light)]'} rounded-2xl sm:rounded-[20px] p-4 sm:p-5 shadow-lg`}>
                          <p className={`text-sm sm:text-base ${msg.role === 'user' ? 'text-white' : 'text-gray-800'} whitespace-pre-line leading-relaxed`}>{msg.content}</p>
                          <p className={`text-xs mt-2 ${msg.role === 'user' ? 'text-white/80' : 'text-gray-400'}`}>{new Date(msg.timestamp).toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' })}</p>
                        </div>
                      </div>
                    ))
                  )}
                  {isAnalyzing && (
                    <div className="flex justify-start">
                      <div className="bg-white border-2 border-[var(--coral-light)] rounded-2xl sm:rounded-[20px] p-4 sm:p-5 shadow-lg">
                        <div className="flex space-x-2">
                          <div className="w-3 h-3 bg-[var(--coral)] rounded-full animate-bounce" style={{ animationDelay: '0ms' }}></div>
                          <div className="w-3 h-3 bg-[var(--coral)] rounded-full animate-bounce" style={{ animationDelay: '150ms' }}></div>
                          <div className="w-3 h-3 bg-[var(--coral)] rounded-full animate-bounce" style={{ animationDelay: '300ms' }}></div>
                        </div>
                      </div>
                    </div>
                  )}
                </div>
              </div>
              <div className="bg-white border-t-2 sm:border-t-4 border-[var(--coral-light)] p-4 sm:p-6 shadow-lg">
                <div className="max-w-4xl mx-auto flex gap-3 sm:gap-4">
                  <input type="text" value={currentInput} onChange={(e) => setCurrentInput(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()} placeholder={`${childInfo.name}ì´ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì„...`} className="flex-1 min-w-0 p-3 sm:p-4 border-2 border-[var(--coral-light)] rounded-xl sm:rounded-[20px] text-base sm:text-lg focus:outline-none focus:border-[var(--coral)] transition-colors disabled:opacity-60" disabled={isAnalyzing} />
                  <button onClick={handleSendMessage} disabled={!currentInput.trim() || isAnalyzing} className="px-4 sm:px-6 py-3 sm:py-4 bg-[var(--coral)] text-white rounded-xl sm:rounded-[20px] hover:opacity-90 hover:shadow-lg active:scale-[0.98] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0 min-h-[48px] flex items-center justify-center"><Send className="w-5 h-5 sm:w-6 sm:h-6" /></button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<GwaenchanaYoApp />);
  </script>
</body>
</html>
